%ÆMDRVØÆRM80Ø Technical Addendum to Y&Y TeX Manual (version 2.1)--- plain TeX formatÆMDNMØ
% Copyright 2007 TeX Users Group.
% You may freely use, modify and/or distribute this file.

\immediate\write16{Format: \fmtname\space Version: \fmtversion}

\overfullrule=5pt	% show justification problem areas
%ÆMDRVØ \overfullrule=0pt	% avoid ugliness in final outputÆMDNMØ
%ÆMDRVØ \tolerance=800	% to avoid overfull box blocks ?ÆMDNMØ

\catcode`\@11		% make @ act as if it was a letter
\newdimen\pc@		% define a new dimension for `pica' for efficiency
\pc@12\p@		% a pica is 10 pt (\p@ is predefined in plain TeX)
\hsize26\pc@		% horizontal size is 26 picas
\vsize12\p@		% vertical page size 
\vsize41\vsize		% is 41 picas (another way of doing this sort of thing)
\advance\vsize\topskip	% plus topskip amount
%ÆMDRVØ \voffset-2.5\pc@	% take out, vertical shift not needed with TWOUPÆMDNMØ
%ÆMDRVØ \hoffset-3\pc@	% take out, horizontal shift not needed with TWOUPÆMDNMØ
\parskip\z@		% set paragraph skip to 0pt
\parindent\pc@		% set paragraph indent to one pica
%
%ÆMDRVØ Define fonts.  ÆMDNMØ
%ÆMDRVØ Originally: Minion for text, Syntax for heading, Memphis light for typewriterÆMDNMØ
%ÆMDRVØ Now: LucidaBright for text, LucidaSans for heading, and LucidaSansTypewriterÆMDNMØ
%
\font\courier=com at10\p@ %
\font\tenrm=lbr at9.5\p@ % \font\tenrm=morg at10\p@
\font\sixrm=lbr at6.1\p@ % \font\sixrm=morg at6\p@
\font\sixbf=lbd at6.1\p@ % \font\sixrm=morg at6\p@
\font\sevenrm=lbr at6.9\p@ % \font\sevenrm=morg at7\p@ 
\scriptfont\z@\sevenrm
\font\tenit=lbi at9.5\p@	% \font\tenit=moi at10\p@
\font\tenbf=lbd at9.5\p@	% \font\tenbf=mob at10\p@
\font\tensc=lbrsc at9.5\p@	% \font\tensc=mosc at10\p@
\font\tendsc=lbdsc at9.5\p@	% \font\tensc=mosc at10\p@
\font\tensl=lbsl at9.5\p@
\font\eightsl=lbsl at7\p@	% fir slanted LaTeX
\font\titlef=lsd at16\p@	% \font\titlef=sxb at16\p@
\font\eighttitle=lsd at9.0\p@	% \font\eighttitle=sxb at9.6\p@
\font\sectfnt=lsd at10.6\p@	% \font\sectfnt=sxb at11\p@
\font\subsectfnt=lsd at9.5\p@	% \font\subsectfnt=sxb at10\p@
\font\sixsubsectfnt=lsd at6.1\p@	% \font\sixsubsectfnt=sxb at6\p@
\font\rhfnt=lsr at8.6\p@	% \font\rhfnt=sxr at9\p@
\font\rhfol=lsb at8.6\p@	% \font\rhfol=sxubl at9\p@
%ÆMDRVØ \font\tentt=lbtnr at9.5\p@	% \font\tentt=meml at10\p@ÆMDNMØ
\font\tentt=lstnr at9.5\p@	% \font\tentt=meml at10\p@
\font\tenttb=lstnb at9.5\p@
%ÆMDRVØ \font\secttt=lbtnr at10.6\p@	% \font\secttt=meml at11\p@ÆMDNMØ
\font\secttt=lstnr at10.6\p@	% \font\secttt=meml at11\p@
\font\cmsy=cmsy10 at 10\p@	% for AMS TeX and AMS LaTeX logos only
\font\lbms=lbms at 9.5\p@	% for < and > in -b=<starting page> etc
\font\lbmi=lbmi at 9.5\p@	% for \varepsilon in LaTeX 2e, x, y
%
\let\sc\tensc			% short hand for smallcaps font
\let\dsc\tendsc			% short hand for bold smallcaps font
\let\tt\tentt			% short hand for typewriter fixed width font
\let\ttb\tenttb
\tenrm				% switch to ten point roman text font
\baselineskip12\p@		% baseline skip is 12pt
%
\newwrite\toc			% allocate new output stream called TOC
\immediate\openout\toc\jobname.toc	% open output stream file <jobname>.toc
\def\noindex#1{}
\def\tocwrite#1{{\let\index\noindex\xdef\toctext{#1}}\xdef\writeit{\write\toc
  {\toctext\string{\noexpand\number\pageno\string}}}\writeit}
\newcount\sectcnt		% allocate new counter for sections
\def\section#1{\removelastskip26\p@ plus3.9\p@ minus1.95\p@
  \global\advance\sectcnt\@ne{\sectfnt\let\tt\secttt\setbox8\hbox{\the
  \sectcnt.\kern6\p@}\hangindent\wd8\noindent\box8#1\par}\afterheadtrue
  \everypar{\afterhead}\global\subsectcnt\z@\nobreak\markbothsame{\the
  \sectcnt.\ #1}\tocwrite{\string\tocsect{\the\sectcnt}{#1}}\nobreak
  \vskip13\p@ plus2.6\p@ minus1.3\p@}
\def\markbothsame#1{\xdef\chapmark{{#1}}\mark{{#1}{#1}}}
\def\chapmark{{}}
\newcount\subsectcnt		% allocate new counter for subsections
\def\subsect#1{\removelastskip19.5\p@ plus3.25\p@ minus1.625\p@\global\advance
  \subsectcnt\@ne\global\subsubsectcnt\z@{\subsectfnt\let\sixrm\sixsubsectfnt
  \setbox8\hbox{\the\sectcnt.\the\subsectcnt\kern6\p@}\hangindent\wd8\noindent
  \box8#1\par}\afterheadtrue\everypar{\afterhead}\nobreak\markright{\the
  \sectcnt.\the\subsectcnt\ #1}\tocwrite{\string\tocsub{\the\sectcnt.\the
  \subsectcnt}{#1}}\nobreak\vskip6.5\p@ plus1.95\p@ minus.975\p@}
\newcount\subsubsectcnt		% allocate new counter for subsubsections
\def\subsub#1{\removelastskip13\p@ plus2.6\p@ minus1.3\p@\global\advance
  \subsubsectcnt\@ne{\subsectfnt\let\sixrm\sixsubsectfnt\noindent\the
  \sectcnt.\the\subsectcnt.\the\subsubsectcnt\kern6\p@#1}\tocwrite{\string
  \tocsubsub{\the\sectcnt.\the\subsectcnt.\the\subsubsectcnt}{#1}}\quad
  \ignorespaces}
%
\def\markright#1{\expandafter\makerightmark\chapmark{#1}}
\def\makerightmark#1#2{\mark{{#1}{#2}}}
\def\rhhead{\ifodd\pageno\rightheadline\else\leftheadline\fi}
\def\rightheadline{\line{\rhfnt\getrecto\botmark\hfil\rhfol\folio}}
\def\getrecto{\expandafter\dogetrecto}
\def\dogetrecto#1#2{#2}
\def\getverso{\expandafter\dogetverso}
\def\dogetverso#1#2{#1}
\def\leftheadline{\line{\rhfol\folio\hfil\rhfnt\getverso\botmark}}
%ÆMDRVØ \headline{\ifnum\pageno>1\rhhead\else\hfil\fi}ÆMDNMØ
\headline{\ifnum\pageno>1\rhhead\else\hfil\fi}
%ÆMDRVØ \footline{\ifnum\pageno=\@ne\hfil{\rhfol\folio}\fi\hfil}ÆMDNMØ
\footline{\ifnum\pageno=\z@\hfil{\rhfol\folio}\fi\hfil} %% no footer
%
\newif\ifafterhead
\def\afterhead{\doafterhead\global\everypar{}}
\def\doafterhead{{\setbox\z@\lastbox}\global\afterheadfalse}
\newskip\nextskip
\def\simpleremove{\par\ifdim\lastskip=\z@\else\vskip-\lastskip\fi}
\def\removelastskip{\par\afterassignment\rem@vel@stskip\nextskip=}
\def\rem@vel@stskip{\ifdim\lastskip=\z@\else\doremoveskip\fi\vskip\nextskip}
\def\doremoveskip{\ifdim\lastskip>\nextskip\nextskip\z@\else\vskip-\lastskip
  \fi}
\newskip\egskip
\def\afterendgroupskip{\par
  \global\egskip\lastskip\endgroup\afterassignment\removeegskip\nextskip=}
\def\removeegskip{\ifdim\egskip=\z@\else\doremoveegskip\fi\vskip\nextskip}
\def\doremoveegskip{\ifdim\egskip>\nextskip\nextskip\z@\else\vskip-\egskip\fi}
%
\newif\iffirstitem
\newif\ifinnerlist
\def\makelistdisplay{\whang\wd8\advance\whang\leftskip\leftskip\whang}
\let\item\zxvqj
\def\regbeginlist{\removelastskip6.5\p@ plus1.95\p@ minus.975\p@
  \begingroup\firstitemtrue\let\beginlist\innerbeginlist}
\def\innerbeginlist{\begingroup\let\itemskip\relax\let\Itemskip\relax\let
  \endlist\endinnerlist\innerlisttrue}
\newcount\itemcount		% allocate new counter for items
\newskip\qrtrskip  \qrtrskip\thr@@\p@ plus1.6\p@ minus.8\p@
\def\itemskip{\iffirstitem\global\firstitemfalse\else\removelastskip\qrtrskip
  \fi}
\def\Itemskip{\iffirstitem\global\firstitemfalse\else\removelastskip\h@lfskip
  \fi}
\def\@tem{\itemskip\advance\itemcount\@ne%
  \noindent\llap{\hbox to\whang{\hfil\hbox to\pc@{\eqthing\itemcount.\hfil}}}}
%ÆMDRVØ \def\bull{$\bullet$}ÆMDNMØ
%ÆMDRVØ \chardef\bull=149ÆMDNMØ		% bullet
%ÆMDRVØ \def\bull{{\lbms\char15}}ÆMDNMØ	% bullet
\def\bull{{\lbms\char14}}	% openbullet
\def\b@tem{\itemskip\noindent\llap{\hbox to\whang{\hfil\raise\p@\hbox to\pc@
  {\bull\hfil}}}}
\newdimen\whang
\def\llist{\beginlist\itemcount96\let\item\@tem\let\eqthing\char
  \setbox8\hbox{\kern\tw@\pc@}\makelistdisplay}
\def\nlist{\beginlist\itemcount\z@\let\item\@tem\let\eqthing\number
  \setbox8\hbox{\kern\tw@\pc@}\makelistdisplay}
\def\blist{\beginlist\let\item\b@tem\setbox8\hbox{\kern\tw@\pc@}%
  \makelistdisplay}
\def\ulist{\beginlist\let\item\u@tem\setbox8\hbox{\kern\tw@\pc@}%
  \makelistdisplay}
\def\u@tem{\noindent\kern-\tw@\pc@}
\def\endlist{\simpleremove\global\let\beginlist\regbeginlist
  \afterendgroupskip6.5\p@ plus1.95\p@ minus.975\p@}
\def\endinnerlist{\endgraf\nextskip\lastskip\ifdim\nextskip=\z@\else\vskip-
  \nextskip\aftergroup\vskip\aftergroup\nextskip\fi\global\let\beginlist
  \regbeginlist\endgroup}
\let\beginlist\regbeginlist
%
\chardef\other12		% \other will be used for \catcode 12
\def\ttverbatim{\begingroup\ttv \obeyspaces \obeylines}
\def\ttv{%
%ÆMDRVØ make `less', `greater', and `backslash' active to translate char codeÆMDNMØ
\catcode`\<\active \catcode`\>\active
%ÆMDRVØ maybe just make these act like \other instead ?ÆMDNMØ
%ÆMDRVØ make {, }, $, &, #, %, ~, _, ^ act like \other, not their normal meaningÆMDNMØ
  \catcode`\{=\other 
  \catcode`\}=\other \catcode`\$=\other \catcode`\&=\other 
  \catcode`\#=\other \catcode`\%=\other \catcode`\~=\other 
  \catcode`\_=\other \catcode`\^ \other 
  \tt \catcode`\\=\active}
%ÆMDRVØ \def\oddcharbackslash{\char"9D\relax}	% char 157 for `backslash'ÆMDNMØ
\def\oddcharbackslash{\char92\relax}	% char 92 for `backslash'
%ÆMDRVØ \def\oddchargreat{\char"9C\relax}	% char 156 for `greater'ÆMDNMØ
\def\oddchargreat{\char62\relax}	% char 62 for `greater'
%ÆMDRVØ \def\oddcharless{\char"98\relax}	% char 60 for `less'ÆMDNMØ
\def\oddcharless{\char60\relax}	% char 152 for `less'
%ÆMDRVØ need to play a game to do the following, since \ is redefined by \ttvÆMDNMØ
%ÆMDRVØ let char 219 act as escape (ala \) in place of \ÆMDNMØ
%ÆMDRVØ also set up active definitions for <, >, \ÆMDNMØ
\bgroup
\catcode`\€\z@ \ttv
€global€let\€oddcharbackslash
€global€let>€oddchargreat
€global€let<€oddcharless
€egroup
{\obeyspaces\gdef {\ }}
\outer\def\begintt{$$\let\par=\endgraf \ttverbatim \parskip=\z@pt 
  \catcode`\€=\z@ \ttfinish}
{\catcode`\€\z@\catcode`€\\other€obeylines€gdef€ttfinish#1^^M#2\endtt{#1€vbox%
  {#2}€endgroup$$}}
\catcode`\€\active
{\obeylines\gdef€{\ttverbatim\let^^M=\ \let€=\endgroup}}
\def\beginlines{\par\goodbreak\vskip6.5\p@ plus1.95\p@ minus.975\p@\nobreak
  \begingroup\parskip\z@\everypar{\vrule height9.20833\p@ depth3.79167\p@
  width\z@}\rightskip\z@ plus\thr@@ em\leftskip\pc@\parindent\z@\obeylines}
\def\endlines{\par\endgroup\vskip6.5\p@ plus1.95\p@ minus.975\p@}
%
%ÆMDRVØ define various logosÆMDNMØ
%
%ÆMDRVØ \def\yandy{Y\hbox to.25\p@{\hss\sixrm\&\hss}Y}ÆMDNMØ	% a bit too tight?
\def\yandy{Y\hbox to.35\p@{\hss\sixrm\&\hss}Y}
\def\yandyBold{Y\hbox to.35\p@{\hss\sixbf\&\hss}Y}
\def\LaTeX{{L\kern-.36em\raise.3ex\hbox{\sc a}\kern-.15emT\kern-.1667em\lower
  .7ex\hbox{E}\kern-.125emX}}
\def\LaTeXSlanted{{L\kern-.26em\raise.3ex\hbox{\eightsl A}\kern-.15emT\kern-.1667em\lower
  .7ex\hbox{E}\kern-.125emX}}
\def\LaTeXBold{{L\kern-.3em\raise.3ex\hbox{\dsc a}\kern-.15emT\kern-.1667em\lower
  .7ex\hbox{E}\kern-.125emX}}
%ÆMDRVØ \def\LaTeXe{\LaTeX\kern.15em2${}_{\textstyle\varepsilon}$}ÆMDNMØ
\def\LaTeXe{\LaTeX\kern.15em2{\lbmi \char34}}
\def\LaTeXeBold{\LaTeXBold\kern.15em2{\lbmi \char34}}
\def\SliTeX{S{\sc li}{\TeX}}
\def\AMS{{\cmsy A\kern-.1667em\lower.5ex\hbox{M}\kern-.125emS}}
%ÆMDRVØ \def\AmSTeX{{\the\textfont\cmsyfam A\kern-.1667em\lower.5ex\hbox{M}\kern-.125ÆMDNMØ
\def\AmSTeX{{\cmsy A\kern-.1667em\lower.5ex\hbox{M}\kern-.125
  emS}-\TeX}
\def\SLiTeX{{S\kern-.06em{\sc l\kern-.035emi}\kern-.06emT\kern-.1667em\lower
  .7ex\hbox{E}\kern-.125emX}}
%ÆMDRVØ \def\AmSLaTeX{{\the\textfont\cmsyfam A\kern-.1667em\lower.5ex\hbox{M}\kernÆMDNMØ
\def\AmSLaTeX{{\cmsy A\kern-.1667em\lower.5ex\hbox{M}\kern
  -.125emS}-\LaTeX}
\font\tii=tii at 10.5pt
\font\tibi=tibi at 10.5pt
\def\MathTime{{\tii Math\-T\kern-2pt\i me}}
\def\MathTimeBold{{\tibi Math\-T\kern-2pt\i me}}
%
%ÆMDRVØ \def\ang#1{$\langle${#1}$\rangle$}ÆMDNMØ
\def\ang#1{{\lbms\char104}{#1}{\lbms\char105}}
\def\angi#1{{\lbms\char104}{\it #1\/}{\lbms\char105}}
\def\breakpar{{\parfillskip\z@\par}}
\def\dottedline{\leaders\hbox to1em{\hss.\hss}\hfill}
%
%ÆMDRVØ\def\tocsect#1#2#3{\vskip6.5\p@\noindent{\bf#1.\kern.5em#2\dottedline#3}\breakpar\vskip3.25\p@}ÆMDNMØ
%
%ÆMDRVØtighten up so reduced TOC fits on one pageÆMDNMØ
%
\def\tocsect#1#2#3{\vskip4.5\p@\noindent{\bf#1.\kern.5em#2\dottedline#3}\breakpar\vskip2.25\p@}
\def\tocsub#1#2#3{\noindent\phantom{\bf0.\kern.5em}#1\kern.5em#2\dottedline
  #3\breakpar}
\def\tocsubsub#1#2#3{\noindent\phantom{\bf0.\kern.5em0.0\kern.5em}#1\kern.5em
  #2\dottedline#3\breakpar}
%
%ÆMDRVØ \def\vbar{$|$}ÆMDNMØ
\chardef\vbar=`\|	% vertical bar separating menu | submenu | subsubmenu
%ÆMDRVØ \def\trademark{$^{\rm TM}$}ÆMDNMØ
\chardef\trademark=153	% TM  - trademark (not registered)
%ÆMDRVØ \chardef\registered=174ÆMDNMØ	% (R) - registered trademark
%ÆMDRVØ \chardef\copyright=169ÆMDNMØ	% (C) - copyright
%ÆMDRVØ \chardef\paragraph=182ÆMDNMØ	% pillcrow
%ÆMDRVØ \chardef\section=167ÆMDNMØ		% section
\chardef\onehalf=189	% {1\over2}
%ÆMDRVØ \chardef\multiply=215ÆMDNMØ	% \times
\chardef\times=215	% \times
\chardef\ellipsis=133	% \dots

\def\decreasepageno{\global\advance\pageno-1}
\def\newpage{\vfill\eject}

\def\blankpage{
	\topglue 2in
	\hbox{ }	% to get blank page
	\newpage
%ÆMDRVØ	\decreasepagenoÆMDNMØ
}

%ÆMDRVØ \font\bigggsize=lsr at 18ptÆMDNMØ
\font\bigggsize=lsr at 20pt
%ÆMDRVØ \font\biggsize=lsr at 12ptÆMDNMØ
\font\biggsize=lsr at 16pt
%ÆMDRVØ \font\bigsize=lbr at 12ptÆMDNMØ
%ÆMDRVØ \font\bigsize=lbr at 11ptÆMDNMØ
\font\bigsize=lbr at 10pt

\def\coverpage{
%ÆMDRVØ \nopagenumbersÆMDNMØ

%ÆMDRVØ \topglue 2inÆMDNMØ

\hbox{ }

%ÆMDRVØ \vskip 2inÆMDNMØ

\vskip 1in

\centerline{{\bigggsize Y\kern-3pt{\biggsize\&}\kern-3ptY TeX System --- release 2.1}}

\vskip .3in

\centerline{{\bigggsize Technical Addendum}}

\vskip .2in

\centerline{{\bigsize Copyright {\copyright} 1990--1998 {Y\&Y}, Inc. All rights reserved.}}

\vskip 3in

%ÆMDRVØ \centerline{{\bigsize \hbox to 1.33in{\special{illustration c:/ps/y&ylogo.eps}\hfill}}} ÆMDNMØ

\centerline{{\bigsize \hbox to 1.33in{\special{illustration c:/ps/y&ylogo}\hfill}}}

%ÆMDRVØ This is the version for showing the logo on screenÆMDNMØ

%ÆMDRVØ \centerline{\hbox to 1.33in{\showimage{y&ylogo.tif}{1.33in}{2in}\hfill}}ÆMDNMØ

% \vskip 1in
\vskip 0.9in

\centerline{{\bigsize {Y\&Y}, Inc. 45 Walden Street, Concord MA 01742, USA}}

\vskip .02in

\centerline{{\bigsize 
%ÆMDRVØ (800) 742--4059 --- ÆMDNMØ
(978) 371--3286 (voice)  --- 
(978) 371--2004 (fax)}}

\vskip .02in

\centerline{{\bigsize http://www.YandY.com}}

}

% If you get a \dogetverso error here it is because you exceeded one page!


%ÆMDRVØ \vskip .02inÆMDNMØ

%ÆMDRVØ \centerline{e-mail: €support@YandY.com€ --- ÆMDNMØ
%ÆMDRVØ World Wide Web: €http://www.YandY.com€}ÆMDNMØ


\input texnansi.tex
\input lcdplain.tex
%
\def\Q{\parskip=9pt \noindent \fourteenbf}            %`Q' in FAQ
\def\A{\parskip=3pt \twelvebf A:}         %`A' in FAQ
%
%ÆMDRVØ\def\bitem{\item{$\bullet$}}ÆMDNMØ %bullet
\def\bslash{$\backslash$}    %backslash
%ÆMDRVØ\def\gtr{$>$}ÆMDNMØ                %greater than
%ÆMDRVØ\def\less{$<$}ÆMDNMØ               %less than
\def\lbrace{$\{$}            %left brace
\def\rbrace{$\}$}            %right brace
%
\hyphenation{cur-rent-rgb-color}
\hyphenation{dvi-ps-one}
\hyphenation{Font-Name}
\hyphenation{ger-man-dbls}
\hyphenation{Get-Pro-file-String}
\hyphenation{image-set-ter}
\hyphenation{Lucida-Math}
\hyphenation{poly-gonal}
\hyphenation{Post-Script}
\hyphenation{Stan-dard-En-cod-ing}
\hyphenation{Times-New-RomanPS}
\hyphenation{Use-DVI-PS-ONE}
\hyphenation{white-chap-el}
\hyphenation{work-around}
\hyphenation{work-arounds}
%
% ÆMDRVØabbreviated program/batch-file names and acronyms:ÆMDNMØ
\def\AFMtoPFM{{\sc afm}to\-{\sc pfm}}
\def\AFMtoTFM{{\sc afm}to\-{\sc tfm}}
\def\AFM{\sc afm}
\def\ANSI{\sc ansi}
\def\ASCII{\sc ascii}
\def\ATM{\sc atm}
\def\AUX{\sc aux}
\def\BIOS{\sc bios}
\def\CHANGED{\sc changed}
\def\CM{\sc cm}
\def\CMD{\sc cmd}
\def\COPY{\sc copy}
\def\DECODE{\sc decode}
\def\DOS{\sc dos}
\def\DSC{\sc dsc}
\def\DOWNLOAD{\sc down\-load}
\def\DTRDSR{\sc dtr/dsr}
\def\DVIALW{\sc dvialw}
\def\DVIENCODE{\sc dvi\-encode}
\def\DVILASER{\sc dvi\-laser}
\def\DVIPSONE{\sc dvi\-ps\-one}
\def\DVIPS{\sc dvi\-ps}
\def\DVITOPS{\sc dvi\-to\-ps}
\def\DVITWOPS{{\sc dvi\-}2{\sc ps}}
\def\DVIWindo{{\sc dvi\-w}indo}
\def\DVI{\sc dvi}
\def\EBCDIC{\sc ebcdic}
\def\ENCODE{\sc encode}
\def\EPSF{\sc epsf}
\def\EPSI{\sc epsi}
\def\EPS{\sc eps}
\def\FAT{\sc fat}
\def\FIND{\sc find}
\def\FMP{\sc fmp}
\def\HIMEM{\sc himem}
\def\INF{\sc inf}
\def\LOG{\sc log}
\def\MM{\sc mm}
\def\MMM{\sc mmm}
\def\MODEX{\sc modex}
\def\OFM{\sc ofm}
\def\PCL{\sc pcl}
\def\PCSEND{\sc pcsend}
\def\PFAtoPFB{{\sc pfa}to\-{\sc pfb}}
\def\PFA{\sc pfa}
\def\PFBtoPFA{{\sc pfb}to\-{\sc pfa}}
\def\PFB{\sc pfb}
\def\PFMtoAFM{{\sc pfm}to\-{\sc afm}}
\def\PFMtoTFM{{\sc pfm}to\-{\sc tfm}}
\def\PFM{\sc pfm}
\def\PIF{\sc pif}
\def\PK{\sc pk}
\def\PKTOPS{{\sc pk}to\-{\sc ps}}
\def\PRINT{\sc print}
\def\PSADOBE{\sc ps\-adobe}
\def\PSDOWN{\sc ps\-down}
\def\PSFIG{\sc ps\-fig}
\def\PS{\sc ps}
\def\PSS{\sc pss}
\def\QEMM{\sc qemm}
\def\REENCODE{\sc reencode}
\def\REGEDIT{R{\sc eg}\-E{\sc dit}}
\def\REPLACE{\sc replace}
\def\REXX{\sc rexx}
\def\RIP{\sc rip}
\def\SAFESEAC{\sc safe\-seac}
\def\SERIAL{\sc serial}
\def\SETUPTTF{\sc setup\-ttf}
\def\TEXTTUNE{\sc text\-tune}
\def\TFMtoAFM{{\sc tfm}to\-{\sc afm}}
\def\TFMtoPFM{{\sc tfm}to\-{\sc pfm}}
\def\TFM{\sc tfm}
\def\TIFF{\sc tiff}
\def\TNT{\sc tnt}
\def\TPIC{\sc tpic}
\def\TWOUP{\sc twoup}
\def\WMF{\sc wmf}
\def\XCOPY{\sc xcopy}
\def\XONXOFF{\sc xon/xoff}
%
% ÆMDRVØfull file names:ÆMDNMØ
\def\adobepsdrv{\tt adobeps.drv}
\def\amsfontssub{\tt amsfonts.sub}
\def\atmfontsqlc{\tt atmfonts.qlc}
\def\atmregatm{\tt atmreg.atm}
\def\atmini{\tt atm.ini}
\def\autoexecbat{\tt autoexec.bat}
\def\cmanansivec{\tt cmanansi.vec}
\def\configsys{\tt config.sys}
\def\dvipreamenc{\tt dvipream.enc}
\def\dvipreampfa{\tt dvipream.pfa}
\def\dvipsonecmd{\tt dvipsone.cmd}
\def\dvipsoneexe{\tt dvipsone.exe}
\def\dvipsonepif{\tt dvipsone.pif}
\def\dviwindoexe{\tt dviwindo.exe}
\def\dviwindoini{\tt dviwindo.ini}
\def\eepicsty{\tt eepic.sty}
\def\ehandlerps{\tt ehandler.ps}
\def\encodebat{\tt encode.bat}
\def\epsftex{\tt epsf.tex}
\def\lcircle10tfm{\tt lcircle10.tfm}
\def\lcirclew10tfm{\tt lcirclew10.tfm}
\def\lfontstex{\tt lfonts.tex}
\def\lplainfmt{\tt lplain.fmt}
\def\latexfmt{\tt latex.fmt}
\def\lucidasub{\tt lucida.sub}
\def\mathsyvec{\tt mathsy.vec}
\def\mathitvec{\tt mathit.vec}
\def\mathexvec{\tt mathex.vec}
\def\psfigtex{\tt psfig.tex}
\def\psfigsty{\tt psfig.sty}
\def\plainfmt{\tt plain.fmt}
\def\plaintex{\tt plain.tex}
\def\pscriptdrv{\tt pscript.drv}
\def\standardsub{\tt standard.sub}
\def\texbat{\tt tex.bat}
\def\texfontsmap{\tt texfonts.map}
\def\texnansitex{\tt texnansi.tex}
\def\texnansivec{\tt texnansi.vec}
\def\texpool{\tt tex.pool}
\def\textextvec{\tt textext.vec}
\def\ttfontsreg{\tt ttfonts.reg}
\def\winini{\tt win.ini}
\def\yandytexcmd{\tt yandytex.cmd}
%
% ÆMDRVØenvironment variable names and misc commands:ÆMDNMØ
\def\AFMPATH{\tt AFMPATH}
\def\ENCODING{\tt ENCODING}
\def\LATEX{\tt LATEX}
\def\LPLAIN{\tt LPLAIN}
\def\PATH{\tt path}
\def\PFMPATH{\tt PFMPATH}
\def\PLAIN{\tt PLAIN}
\def\PREPATH{\tt PREPATH}
\def\PSFONTS{\tt PSFONTS}
\def\PSPATH{\tt PSPATH}
\def\SEAC{\tt seac}
\def\SET{\tt set}
\def\SUBPATH{\tt SUBPATH}
\def\TEMP{\tt TEMP}
\def\TEXANSI{\tt TEXANSI}
\def\TEXAUX{\tt TEXAUX}
\def\TEXDVI{\tt TEXDVI}
\def\TEXFONTS{\tt TEXFONTS}
\def\TEXFORMATS{\tt TEXFORMATS}
\def\TEXINPUTS{\tt TEXINPUTS}
\def\TEXLOG{\tt TEXLOG}
\def\TEXNANSI{\tt TEXNANSI}
\def\TFMPATH{\tt TFMPATH}
\def\USEDVIWINDOINI{\tt USEDVIWINDOINI}
\def\VECPATH{\tt VECPATH}
\def\WINDIR{\tt windir}
%
\font\lbr=lbr at 9.5pt
\def\down{$\,${\lbr\char62}$\,$} % > separating menu > submenu > subsubmenu
%
\catcode219=\active % \catcode`\€\active % override ansiacce \catcode ...
%
%%%%%%%%%%%%%%%%%%%%%%
% Document starts here
%%%%%%%%%%%%%%%%%%%%%%
%
\coverpage

\newpage
\decreasepageno

\topglue 2in
\hbox{ }	% to get blank page

\newpage
\pageno=-3

%Insert full TOC up front
%
\vskip 1in

\centerline{{\bigggsize Y\kern-3pt{\biggsize\&}\kern-3ptY TeX System --- release 2.1}}

\vskip .1in

\centerline{{\bigggsize Technical Addendum}}

\vskip .5in

\centerline{{\biggsize Contents}}

\vskip .2in

\tocsect{1}{Introduction}{1}
\tocsect{2}{Font/Display Issues}{1}
\tocsub{2.1}{Font Encoding}{2}
\tocsub{2.2}{Font-File Formats}{3}
\tocsub{2.3}{The Encoding Morass}{5}
\tocsubsub{2.3.1}{Whose problem?}{6}
\tocsubsub{2.3.2}{What's standard?}{6}
\tocsubsub{2.3.3}{The solution (sort of)}{7}
\tocsubsub{2.3.4}{Is Unicode the answer?}{8}
\tocsub{2.4}{Using On-The-Fly Reencoding}{8}
\tocsubsub{2.4.1}{No setup required}{9}
\tocsubsub{2.4.2}{`Reverting' previously hard-reencoded fonts}{10}
\tocsub{2.5}{Using `Hard' Reencoding}{10}
\tocsubsub{2.5.1}{Additional font-file details}{11}
\tocsubsub{2.5.2}{ENCODE usage}{12}
\tocsubsub{2.5.3}{When ENCODE isn't sufficient}{14}
\tocsubsub{2.5.4}{Pitfalls in the REENCODE process}{15}
\tocsubsub{2.5.5}{Examples of manual reencoding}{16}
\tocsubsub{2.5.6}{What can go wrong with reencoding?}{17}
\tocsubsub{2.5.7}{Using DECODE to analyze reencoding problems}{20}
\tocsub{2.6}{Some Notes On ATM}{21}
\tocsubsub{2.6.1}{General considerations}{21}
\tocsubsub{2.6.2}{ATM and Multiple Masters}{23}
\tocsubsub{2.6.3}{ATM versus PSCRIPT.DRV}{24}
\tocsub{2.7}{Hardwired Accents and the SAFESEAC Utility}{25}
\tocsub{2.8}{Character Positioning Options}{26}
\tocsect{3}{Printing Issues}{27}
\tocsub{3.1}{DVIWindo printing versus DVIPSONE printing}{27}
\tocsub{3.2}{DVIPSONE Setup}{29}
\tocsub{3.3}{Some Details of DVIPSONE Usage}{30}
\tocsub{3.4}{Troubleshooting Printing from DVIWindo}{32}
\tocsub{3.5}{Additional Troubleshooting for PostScript Printers}{34}
\tocsub{3.6}{Useful Printer Utilities}{35}
\tocsubsub{3.6.1}{Using DOWNLOAD}{35}
\tocsubsub{3.6.2}{Using TWOUP}{36}
\tocsubsub{3.6.3}{Using PKTOPS}{38}
\tocsubsub{3.6.4}{Using SERIAL}{40}
\tocsubsub{3.6.5}{Using CHANGED}{41}
\tocsect{4}{{T\kern -.18em\lower .4ex\hbox {E}\kern -.1emX} Issues}{42}
\tocsub{4.1}{Working With Different Keyboards}{42}
\tocsub{4.2}{Some Details of {Y\hbox to.35\p@ {\hss \sixbf \&\hss }Y} TeX Usage}{44}
\tocsub{4.3}{Handling Graphics in the {Y\hbox to.35\p@ {\hss \sixbf \&\hss }Y} TeX System}{45}
\tocsubsub{4.3.1}{Some Notes on TPIC $\delimiter "26E30F $specials}{45}
\tocsubsub{4.3.2}{Insertion of EPS figures}{46}
\tocsubsub{4.3.3}{Adding a preview to an EPS file without one}{51}
\tocsubsub{4.3.4}{Previewing inserted graphic files}{52}
\tocsubsub{4.3.5}{Verbatim PostScript in DVI files}{52}
\tocsubsub{4.3.6}{Syntax for PostScript insertion $\delimiter "26E30F $specials}{53}
\tocsubsub{4.3.7}{PostScript programming tips}{55}
\tocsubsub{4.3.8}{PostScript coding examples}{57}
\tocsect{5}{Operating System Issues}{63}
\tocsub{5.1}{DOS Considerations in Windows 95/98}{63}
\tocsubsub{5.1.1}{Limitation on environment size}{63}
\tocsubsub{5.1.2}{Limitation on the length of command lines}{64}
\tocsub{5.2}{Windows NT Considerations}{64}
\tocsubsub{5.2.1}{Placing `\&' in file and folder names}{64}
\tocsubsub{5.2.2}{Allowing `+' instead of `\&' with the {T\kern -.18em\lower .4ex\hbox {E}\kern -.1emX} format}{65}
\tocsubsub{5.2.3}{Font handling}{65}
\tocsubsub{5.2.4}{Long file names}{66}
\tocsubsub{5.2.5}{Relating font file names to Windows Face Names}{66}
\tocsub{5.3}{Windows 95/98 Considerations}{67}
\tocsubsub{5.3.1}{Special DOS issues}{67}
\tocsubsub{5.3.2}{Font considerations}{67}
\newpage
\tocsect{6}{Appendix}{68}
\tocsub{6.1}{Frequently Asked Questions}{68}
\tocsub{6.2}{{Y\hbox to.35\p@ {\hss \sixbf \&\hss }Y} TeX Flags and Arguments}{76}
\tocsub{6.3}{Flags and Arguments for DVIPSONE}{81}
\tocsubsub{6.3.1}{DVIPSONE flags}{81}
\tocsubsub{6.3.2}{DVIPSONE arguments}{84}
\tocsub{6.4}{DVIWindo Command Line Arguments}{87}
\tocsub{6.5}{Maintaining DVIWindo's Preferences}{88}
\tocsub{6.6}{Fine Points of DVIWindo's `TeX' Menu}{92}
\tocsub{6.7}{Flags and arguments for AFMtoTFM}{94}
\tocsub{6.8}{Batch and PIF files}{96}
\tocsub{6.9}{TPIC Command List}{97}
\tocsub{6.10}{Modifying CM Text Fonts for TeX 'n ANSI Encoding}{99}
\tocsub{6.11}{Using the Old Adobe LucidaMath Fonts}{100}
\tocsubsub{6.11.1}{Sample macros for Adobe LucidaMath}{102}
\tocsect{7}{TeX 'n ANSI encoding (character layout)}{104}
\tocsect{8}{Font Manipulation Package (Advertisement)}{105}
\vskip 3in

\hbox{\vrule\vbox{\hrule
% \hbox spread 8pt {\hfil\vbox spread 8pt{\vfil
\hbox spread 0pt {\hfil\vbox spread 8pt{\vfil
\hbox{\centerline{{\bigsize {Y\&Y}, Inc. 45 Walden Street, Concord MA 01742, USA}}}%
\hbox{\centerline{{\bigsize (978) 371--3286 (voice)  --- (978) 371--2004 (fax)}}}%
\hbox{\centerline{{\bigsize Email: {\tensl support@YandY.com}}}}%
\hbox{\centerline{{\bigsize World Wide Web: {\tensl http://www.YandY.com}}}}%
\vfil}\hfil}
\hrule}\vrule}%

\newpage
\decreasepageno

\topglue 2in
\hbox{ }	% to get blank page so text starts on right

\newpage
\pageno=1

\section{Introduction}

The main manual for the {\yandy} TeX System covers all of the information normally needed to get the system up and running and producing useful results. This Addendum delves more deeply into some of the issues raised in the manual and is intended primarily as a technical resource for expert users.

The Addendum's sections --- {\bf Font/Display Issues}, {\bf Printing Issues},
{\bf {\TeX} Issues}, and {\bf Operating System Issues} --- cover the broad
areas in which problems may arise. We follow them with an {\bf Appendix} that
includes answers to a variety of frequently asked questions.

Be sure also to consult % any 
€readme.txt€ and €news.txt€ files distributed
with {\DVIWindo}, {\DVIPSONE} and {\yandy} TeX for additional technical
information and late-breaking news about program functionality. 
% 
Check in the €misc-doc€ sub-folder of the €yandy€ folder, and also in the
€doc€ sub-folders of the €dviwindo€, €dvipsone€ and €yandytex€ sub-folders.
An overview of this documentation may be found in 
€c:\yandy\doc-misc\overview.txt€.

Frequently answered questions may be found in section~6.1 
of this manual,
% later in this manual,
and also on our web page at:
€http://www.YandY.com/faq-sys.htm€ 
(for {\TeX} System related issues) and
€http://www.YandY.com/faq-fonts.htm€
(for font related issues).
%
Downloadable support files may be found at
€http://www.YandY.com.support.htm€.
%
You can contact {\yandy} technical support by sending email to
€support@YandY.com€.

\section{Font/Display Issues}

Defined most 
precisely, a font is any set of characters that you access 
via a single name when typesetting a particular job. 
% It is possible (though not particularly easy) to set up a custom font whose
% characters come from several different fonts. So with enough time and energy,
% for example, you could define a `MyJob' font that contains Times-Roman `A,'
% `C,' `E,' etc, and Helvetica `B,' `D,' `F,' etc --- if that's what the
% typesetting job calls for.
Typically we think of a font as a predefined collection of
characters that are related in terms of character design, weight and
orientation: Times-Italic, for example. 

We group fonts having different weights and orientations but the same basic
character design into font families: for example, Times-Roman, Times-Italic,
Times-Bold and Times-BoldItalic comprise the Times family.

{\TeX}'s canonical font family is Computer Modern. This family is somewhat
unusual by current standards, in that it consists of optically scaled fonts.
Thus, 7-point Computer Modern Roman (CMR7) and 10-point Computer Modern Roman
(CMR10) are % two 
distinct fonts in the Computer Modern family, similar % identical 
in all respects except that the visual appearance of each character in CMR10
is slightly different from that of its counterpart in CMR7: in each case, the
character is optically `tuned' for optimum appearance at the specified size. 

Such optical scaling is the exception today; most other font families are
linearly scaled. For example, in the Lucida Bright family, one font (Lucida
Bright Roman) is the source of roman (regular) text at all sizes, a second
font (Lucida Bright Italic) provides italic text at all sizes, and so on.

Recently, `Multiple Master' (MM) font technology has made it possible to
have one `axis' devoted to optical scaling, so this refinement of typography
may yet become more widely available again (see also section~2.6.2).

\subsect{Font Encoding}

The characters in a font are accessed via numeric codes, typically between 0
and 255 (the range describable by 8-bit numbers). Many fonts, though, contain
more than 256 characters. Which of these characters are actually accessible
in an application depends on the platform (PC, Mac, Unix), the application,
and the font encoding. 

Some definitions:

\blist
\item {\bf Encoding vector} --- a mapping from numeric character codes to
characters.  Characters in the encoding vector are referred to by
character names (like `semicolon') in % the case of 
Type~1 fonts.
\endlist

\noindent In the case of TrueType fonts, the `€cmap€' plays the role of
`encoding vector.' It maps from numeric character code to sequential 
glyph program index within the font `program.'

\blist
\item {\bf Unencoded character} --- a character in a font that is not listed
in the current encoding vector, hence not accessible (without first
reencoding the font).  

\item {\bf Reencoding} --- providing a font with a new encoding vector.
This can make previously unencoded characters accessible,
and in addition can change the character layout.
\endlist

\noindent On a given platform, {\it text\/} font encoding is a predefined, 
system-level function. Windows, for example, automatically encodes text
fonts to `Windows {\ANSI}' character coding and uses `raw' or `native'
encoding for all other fonts (symbol, math, pi, and decorative fonts).
Similarly, the Mac operating system automatically encodes text fonts to `Mac
standard roman encoding' and uses native encoding for all `pi' fonts. (More
later on precisely what constitutes a text font.)

Furthermore, most applications on a given platform can only use % recognize
the text font encoding that the platform itself provides. % allows. 
Hence, for example, Microsoft Word on the PC platform can only `see' text
fonts as having Windows {\ANSI} encoding and all symbol/decorative fonts as
having their native encoding. 

The {\yandy} TeX System is the only Windows application that can override
Windows' system-level font encoding and implement %  recognize
arbitrary, user-defined reencoding. It performs % implements 
this `on-the-fly reencoding' without altering your Windows font files --- 
so they can also continue to be used in the normal manner by other Windows
applications. 

The system also provides a set of utilities through which you can permanently
{\it hard-reencode\/} your text fonts --- give them an arbitrarily defined
`native' encoding and force Windows to use that encoding. So, for
example, your Windows text fonts could be permanently reencoded to use the
Macintosh character set --- in {\it all\/} Windows applications, not just the
{\yandy} TeX System.  This, however, is rarely needed.

\subsect{Font-File Formats}

Before delving into the details of reencoding, you should understand how
fonts are physically stored and accessed in various systems. 

{\TeX} requires a {\TFM} (TeX Font Metrics) file for each font it uses. In
this file reside the values of the width, height and depth of each encoded
character in the font, along with kerning-pair values and ligature
information. {\TeX} uses this information in its typesetting calculations.
Confusingly, the {\TFM} {\it metric\/} file is referred to as a 
{\it font\/} in the {\TeX}-book.

The {\TFM} file does not itself contain the encoding vector definition;
yet it depends on the chosen encoding;
hence, if you subsequently choose a different encoding vector, you 
need different {\TFM} files
--- and these cannot be derived from the given {\TFM} files.

In the case of {\yandy} TeX, {\TFM} files for different encodings
are maintained in different drectory trees. 
One of these trees of {\TFM} files is active at any given time based on
the currently selected encoding.
% must generate new {\TFM} files.

The {\TFM} files are the only `font' files that {\TeX} itself requires. If a
{\TFM} file constructed according to the currently defined encoding is
available for each font used in your source document, you can successfully
`{\TeX}' the document to produce a corresponding {\DVI} (DeVice Independent)
file.

Once you have the {\DVI} file, {\TeX} itself is no longer involved; the
{\DVI} processor (previewer or printer driver) is what has to deal with the
actual
font itself (the description of the actual character shapes). In the {\yandy}
TeX System, {\DVIWindo} and {\DVIPSONE} get this font description from font
files stored in Adobe Type~1 format (also termed `PostScript' format ---
a somewhat misleading terminology, since a Type~1 font can be rasterized by a
non-PS application like ATM, can be used to produce non-Post\-Script
output, and has distinctly non-Post\-Script code in its encrypted bowels). 

For each {\TFM} file used by {\TeX}, % a file, 
there must be a corresponding
Type~1 font with the corresponding glyphs and with the same metrics.
{\DVIWindo}, using one of the Windows PostScript drivers or {\yandy}'s own
{\DVIPSONE} PostScript driver, scales the appropriate characters from these
Type~1 fonts for insertion into the PostScript output. Adobe Type Manager
({\ATM}) scales the fonts on the fly to generate {\DVIWindo}'s screen
display. And for non-Postscript output, {\ATM} generates a rasterized,
printer-resolution version of that same screen display.

On the Windows platform, a Type~1 font consists of two files:

\blist
\item {\PFB} --- Printer Font Binary, a compact binary representation of the
 actual character `programs' in the font. 

\item {\PFM} --- Printer Font Metric, a compact binary metric file used by
Windows. It contains basic metric information such as character widths and
kerning pairs, but does not contain ligature information or the encoding
vector. It also contains the Windows Face Name of the font --- 
the name used in font menus. 
\endlist

\noindent Some other file formats are also used:

\blist
\item {\AFM} --- Adobe Font Metric, a human-readable superset of the {\PFM}
file; it is the font metric format that contains complete % metric
information. In it are basic font metric data such as character widths and
kerning pairs, plus ligature information, character bounding boxes, composite
character information and font properties. The {\AFM} file also contains the
encoding-vector information, as well as complete information on unencoded
characters. 

\item {\INF} --- A small plain {\ASCII} auxiliary file containing 
information (such as the Windows Face name) that {\ATM} uses when
it creates a
{\PFM} file from an {\AFM} file.  This is not usually needed. 

\item {\PFA} --- Printer Font {\ASCII}, a verbose hexadecimal representation of the {\PFB} file, commonly used on Unix/NeXT systems and containing exactly the same information as the {\PFB} file. Like the {\PFB}, it contains descriptions of the font's character outlines. It is also useful as an intermediate format when modifying an outline font file, since the {\PFB} file cannot be edited directly without disturbing binary segment length codes.
\endlist

\noindent As far as Windows is concerned, a Type~1 {\it text\/} font is one
in which {\yandy}'s {\DECODE} utility (described briefly in the main manual,
with additional details below) reports `Adobe StandardEncoding' for the
{\PFB} file and `Windows {\ANSI}' encoding for the {\PFM} file. If {\DECODE}
reports something else, then Windows or {\ATM} will treat the font as a
non-text font and use the font's `native' encoding --- whatever that
encoding has been set up to be. 

{\PFB} and {\PFM} files are required for viewing in {\DVIWindo}, and
both are required for printing from {\DVIWindo} using a Windows Postscript
driver. {\DVIPSONE}, on the other hand, requires % access
only the {\PFB} files. 

In all cases, the {\PFB} and {\PFM} files --- as reencoded by {\DVIWindo}
and {DVIPSONE} ---must agree with regard to font encoding --- between
themselves, with the corresponding {\TFM} files, and with the hardwired
encoding assumptions of any (La){\TeX} macros used in your source files. 
And therein lies a tangled tale\dots. 

\subsect{The Encoding Morass}

We usually think of text files as containing characters. But we know that they
`really' contain numeric codes (0--255) stored in 8-bit bytes. Yet the
illusion that they contain characters is persuasive. We press a key and see a
glyph drawn on the screen that (more or less) matches the character shown on
the key. We store the file, and when we retrieve it the same glyphs appear on
screen. We print a plain text file and the hard copy again shows the same
sorts of glyphs. The file really does appear to consist of characters.

At least that is what happens most of the time when we use plain {\ASCII}
characters --- the letters A--Z and a--z, the numerals 0--9 and perhaps some
32 or so punctuation and special characters. The fa\c cade cracks when we use
characters that do not belong to this limited set, for example, accented
characters --- like `A' with `dieresis' (\"A) --- or special symbols like the
ones for `copyright' (\char169) or `integral' ($\int$). Then what we see on
screen may not match what we key in, and what gets printed may not match what
we see on screen. Indeed, it may take several keystrokes or keystroke
combinations to enter such a character. But worst of all, what gets shown on
screen and what gets printed may depend both on the platform and on the setup
of the fonts in the printer. 

Suddenly the illusion is shattered. We realize that we {\it are\/} really
just dealing with numeric codes. % numbers

When we press a key, some numeric code (often 16 bits wide) is generated by
the keyboard. This is translated somewhere in the operating system and/or
application to some other numeric code (typically 8 bits wide) for
convenient storage and manipulation. We think of these codes as representing
characters (input side --- something with a certain semantics).    

A sequence of such codes may go through additional transformations and yield
other numeric codes (typically also 8 bits wide) that are then used for
output. We think of these latter codes as representing glyphs (output side
--- something with a characteristic shape). In the simplest case, the
numeric codes used for output are the same as those used for input, but this
need not always be the case.

Which numeric code is used to represent a particular character is purely a
matter of convention. Even for the upper case letter `A,' {\EBCDIC} uses a
different numeric code (193) than does {\ASCII} (65). Similarly, the numeric
code used to represent a particular glyph is also purely a matter of
convention. For example, Adobe StandardEncoding uses a different numeric code
for the ligature glyph `fi' (174) than does Macintosh standard roman encoding
(222).  

The mapping between `character' and numeric code, then, is quite arbitrary.
And because there are many more characters than the 256 numeric codes
possible with 8 bits, there is a need for more than one possible mapping or
`font encoding.' There can be no `standard' encoding that suits all
purposes, because the number of available numeric codes is much too small. 

\subsub{Whose problem?} If you always work on the same platform and always
use the same application, you may not yet have stumbled into the encoding
morass. On the other hand, if you move documents between platforms (or
sometimes even between applications on the same platform), you may have run
into problems, particularly with characters that are not in the basic
{\ASCII} set, such as ligatures and accented characters. 

Many encoding schemes agree on at least part of the code range, namely the
{\ASCII} character set between 32 and 126. But this leads to a false sense of
security. Even in this restricted range, one finds exceptions and
variations (such as `grave' versus `quoteleft', `hyphen' versus `minus,'
etc). So actually the only {\it really} dependably constant character set
comprises the upper and lower case letters and the digits (that is, if we
ignore {\EBCDIC}!).

\subsub{What's standard?} There are several dozen common encoding schemes,
each claiming to be general and important. Some try to encourage acceptance
by having names that suggest standardization. For example, there is `standard
roman encoding,' which is `standard' only on the Macintosh. And there is `MS
Windows {\ANSI},' which suggests a connection with the American National
Standards Institute, yet has changed twice as part of Windows upgrades. 
The `native' encoding of many Adobe Type~1 text fonts is `Adobe
StandardEncoding.' And in X Windows on Unix, ISO Latin 1 (ISO 8859-1) seems
to be the encoding in force, although, since Unix does not provide
system level support for scalable outline fonts, it isn't really clear.

All of these schemes have drawbacks. Adobe StandardEncoding does not provide
access to accented characters (such as \"A). MS Windows {\ANSI} does not
provide access to the ligatures `fi' and `fl.' Mac standard roman encoding
does not provide access to some % not-so-uncommon 
accented characters ---
% e.g., 
yacute (\'y), Yacute (\'Y), scaron (\v s), Scaron (\v S), zcaron (\v
z), Zcaron (\v Z) --- or to the Icelandic characters eth (\char240), Eth
(\char208), thorn (\char254) and Thorn (\char222). And so on. Hence the
solution does not simply lie in choosing one of these schemes and making it
the universal standard. 

\subsub{The solution (sort of)} Adobe had the right idea in introducing the
notion of the encoding vector in PostScript fonts, and in labelling glyphs with
character {\it names\/} rather than {\it numbers\/}. Unfortunately, few
applications allow the user to exploit this power. Indeed, most use a fixed
encoding methodology --- the one wired-in to the particular platform
involved --- that you cannot modify. 

% possibly flush next paragraph if space needed

One would think that font-generation software would be particularly likely to
take advantage of the notion of an encoding vector. Yet some of this software
uses a hardwired relationship between numbers and character names. That is,
the character names are used merely as aliases for numbers (NUL is 0, Eth is
1, eth is 2, Lslash is 3). % , \ellipsis). 
The character names bear no relationship to the glyphs. This is the worst
possible corruption of the PostScript encoding vector idea!

Because each platform has its own wired-in treatment of font encoding, and
because most applications have no way of affecting that treatment,
font-encoding problems often arise when moving text files between platforms.
There seem to be two strategies to deal with these problems: (a) accept that
applications on the two platforms use different encoding schemes, and
provide a `translation filter,' or (b) carry around the information about
which encoding is in use, either with the fonts or with the document. 

Presently the first strategy dominates. This has a serious drawback:
characters that exist in the encoding used on one platform but not the other
get lost.  Windows {\ANSI} and Macintosh standard roman encoding
have 200 glyphs in common, so 17 of the 217 characters in MS Windows {\ANSI}
do not exist in Mac standard roman encoding, while 23 of the 223 characters
in Mac standard roman encoding do not exist in MS Windows {\ANSI}). 

Note that this is not a Macintosh or Windows or Unix problem; it is
universal across all platforms. And it is not a problem specific to a
particular word-processing application or to {\TeX} --- it applies to all
software dealing with text. There can be no universally accepted encoding
(using 8-bit character codes) that is suitable for all purposes. 

Obviously the second alternative --- keeping track of what encoding a font
uses --- is better, but there is precious little software available today that
uses this idea. The {\yandy} TeX System is one of the few packages that
does. 

\subsub{Is Unicode the answer?} Unicode, with its 16-bit characters, may 
eventually help to resolve some of these problems. But it might not provide a
perfect solution, either. Unicode is by design a `character' encoding (input
side), not a `glyph' encoding (output side). This means
% , for example,
that it should ideally not be used for specifying `glyphs' in fonts for
printing. Purists insist, 
for example, that the ligatures `fi' and `fl' are `glyphs,' not `characters,'
and should not appear in Unicode
(although, as the result of the pressure of practical needs, they do now
have a place in Unicode after all).

Clearly what is needed is another universally agreed upon encoding scheme
(Uniglyph?) for specifying glyphs. For there can be no fine typesetting
without ligatures. 
% Unicode provides an encoding for characters, 
% and ligatures are not considered characters\dots.
Some operating systems (such as Windows~NT) % make the mistake of using 
use Unicode to encode glyphs also.
In an attempt to overcome the limitations of this approach,
some `alphabetic presentation forms' have been added 
to Unicode (used for the f-ligatures, for example)
and `Corporate Use Subareas' have been defined providing for
the definitions of alternate glyphs (such as `Scedilla' and `Scommaaccent').

Another approach, the AFII 32-bit glyph encoding standard, may provide the
answer. But it has yet to gain widespread acceptance. In the meantime, note
that Microsoft has Unicode in its platform, while Adobe is pushing AFII  
glyph names\dots. 

\subsect{Using On-The-Fly Reencoding}

Three gaping wounds in the {\TeX} environment prevent seamless electronic publishing:

\blist
\item Lack of standardization of €\special€ for figure insertion
and other extensions of basic {\TeX};

\item Lack of standardization of names for non-CM fonts 
(although Karl Berry has made a valiant effort in this regard);

\item Lack of standardization of font encoding and a means of reencoding fonts, either on the fly or permanently.
\endlist

\noindent In each case, the {\DVI} processor (printer driver and/or
previewer) has to wrestle with these issues. 

The third of these deficiencies is our concern here. {\TeX}'s Computer Modern fonts alone use 10 different encoding schemes for the code range 0--127, and one has to depend on agreed-upon conventions about which font uses which, since {\TeX} has no provision for specifying an encoding vector in its metric files (aside from an optional field that may be used to record a short name for the encoding). Making matters even more difficult is the fact that assumptions about these {\CM} encodings are hardwired into commonly used formats such as plain {\TeX} and {\LaTeX}, and into many {\TeX} macro packages.

(Trivia buffs: Did you know that CMR5 uses a different encoding vector than
does CMR6 --- which supposedly is just the same font at another size? And
that only one of the 10 encodings used by Computer Modern agrees with
{\ASCII} even in the very restricted 64--126 range? This despite the fact
that {\TeX}'s internal code is often jokingly referred to as `{\ASCII},'
although Knuth is careful to say only that it is `based on' {\ASCII}.) 

It is very important to note that {\it reencoding\/} a font is a more general
operation than simply {\it remapping\/} the entries in the encoding vector
in order to achieve a different character layout. {\TeX}'s
virtual font mechanism, for example, allows one to renumber characters, but
it cannot make unencoded characters accessible. This is because --- like the
rest of {\TeX} --- it deals with characters strictly as numbers.  

Correspondingly, one cannot `reencode' a {\PFM} or {\TFM} file, since these
metric file formats contain no information about unencoded characters. One
has to refer back to more complete information, such as that provided in the
{\AFM} files, or find some way of regenerating that information. 

\subsub{No setup required} If you only use Computer Modern, on-the-fly
reencoding isn't available, since the process applies only to {\it text\/}
fonts and the Computer Modern fonts are not treated as text fonts. 

If you use
other fonts, and if you've installed the {\yandy} TeX System 2.1 from
scratch, then the encoding choice has been set up for you.
Check `Fonts{\down}Encoding,' or equivalently
the {\ENCODING} environment variable in the {\dviwindoini} file.
% is set up for you as part of the installation process, and 
So you need do nothing else unless you wish to subsequently switch to a
different encoding.  

% possibly flush next section if space needed

\subsub{`Reverting' previously hard-reencoded fonts} If you happen
to have text fonts
that were previously hard-reencoded for use with a much earlier version of the
{\yandy} TeX System, then reinstall those fonts directly from the original
diskettes using {\ATM}. If you no longer can locate the original {\PFB} and
{\PFM} files, then you need to `revert' the existing {\PFB} files to Adobe
StandardEncoding and create new {\PFM} files set up for Windows {\ANSI}.
These operations require {\AFM} files --- either the originals, or those
created via {\DVIWindo}'s `Write AFM\dots' function
(Create the {\AFM} files {\it
before\/} proceeding). % with the following operations.)

First create an empty temporary folder and make that the current folder. Use
the {\REENCODE} utility without any command line arguments (except perhaps
€-v€ for verbose output) on all of the {\PFB} files for the text fonts in
question. Note that {\REENCODE} can handle wild-card arguments. For example,
to redesignate each {\PFB} file in the Times family as using Adobe
StandardEncoding: 

\beginlines
€reencode -v c:\psfonts\ti*.pfb€
\endlines

\noindent {\REENCODE} is found in the €\util€ subfolder of your main {\yandy} program folder. If this subfolder is not on your {\PATH}, you will have to specify a full path here and in the examples following.

Now create new {\PFM} files using {\AFMtoPFM} on the {\AFM} files, e.g.,

\beginlines
€afmtopfm -vx -c=ansinew c:\psfonts\afm\ti*.afm€
\endlines

\noindent Note that the encoding vector specified here should be `ansinew,'
{\it not\/} the new encoding vector you wish to use. That is because the
fonts will be installed as ordinary text fonts in Windows --- importantly,
on-the-fly reencoding does not require altering the standard, out-of-the-box
{\PFB} and {\PFM} files. 

To finish the job, `Remove' the old versions of the fonts using Adobe Type
Manager. (Tell {\ATM} to delete the fonts' source files to avoid confusion.)
Then `Add' the fonts from the temporary folder using {\ATM}, being sure to
tell {\ATM} to copy files during this process. Finally, delete everything in
the temporary folder.

\subsect{Using `Hard' Reencoding}

Given the {\yandy} TeX System's on-the-fly reencoding feature, it's logical
to ask why % whether
you would ever need to permanently reencode your fonts. If
your only need is to reencode text fonts for use in the {\yandy} TeX System,
you don't. But as just discussed, if you've previously hard-reencoded fonts
and no longer have them in their original form, you may have to hard-reencode
them back to that form. 

Moreover, you may wish to employ reencoded fonts in other Windows
applications --- none of which can perform on-the-fly reencoding. In this case,
the only alternative is hard reencoding: `fooling' Windows into thinking that
the fonts are {\it not\/} text fonts, so that Windows will instead use the
% chosen encoding as the 
fonts' `native' encoding. 

% possibly flush next paragraph if space needed

Finally, for various obscure reasons you may require only {\it some\/} of your text fonts to be reencoded in {\DVIWindo}. On-the-fly reencoding won't work in this case --- it's a `global' feature, applying to {\it all\/} text fonts in your system --- and again, hard reencoding is required.

In summary, only in very rare cases would you ever want to hard reencode
a font.  If you do, read this section.

The {\ENCODE} batch file, along with its companion {\DECODE} utility, simplifies the hard-reencoding process. In most cases, you can let {\encodebat} do all the work and avoid working directly with the underlying font encoding utilities.

Be warned, though: permanently reencoding a font is a nontrivial task. If you decide to do it, you should always keep a copy of the original font metric files ({\PFM} and {\TFM}) and the font outline file ({\PFB}) in a safe place. In addition, if at all possible, try to work with the original {\AFM} files --- the ones that came with the fonts. In the case of Adobe fonts, if you don't have these {\AFM} files you can obtain them from Adobe's file server  
€ftp.adobe.com€, or from `hidden' files on the `Type on Call' CD-ROM.

Before we go on, it should be emphasized again:
you do not normally have to hard reencode fonts.

\subsub{Additional font-file details} Before we plunge into the nitty gritty
details of using {\encodebat} and its companion utilities, here is a quick
rundown of some key additional features of the files these programs
manipulate. 

Every Adobe Type~1 font file ({\PFB} or {\PFA}) has the encoding vector
explicitly listed near its beginning, following €/Encoding 256 array def€,
typically using lines of the form: 

\beginlines
€dup €\angi{code}€ /€\angi{name}€ put€
\endlines

\noindent For example,

\beginlines
€dup 32 /space put€
\endlines

\noindent Actually, plain vanilla {\it text\/} fonts use Adobe
StandardEncoding here, in which case the line  

\beginlines
€/Encoding StandardEncoding def€ 
\endlines

\noindent 
appears instead (to see StandardEncoding, look in €standard.vec€).

The corresponding {\AFM} file always contains the encoding explicitly. In
this file, following the line containing the word €StartCharMetrics€, are
lines of the form

\beginlines
€C €\angi{code}€ ; WX €\angi{width}€ ; N €\angi{name}€ ; B €\angi{xll} \angi{yll} \angi{xur} \angi{yur};
\endlines

\noindent The {\AFM} file also lists unencoded characters, each with character code $-$1. These characters do not appear in the font's encoding, and their names cannot be ascertained from the {\PFB} file (without decrypting it and listing the €CharStrings€ dictionary).

{\TFM} files do not contain the encoding (which is one reason why they are so
compact). While there is an optional field that can be used to note the name
of an encoding, there is no space for a full encoding vector. {\TFM} files
produced by {\AFMtoTFM}, however, do contain either the standard {\TeX} name
for an encoding (e.g., TeX Text) or the name of the encoding vector file (in
the case when it is not one of the `standard' encoding vectors defined for
Computer Modern fonts).

In addition, the `checksum' in the {\TFM} file is derived from the first six
characters of the encoding vector name.  {\TeX} copies this
checksum into the {\DVI} file along with the {\TFM} file name.  This makes
it possible for {\DVI} processors (like {\DVIWindo} and {\DVIPSONE}) to
warn you about encoding conflicts with a meaningful message that
helps determine which encoding vector was used to make the {\TFM} files.

Like {\TFM} files, Windows {\PFM} files do not contain the encoding.
{\PFM} files produced by {\AFMtoPFM} contain either the standard {\TeX} name
for an encoding (e.g., TeX Text) or the name of the encoding vector file
(when it is not one of the `standard' encoding vectors defined for Computer
Modern fonts). In either case, the name follows the string `€Encoding: €.'

\subsub{ENCODE usage} {\ENCODE} assumes that you have already `installed' the
fonts in  question (perhaps with an encoding that you do not now wish to
use).  That is, {\ATM} has been used to `Add' the fonts, and there are
already  {\PFB}, {\PFM} and perhaps {\TFM} files for the fonts in the
appropriate  folders.

To use {\encodebat}, you must first `Remove' the fonts that are to be
altered, using the {\ATM} Control Panel. (But do {\it not\/} tell {\ATM} to
delete the fonts' source files.) Then type 

\beginlines
€encode €\angi{vect} \angi{afm-dir} \angi{pfb-dir} \angi{tfm-dir} \angi{win-dir} €[W|N]€ \angi{font-1} €...€
\endlines

\noindent where

\blist
\item \angi{vect} is the name of the encoding vector file. This may be a fully qualified file name, or instead refer to a vector file in the current folder, or to a vector file in the folder pointed to by the environment variable {\VECPATH}.

\item \angi{afm-dir} specifies the folder containing file \angi{font}€.afm€

\item \angi{pfb-dir} specifies the folder containing file \angi{font}€.pfb€ (The {\PFM} files are assumed to be in the {\PFM} subfolder of this folder --- or in the {\PFB} folder itself, if there is no {\PFM} subfolder.)

\item \angi{tfm-dir} specifies the folder containing file \angi{font}€.tfm€

\item \angi{win-dir} specifies the Windows folder --- where {\atmini} may be found

\item €W€ requests that modified {\TFM} files overwrite original versions, and €N€ requests overwriting {\it no\/} files

\item \angi{font-1} is the name of the first font file, without extension,
and without trailing underscores (if any); e.g., for file €tir_____.pfb€ use
€tir€.
\endlist

\noindent The {\encodebat} batch file resides in the €\util€ subfolder of
your main €yandy€ program folder; as before, if that folder is not on your
{\PATH}, you will have to specify the full path to {\encodebat} in the
command line shown above. Note, too, that you can specify more than one font
to modify. In fact, it is usually best to reencode all four styles of a
family (regular, bold, italic, bold italic) at the same time. 

Modified {\PFB}, {\PFM}, and {\TFM} files all appear in the current folder (and the modified {\TFM}s also overwrite the originals if €W€ is specified). When the process is complete, `Add' the {\PFB} and {\PFM} files, using the {\ATM} Control Panel. Tell {\ATM} to copy the files (thus overwriting the originals in your €c:\psfonts€ folder). Once the files are installed in this manner, you can delete the versions in the current folder.

Note that {\ENCODE} may use a significant amount of temporary file space. Make sure that your {\TEMP} environment variable points to a folder that has at least several hundred kilobytes of space (ideally a RAM disk).

Here are several additional % important 
points regarding {\ENCODE} usage:

\blist
\item There is a limit on the allowed length of any command typed at a command prompt. If the command line threatens to get too long, work on one font at a time, or first copy the {\AFM} files to the current folder, so as to shorten the command line.

\item {\ENCODE} tries to include as many of the `standard' {\TeX} ligatures and pseudo ligatures in the {\TFM} file as possible, unless the font is fixed pitch, in which case even real ligatures in the {\AFM} file are suppressed. (Additional useful pseudo ligatures may also be generated.)

\item {\ENCODE} adds control-character reencoding, if control character positions 0--31 contain encoded characters and if the remapped positions (161--196) are not already occupied. (It is then possible to access characters in the range 0--9 via 161--170 and characters in the range 10--31 via 173--194.)

\item {\ENCODE} sets up the {\PFM} and {\PFB} files so that {\ATM} (taking its cue from the {\PFB} file) and the Windows PostScript driver {\pscriptdrv} (taking its cue from the {\PFM} file) agree on whether the font is to be reencoded to Windows {\ANSI}.

\item If it deems it prudent, {\ENCODE} `immunizes' the {\PFB} file (by using {\yandy}'s {\SAFESEAC} utility; see below) to make it safe from {\ATM} for Windows, which exhibits a misfeature relating to accented characters when a font does not use Windows {\ANSI} encoding. The {\PFB} file is not changed if the file has already been `immunized' or uses an encoding known to be safe (e.g., an encoding that does not contain any accented characters).

\item {\ENCODE} extends the Windows Face Name of a font with a trailing `X' (unless it already ends with an `X'). This has to be done to avoid a misfeature in the Windows PostScript driver, which contains hardwired {\PFM} information for 83 fonts (without the `X' it may ignore the changes you make).

\item {\ENCODE} tries to ascertain the Windows Face Name for the font from an existing {\PFM} file. If it cannot find one, it creates a suitable Face Name from the font's PostScript FontName by dropping style modifiers (`Italic,' `Bold' etc).
\endlist

\noindent Just keep in mind that in general, with {\yandy} TeX's ability
to reencode fonts on-the-fly, you typically won't need to hard-reencode
any fonts.

\subsub{When ENCODE isn't sufficient} There may be cases where the {\ENCODE} batch file does not provide sufficient flexibility, and you have to instead resort to using separately the utilities that it calls. In such situations, you can use the {\REENCODE} utility to reencode the {\PFB} file, the {\AFMtoPFM} utility to create a new {\PFM} file, and the {\AFMtoTFM} utility to create a new {\TFM} file.

As we've seen, Windows only provides for two ways to use a font: 
(a) as a `text' font, reencoded to Windows {\ANSI} character encoding 
(the default), or 
(b) as a `symbol' font, with the font's native encoding. 
Which of these encoding schemes is used by the PostScript printer driver
depends on how the {\PFM} file is set up. One can force use of native
encoding by setting the `Family' field to `Decorative' using the command line
flag €d€ when using {\AFMtoPFM}. You should also set the €CharSet€ field to
`Symbol' in this case, using the command line flag €s€.

% which is actually the important one? in Type 1 it is `decorative'

{\ATM}, which controls on-screen display and non-PostScript printing, has a different criterion. It assumes Windows {\ANSI} reencoding if the {\PFB} file contains the line €/Encoding StandardEncoding def€ (somewhat bizarre!). So to have {\ATM} use `native' encoding, one must avoid this line in the {\PFB} file.

If the font uses StandardEncoding and one wishes to actually use that
encoding in Windows (a pretty unlikely situtation), then the font has to be
`standardized.' This is a little trick that {\REENCODE} can perform, whereby
Adobe's StandardEncoding is spelled out line by line to fool {\ATM} into
thinking that StandardEncoding is in fact {\it not\/} being used. Without
this ploy, current versions of {\ATM} force reencoding to Windows {\ANSI}. To
`standardize' a font, use `standard' as the name of the encoding vector file:

\beginlines
€reencode -v -c=standard tir.pfb€
\endlines

\noindent The outline font file ({\PFB} or {\PFA}) does not have to be
reencoded when (a) the font already has the desired encoding (other than
StandardEncoding), or (b) the font uses StandardEncoding, and Windows {\ANSI}
is to be used. 
% In this case set the environment variable {\TEXANSI} to 1 in the [Window]
% section of your {\dviwindoini} file. 

\subsub{Pitfalls in the REENCODE process} A summary: To reencode a previously installed font using {\ENCODE}'s companion utilities, you first `Remove' the font, using the {\ATM} Control Panel. Then use {\REENCODE} to make a new {\PFB} file and {\AFMtoPFM} to make a new {\PFM} file, making sure to use the €s€ and €d€ command line arguments. For use with {\TeX}, also make a new {\TFM} file using {\AFMtoTFM}. Then install the new {\PFB} and {\PFM} file using `Add' in the {\ATM} Control Panel. This does the trick for {\ATM}. It also works in most cases for the Windows PostScript printer driver, {\pscriptdrv}.

But this % it 
does not always work for fonts for which {\pscriptdrv} contains
hardwired data. The Windows PostScript printer driver contains 
% (inside itself) 
the data from {\PFM} files for a number of fonts (currently 83), 
including the
usual 35 printer-resident fonts. It may ignore what you do to these fonts,
because it `knows' they are printer resident. Changing the font file name
does not help, nor does changing the PostScript FontName, because
{\pscriptdrv} recognizes a font based on the Windows Face Name. 

The solution to this problem is to use {\AFMtoPFM} with the command line
argument €X€, which appends an `X' to the Face Name (unless it already ends
in X or if the encoding is `ansinew,' in which case €X€ causes removal of
any trailing X on the Windows Face Name). Or use the €w€ command line
argument to specify the Windows Face Name (and specify the desired encoding
using the command line argument €-c€): 

\beginlines
€afmtopfm -vsdX -c=myencode ncr.afm€
\endlines

\noindent or

\beginlines
€afmtopfm -vsd -c=myencode -w=NewCenturySchlbkX ncr.afm€
\endlines

\noindent To see a list of the command line flags and command line arguments
each of the utility programs takes, invoke them with €-?€ as the only
argument (e.g., €afmtopfm -?€). For most utilities this list shows all
available command line options. For {\AFMtoTFM} the options are more
extensive; see the Appendix for a complete list in that case. 

% flush this sub-section some time ?

\subsub{Examples of manual reencoding} As we've said, the easiest way to keep the {\PFM}, {\PFB} and {\TFM} files `synchronized' is to use the {\ENCODE} batch file. But if your particular needs force doing it the painful `manual' way\dots

\nlist
\item To permanently reencode a font to use `TeX 'n {\ANSI}' encoding:

\beginlines
{\parindent=1pc
€afmtotfm -vad -c=texnansi c:\yandy\fonts\afm\tir.afm€
€afmtopfm -vsdt -c=texnansi c:\yandy\fonts\afm\tir.afm€
€reencode -vt -c=texnansi c:\psfonts\tir.pfb€
}
\endlines

\item To force use of a font's native encoding (assuming that the font does not use StandardEncoding):

\beginlines
{\parindent=1pc
€afmtotfm -va -c=none c:\yandy\fonts\afm\lbme.afm€
€afmtopfm -vsd -c=none c:\yandy\fonts\afm\lbme.afm€
}
\endlines

\noindent (Specifying `none' here means `use the encoding in the {\AFM} file.') If the font's native encoding is StandardEncoding, then you also have to execute:

\beginlines
{\parindent=1pc
€reencode -v -c=standard c:\psfonts\tir.pfb€
}
\endlines

\item To reencode a font to Windows {\ANSI} (the Windows default):

\beginlines
{\parindent=1pc
€afmtotfm -vad -c=ansinew c:\yandy\fonts\afm\tir.afm€
€afmtopfm -v -c=ansinew c:\yandy\fonts\afm\tir.afm€
}
\endlines

\noindent In this case there is no need to do anything to the {\PFB} file itself --- it is automatically reencoded by {\ATM} to Windows {\ANSI}, provided it has the StandardEncoding line described above. If it does not presently use StandardEncoding, then do the following:

\beginlines
{\parindent=1pc
€reencode -v c:\psfonts\tir.pfb€
}
\endlines

\item To reencode a font to use StandardEncoding:

\beginlines
{\parindent=1pc
€afmtotfm -vad -c=standard c:\yandy\fonts\afm\tir.afm€
€afmtopfm -vsd -c=standard c:\yandy\fonts\afm\tir.afm€
€reencode -v -c=standard c:\psfonts\tir.pfb€
}
\endlines

\noindent Note that the {\PFB} file itself must be reencoded (`standardized') even if its native encoding happens to be StandardEncoding already (see explanation above).
\endlist

\noindent Encodings with accents (and base characters) in different positions may not work with Windows software (unless you at least use {\SAFESEAC} to `immunize' the {\PFB} file).

Sometimes it is convenient to edit the outline font file itself. This is another way of modifying the encoding, the font matrix, and the actual PostScript FontName. But don't try to edit a {\PFB} file directly, even with an editor that can handle 8-bit character codes. A {\PFB} file has embedded binary length codes, which will be in error if there are any changes in the lengths of any of the sections of the file.

Instead, convert from {\PFB} to {\PFA} format using {\PFBtoPFA}, then edit the {\PFA} file and convert back to {\PFB} format, using {\PFAtoPFB}. The {\PFA} file is in plain {\ASCII} (including a huge section all in hexadecimal) and can be safely read into a `text only' editor.

\subsub{What can go wrong with reencoding?} Properly modified font files
created using {\encodebat} should cause no problems. You most likely have an
encoding problem when ligatures (fi, fl, etc) don't show up at all or show
incorrectly (for example, you get the % registered trademark 
`{\char174}' symbol), 
when special characters (like endash and emdash) don't show correctly, when
instead of `quoteleft' you get the `grave' accent and instead of `quoteright'
you get `quotesingle' (`straight quote'), when `hat' and `tilde' accents in
math show up too large and too low, when characters mysteriously disappear,
when accents don't show up, or when on-screen display doesn't match printed
output.

Such problems usually result from mismatches in the encoding assumed when making the {\PFB} file, when making the {\PFM} file, when making the {\TFM} file, and when writing the {\TeX} macro headers used in your source file.

Actually, one of the best early clues of encoding problems is the {\TeX} complaint:

\beginlines
€Missing character: There is no ... in font ...!€
\endlines

\noindent In most implementations of {\TeX}
this very important error message only shows up in
the log file  --- and then without any
indication of where the error occurred. In {\yandy} TeX you will be
notified on screen and in the log file of any `missing characters' and be
given the context. 

Another common sign of encoding problems is that `{\lbrace}' and `{\rbrace}'
and underscore don't come out right. Such problems 
arise because % result from the fact that 
the Computer Modern fonts do not follow the {\ASCII} layout even in the
restricted 32--127 range (instead of {\lbrace} in position 123, TeX Text
encoding has `endash,' instead of {\rbrace} in position 125, there is
`hungarumlaut,' instead of `underscore' in position 95, there is
`dotaccent'). 

For a painful illustration of what can happen, see Paul W. Abrahams, `{\TeX}
for the Impatient' (Addison-Wesley ISBN 0-201-51375-7). In that case, the
{\TFM} files were apparently set up for Adobe StandardEncoding, but the fonts
themselves were set up for TeX Text encoding. See `Erratum' in the back of
the book for additional details. {\DVI}-to-PostScript printer drivers (like
{\DVIPS}) that refer to {\TFM} metric files are particularly subject to this
sort of problem.

Hard reencoding problems can arise from several other sources:

\blist
\item All members of a font family should be reencoded together. This prevents problems with `font harmonizing' software --- and with {\ATM} itself. If you change the roman (regular) member of a family, but do not change the rest, there will be `orphaned styles' that can lead to peculiar results. For example, if you use {\ENCODE} on the roman style of `Times,' then the modified font will have Windows Face Name `TimesX.' The other three styles will still be there under the Face Name `Times.' Selecting the roman style of `Times,' however, will yield an italic font, since there is no roman style with that Windows Face Name anymore, only italic, bold and bold italic.

\item The Windows PostScript driver ({\pscriptdrv}) caches font metric information just like {\ATM} does. For this purpose, it uses files with extension €.fsf€ in the Windows folder. You do not normally have to delete these €*.fsf€ files. The driver is smart enough (most of the time) to realize that you have made some change, and then rebuild these files the next time you try to print (which may take a while if you have a few hundred fonts). Should you get inappropriate font selections when printing after making a change, exit Windows, relaunch and try again. If the problem persists (but on-screen display is OK), delete the €*.fsf€ files. You can check whether the €*.fsf€ files have been rebuilt by {\pscriptdrv} since you last modified a font by looking at the file creation time.

\item If you use Adobe's Windows PostScript driver ({\adobepsdrv}) you may
need to delete its metric cache. This is a file in the Windows folder with
extension €.ebf€.  

\item Your printer may keep a cache of glyphs that it has already rendered (to implement `across job' font caching). This cache is supposed to be organized on character name, not numeric code, so everything should work fine without flushing it. But the process does not work correctly on some PostScript `clones.' If you have any doubts, then power cycle the printer before printing using the reencoded font.

\item Try not to use Adobe's `Windows 3.0 Font Downloader,' or the Adobe {\PCSEND} and {\PSDOWN} utilities. Aside from being slow and user-unfriendly, some of the Adobe downloaders only work with fonts whose names are padded out to 8 characters with underscores (and do not have more than five or six characters in their file names). If you do have to download fonts, use {\DOWNLOAD}, supplied with the {\yandy} TeX System.

\item Ready-made `format' files may cause difficulties. A {\TeX} format file
is a dump of the state of {\TeX} after reading some {\TeX} macro header
files. In the {\yandy} TeX System, we supply ready-made format files for the
default `plain {\TeX}' and for {\AmSTeX}, and also for {\LaTeX}~2.09 and
{\LaTeXe} if you choose to install them. Reading in such a format file is
faster than interpreting the corresponding {\TeX} macro header files.
Unfortunately, the state of {\TeX} saved in a format file also includes any
{\TFM} files loaded at the time it is dumped. {\TeX} will {\it ignore\/} new
versions of {\TFM} files if it already has copies of {\TFM} files for the
fonts in question in a format file. As a result, format files are encoding
dependent, and you will have to remake formats (via `ini{\TeX}') when you
change the encoding of any fonts used in that format. This doesn't normally
apply to formats using only Computer Modern (such as the usual plain {\TeX}
and {\LaTeX} formats), of course, since the encoding of Computer Modern
fonts is supposed to be fixed. 

% possibly flush next paragraph if space needed

% \item A more specialized problem: The current version of Adobe Illustrator
% has trouble with fonts not encoded to Windows {\ANSI}, and in the process
% it messes up font menus for other applications. You can avoid this
%  difficulty by (a) starting up the WordPad application, (b) selecting `Fonts'
%  from its `Character' menu, and (c) minimizing WordPad. Doing so somehow
%  prevents Illustrator from corrupting {\ATM}. (This bug may have been fixed
%  in the new Illustrator release.) 
\endlist

\subsub{Using DECODE to analyze reencoding problems} {\DECODE} allows you to verify that an outline font and its associated metric files have all been made using the same encoding. This is not a trivial task, since each file format lacks some important piece of information.

However, the {\PFM} and {\TFM} files made using {\AFMtoPFM} and {\AFMtoTFM} do carry some hidden information that gives the name of the encoding vector, or a short description, and {\DECODE} reveals this information.

{\DECODE} accepts wildcard file specifications, so you can ask for
information about several font metric files at once. You may be able to gain
some additional insight using the €-v€ (verbose) command line flag, e.g., 

\beginlines
€decode -v c:\psfonts\pfm\*.pfm€
\endlines

\noindent On the other hand, the added verbosity may obscure important information. These commands will not produce useful information if the metric file does not contain the extra `hidden' fields.

If you have both the original {\AFM} metric file and a bunch of encoding vector files, more definitive information may result from using a command line of the form:

\beginlines
€decode -a=€\angi{afm-file} \angi{tfm-file} \angi{enc-dir}€\*.vec€
\endlines

\noindent where \angi{afm-file} and \angi{tfm-file} are fully qualified (full path) names, and \angi{enc-dir} is the folder where encoding vectors reside --- typically the €\fonts\encoding€ subfolder of the main {\yandy} program folder. This causes {\DECODE} to try and reencode the information in the {\AFM} file using each of the encoding vectors in turn, until it matches the information in the specified {\TFM} (or {\PFM}) file. ({\DECODE} may get confused by some fixed-width fonts, since permutations of the encoding vector do not change the font metrics.)

If an {\AFM} file is specified, then it doesn't make much sense to use wild cards for the metric file name --- but wild cards can come in handy for the encoding vector files, as shown in the example above.

The {\PFB} outline font file itself has the encoding vector spelled out in detail, but in this case, instead of a listing of the encoding vector, one typically wants to know which existing encoding vector file this matches. {\DECODE} can be used to discover this information:

\beginlines
€decode -a=€\angi{afm-file} €c:\psfonts\€\angi{pfb-file} \angi{enc-dir}€\*.vec€
\endlines

\noindent If your {\PFB} files reside in some other folder, substitute that folder for €c:\psfonts\€. {\DECODE} also checks whether the encoding in the {\PFB} file happens to match that in the {\AFM} file, and whether reencoding of control characters is being used, i.e., if positions 0--9 are remapped to 161--170 and 10--31 are remapped to 173--194. (The {\PFB} and {\PFM} files should either both show reencoding of control characters, or neither one should --- and the {\TFM} file should never show this.)

Two additional points about {\DECODE} usage:

\blist
\item {\DECODE} complains if the encoding is `Windows {\ANSI},' yet the
`symbol' or `decorative' flags are set. Conversely, {\DECODE} complains if
the encoding is not `Windows {\ANSI}' and the `symbol' and `decorative'
flags are {\it not\/} set. (Both of these combinations are inconsistent and
lead to problems.) 

\item {\DECODE} also checks whether the encoding in the {\PFM} or {\TFM} file happens to match that in the {\AFM} file.
\endlist

\subsect{Some Notes On ATM}

The foregoing font-encoding discussions include copious references to Adobe
Type Manager. This is not surprising, since, as the engine both for using
Type~1 fonts to produce {\DVIWindo}'s display and output to non-PostScript
printers, {\ATM} is a key font/display-system component. 
%
Early versions of {\ATM} had problems. Fortunately, most of these have 
been fixed in the recent versions, leaving only a few pitfalls for the unwary.

The most recent version of {\ATM} for Windows is 4.0
(Note that {\ATM} 4.0 for Windows 95/98 is a 
different program from {\ATM} 4.0 for Windows NT).
The earliest version
that {\yandy} recommends you use is 2.6. 
% If you have an earlier version than 2.6, please upgrade. 
% And 
If you use Hewlett-Packard printers in {\PCL} mode (as
opposed to PostScript) in Windows~95/98, then you need {\it at least\/}
{\ATM} version 3.02 (see also €win95.txt€).

\subsub{General considerations} The {\ATM} manual and the {\ATM} Technical
Reference Guide (file €techref.wri€ on the {\ATM} CD or diskette)
contain both basic information on the program's use and a wealth of more
detailed technical discussion. What follows here are extra information and
fine points: 

\blist
\item Specify an {\ATM} font cache of at {\it least\/} 512k. Performance with
smaller values can be very slow. 
%
% However, if you set {\ATM}'s font cache to be larger than the amount of
% memory available on your PC, you may not be able to run the {\ATM} Control
% Panel. If this happens, use a {\DOS} editor to delete the line
% €FontCache=€\angi{xxx} in the {\atmini} file. Then restart Windows and use
% the {\ATM} Control Panel to set the font cache to the desired value.

\item {\ATM} substitutes its scalable Times-Roman and Helvetica for Windows'
Roman and Modern, respectively, in order to eliminate the `stick-figure'
appearance of these fonts. If you don't want {\ATM} to make this
substitution, delete the following two lines from the [Aliases] section of
your {\atmini} file:

\beginlines
{\parindent=1pc
€Roman=Times€
€PS Modern=Helvetica€
}
\endlines

\item If there are problems, % In general, 
eliminate as many lines as possible from the [Synonyms] and [Aliases]
sections of the {\atmini} file. Usually many of these lines are either
redundant or left over from earlier versions of {\ATM}. 
%
% In some cases they form circular loops! In particular, you do not want a
% line like €Times=TimesNewRomanPS€ (unless you don't have Times-Roman). But
% do keep the line €Courier=Courier€ to make sure {\ATM} gives you the font
% size you request for Courier. 

\item If you print to a {\PCL} printer using {\ATM} fonts and get jagged,
bitmapped text, you may not have the most recent version of the printer
driver. If this happens, and you have selected the correct resolution (300
dpi) in the Windows `Properties' dialog for the printer, contact
Microsoft or the printer vendor for an updated version of the driver. 
Typically these can be found on the vendor's web site.

\item If you print colored text with the `Color as black' option in the
`Print' dialog box unchecked, the lighter colors will not be printed to
{\PCL} printers. If you print with colored fonts on a black/white printer,
the colors will be translated to gray-levels and you will get spotty or
mottled letters. 

\item If your Hewlett-Packard printer ejects pages before they are completed,
then you may be % are probably 
using more softfonts per page than it can handle. In
this case, check `Print fonts as Graphics' in the {\ATM} Control Panel, which
slows printing but solves the problem. 

\item Do not 
select % run {\ATM} with 
`Use Pre-built or Resident Bitmap Fonts' % checked
in the {\ATM} Control Panel. Unless your printer has fairly low memory (1
megabyte or less), we strongly recommend that this option not be checked.
{\ATM} will then use outline (scalable) fonts in all cases, with a consistent
set of font metrics for each point size. If the option is checked, {\ATM}
uses whatever bitmapped fonts it has, turning to outline fonts only when
necessary. When bitmapped and outline fonts are mingled in this way, your
fonts will not have a consistent appearance across all point sizes. 

\item There is a limit to how many fonts you can install for {\ATM}. 
% In Windows 3.1x, this limit was governed strictly by the fact that the
% {\winini} and {\atmini} files, which list all of the installed fonts, had
% to be smaller than 64k. 
In Windows~95/98, there is a 64k byte limit on {\winini}.
If you use {\ATM} 4.0, this is less of a problem,
since with that version you can `group' fonts and `activate' only those
groups that you need for a given job, rewriting {\winini} on the fly as
required.  Nevertheless, {\winini} can grow rapidly if you install fonts to
many different ports assigned to PostScript printers, since it contains a
complete list of softfonts for each port. So avoid such installations if
possible. 

\item Many applications (such as Microsoft Word) % for Windows) 
have their own
internal limitations on the number of fonts they can handle in their menus.
Those above the limit that appear at the end of the softfonts lists in
{\winini} will be dropped without notice. 

\item If, after {\ATM} is already installed, you install a new printer that's similar or identical to one you already assigned to a different port, {\ATM} fonts may not be available when you target the new printer. The problem is that {\ATM} does not automatically conclude that the two printers should have the same set of fonts. If your {\ATM} font names display a question mark in the `Font' submenu, reinstall your {\ATM} fonts. In the installation process, {\ATM} will read the {\winini} file and thereby learn about the new port assignments. 
\endlist

\subsub{ATM and Multiple Masters} Multiple Master ({\MM}) fonts come with
ready-made prime instances. With {\ATM} 3.0 and higher, you can also create
new instances of these fonts.  For serious work with Multiple Master fonts 
we recommend {\ATM}~4.0 Deluxe.

When {\ATM} creates a Multiple Master instance in Windows95/98, it creates 
a new {\PFM} file and a new PostScript Stub ({\PSS}) file. The base {\MM}
font is contained in a {\PFB} file and its metrics in a Multiple Master
Metrics ({\MMM}) file. The {\PFM} files for the {\MM} instances have names
that end in a 3-digit number.  Make a note of these file names
when creating the {\TFM} file for the font using `WriteTFM...'

In Windows~95/98 you can also find out which {\PFM} file corresponds
to which {\MM} instance by looking in {\atmini}. 
% There, 
You'll find entries like:

% ÆMDRVØfollowing is hard coded (adjust indent) to squeeze onto one lineÆMDNMØ
% \vskip6.5\p@ plus1.95\p@ minus.975\p@ \begingroup
\beginlines
{\parindent-6\p@
€TektoMM_240 RG 564 NO=c:\psfonts\pfm\zjrg_004.pfm,c:\psfonts\zjrg_004.pss€
}
\endlines

\noindent The Windows Face Name is the part before the equals sign. The first
few letters give the base {\MM} font name --- `TektoMM' in this case. In the
illustration here, the first axis (weight) is 240 and the RG denotes Regular.
The second axis (width) is set to 564 and the NO indicates Normal. (The {\it
RG}, {\it NO}, etc are upper case in the names of prime instances, and lower
case in user-created instances.)  
When using ATM~4.0 you can also get this information by running the
€atmregan€ utility, which analyses the €atmreg.atm€ file
in the Windows folder.

The corresponding {\PFM} file is €c:\psfonts\pfm\zjrg_004.pfm€. The line also refers to the stub €c:\psfonts\zjrg_004.pss€. This defines the instance in terms of the base {\MM} font, which itself is defined by the following entry in the {\atmini} file:

\beginlines
€TektoMM=c:\psfonts\pfm\zjrg____.pfm,c:\psfonts\zjrg____.pfb€
\endlines

\noindent If you were to select this font directly, you would get the `default' instance. This is not recommended; rather, you should call for the corresponding ready-made instance.

To use a {\MM} instance with {\TeX}, you need a {\TFM} file. However, {\AFMtoTFM} cannot interpret {\MMM} files, only ordinary {\AFM}s. Fortunately, in {\DVIWindo}, you can use the `Write TFM\dots' function instead. This function also writes an intermediate {\AFM} file in the €\fonts\afm€ subfolder of your main {\yandy} program folder; should there be any problems, you can inspect this file and run {\AFMtoTFM} `manually' on an edited version of it, if necessary.

There is also an alternate, less desirable method for getting an {\AFM} file for a {\MM} instance. You can use {\PFMtoAFM} to extract a metrics file in {\AFM} format from the {\PFM} file. The resulting {\AFM} file is placed in the current folder. The file will not be as complete or accurate as an {\AFM} file created by the first method, but it may be adequate for the purpose at hand. 

Once you have this {\AFM} file, use {\AFMtoTFM} to create a suitable {\TFM} file for {\TeX} (use the encoding specified by €ENCODING=...€). Then copy the {\TFM} file to where {\TeX} expects to find its {\TFM} files.

\subsub{ATM versus PSCRIPT.DRV} {\ATM} controls the rendering both on screen
and for non-Postscript printing. Hence, with these devices the chance of a
major disagreement between on-screen display and printer output is slim. 
Except for printers that handle downloaded `softfonts' % 96/Aug/26
(and buggy {\PCL} printer drivers in Windows~95 --- see €win95.txt€).

{\ATM} does not get into the act when you are printing to a PostScript printer; the Windows printer driver does all the work. So it is --- unfortunately --- possible to see inconsistencies between screen display and printed output, since one is handled entirely by {\ATM}, and the other entirely by the PostScript driver.

For example, there will be a major problem if you edit {\atmini} and change the `Face Name' of some font (the name that appears in font menus). Text using this font will display fine on screen, but will be printed using something inappropriate (say, LucidaBlackletter). The reason is that {\DVIWindo} looks in {\atmini} to figure out what Face Name to use to request a particular font. The name in {\atmini} is the Face Name that {\ATM} recognizes. The PostScript printer driver, on the other hand, looks in the {\PFM} metric files.

{\ATM} extracts the face name from the {\PFM} file, but only once --- when
the font is first installed. It then inserts the name into {\atmini}, and
thereafter relies on that name. The PostScript driver, on the other hand,
extracts the Face Name from the {\PFM} file each time it opens a printer
device context. (It does not read {\atmini}, of course.) If you change the
name recorded in {\atmini}, {\ATM} will still be able to find the font, but
{\pscriptdrv} will not. (And Windows' algorithm for substituting the
`nearest' font invariably comes up with a font that no human would ever
consider `near' to the desired font in any way!)

The solution is to always use the {\ATM} Control Panel to `Remove' the font and then to `Add' it back again. Avoid hand editing {\atmini}.

\subsect{Hardwired Accents and the SAFESEAC Utility}

{\ATM} in Windows 95/98 has its own idea of where accents should be. This is
{\it only\/} a problem if (a) you use text fonts with something other than
default Windows {\ANSI} encoding, (b) you use ready-made accented characters
in the font (rather than explicitly overprinting base and accent character),
or (c) the font uses the Type~1 operator {\SEAC} (as most text fonts do
for the 58 `standard' accented characters).

{\SAFESEAC} is a {\yandy} utility that replaces/expands the problematic {\SEAC} (StandardEncoding Accented Character) operator. It produces a Type~1 font that circumvents the problem with {\ATM}'s hardwired accent positions, simply by not using {\SEAC} to call upon base characters and accents when constructing an accented character.

Fonts processed by {\SAFESEAC} have an additional advantage in providing a workaround for another bug, this one in PostScript interpreters. Most Adobe PostScript Level 1 printers have a bug relating to accented characters: they require that the base and accent characters actually appear in the encoding (that is, it is not sufficient that there is a €CharString€ for them). While this is not a major problem, it still is an issue if you wish to use an encoding such as IBM OEM, since this encoding does include accented characters, yet has no space for the accents themselves. (Hence Adobe PrestigeElite and Adobe LetterGothic are not useful for the `{\DOS} character set' even though these fixed width fonts do contain all of the required glyphs.)

One minor drawback to using {\SAFESEAC} is that the size of the resulting
{\PFB} file will increase slightly (typically between 6\% and 12\%). Another
is that some rendering algorithms may produce minor artifacts where base
character and `accent' overlap. For example, {\ATM} shows white instead of
black in the tiny area of overlap between the `C' and the `cedilla' in
`Ccedilla'.      
Fortunately, quality fonts have a separate  `Ccedilla' rather than
constructing it as a composite character. 

In some cases the hinting for an accent in a particular accented character may not be as good as it was in the original. This may happen when the original hint replacement code in an accent has to be removed. A warning message is issued when this occurs. Note that rendering of the original accent characters themselves is {\it not} affected. In any case, the effect of this on the accents in accented characters is normally small even on screen, and the effect on printed output is completely negligible.

To use {\SAFESEAC}, first convert the {\PFB} file to {\PFA} form using {\PFBtoPFA}. Then give {\SAFESEAC} the name of the {\PFA} file to be altered. The modified file is written into the current folder. Use {\PFAtoPFB} to convert the resulting {\PFA} file back into {\PFB} format, and install the new file in place of the original one.

{\SAFESEAC} can take wild-card arguments, so several {\PFA} files can be
`made safe' % modified 
at once. Just make sure there is enough disk space for them,
and some intermediate files.

\subsect{Character Positioning Options}

A final note on font- and display-related topics. When rendering characters
on any device of finite resolution, some compromises are necessary. The width
of a character when mapped to the finite raster is typically {\it not\/} an
integral number of pixels. The rasterized version of the character, however,
is an integral number of pixels wide. 

Consequently, when several rasterized characters are placed next to one another, the total number of pixels covered is typically not the rounded value of the sum of the true widths of the characters. At some point it becomes necessary to remove the accumulated error --- the difference between the rounded sum of the widths and the sum of the rounded widths. It is convenient to do this between words, where there is white space that can be shrunk or stretched as needed. 

Most of the time this works out quite well, since errors in different characters are random and positive errors tend to cancel negative errors. Problems occur when either (a) a single letter is repeated several times or (b) when using a fixed-width font. In these situations there is no opportunity for small errors of opposite sign to more or less cancel each other --- instead they relentlessly add up. Then, at certain resolutions, there may not be enough white space to absorb the error between words, and letters may collide (or large gaps may form, although these tend to be less objectionable).

The alternative: position each character separately by rounding the
accumulated sum of true character widths. While this avoids the problem, it
does not lead to results as pleasing in {\it normal\/} text, since there will
be adjustments between adjacent characters by one pixel that do not occur in
the first scheme. In addition, this scheme is inherently somewhat slower,
although on reasonably fast machines the difference is not noticable.

{\DVIWindo} gives you a choice between the two schemes for on-screen display,
through the `Favor Position' menu item in the program's `Fonts' menu. If
`Favor Position' is {\it checked}, each character is placed individually.
Positional offsets cannot accumulate. %, but output is slowed.  
If `Favor Position' is {\it unchecked}, sequences of characters are placed as
a group.  Positional offsets accumulate and are absorbed between words (and
where there is explicit kerning within a word).

For this feature to work as expected with fixed-width fonts, you may have to
list all of your fixed-width {\it text\/} fonts in the [Mono] section of
your {\atmini} file.  Note, too, that the `Favor Position' setting is
ignored for output to printers.  {\DVIPSONE} uses a different mechanism to
deal with the positioning of characters in printed output. 

You may also want to smooth screen font display.
Double click `My Computer,' then `View{\down}Folder Options,' 
and select the `View' tab. 
In `Visual Settings' check `Smooth Edges of Screen Fonts.'
This is for Windows~NT, the setting may be somewhere else in
other versions of Windows or Windows 95 Plus.

\section{Printing Issues}

The {\yandy} TeX System provides two means of printing: direct from
{\DVIWindo}, or --- for PostScript output --- via {\DVIPSONE} 
(either as the driver used from the print menu in
{\DVIWindo}, or as a command prompt utility). 
Each of these approaches has a variety of customization options. 

\subsect{DVIWindo printing versus DVIPSONE printing}

The two means of printing use very different code and so, not surprisingly,
have different properties and limitations. {\DVIPSONE} is specialized to
produce very efficient PostScript output, while {\DVIWindo} (indeed, Windows
in general) allows printing to any device for which a printer driver is
available. 

The specifics:

\blist
\item {\DVIPSONE} produces PostScript files that are much smaller than those produced by the Windows PostScript driver (by a factor of four to six in extreme cases).

\item {\DVIPSONE} produces PostScript files much faster than does the Windows PostScript driver. 

\item {\DVIPSONE} produces PostScript files that print much faster than those produced by the Windows PostScript driver.

\item {\DVIPSONE} uses sophisticated font management methods, such as partial
font downloading, to conserve printer memory. The Windows PostScript driver
downloads complete fonts. {\TeX} jobs typically call for many fonts and may
cause the printer to run out of virtual memory when printing using the
Windows {\PS} printer driver. 
\endlist

\noindent 
Symptoms: after a lot of apparent printer activity, no output is produced,
or only part of a page is printed, or only the first few pages of
a document are printed.
Download the {\ehandlerps} error handler ahead of time to check whether this
is what is in fact happening; see section 3.5.) 

\blist
\item {\DVIPSONE} produces resolution-independent output. The output produced by the Windows PostScript driver, on the other hand, is tuned for the selected printer.

\item {\DVIPSONE} produces code that is page independent --- pages
can be randomly permuted and removed from the PostScript file without
breaking the code. Page imposition software and software for printing
`$n$-up' on a page can use much simpler techniques when PostScript files
employ proper Document Structuring Conventions and are page
independent.

\item {\DVIPSONE} takes more care in character and rule placement than does the Windows PostScript driver.
\endlist

\noindent On the other hand:

\blist
\item Both {\DVIWindo} and {\DVIPSONE} support text and rule color, and
monochrome image color €\special€s. Note that on-screen display of colored
text is restricted (by Windows) to a fixed set of colors, where the number of
such colors depends on the `color depth' (bits per pixel) of the video
board/driver setting. Rule color is not restricted in this manner (since it
can make use of color `dithering').

\item Both {\DVIWindo} and {\DVIPSONE} support €\special€s for insertion of {\TIFF} files.

\item {\DVIPSONE} does not support Windows Metafile ({\WMF}) figures.
This is because WMF files are just recordings of sequences of
Windows GUI calls.

\item In addition to printing the document currently being viewed or
selected pages thereof (`Print\dots '), {\DVIWindo} can output the current
page in the current screen mapping mode (`Print View'). This allows you to
print enlarged and shifted views of a page. The program can also print the
character set of a selected font shown on screen, using the current screen
mapping mode (also from `Print View'). 

\endlist

\subsect{DVIPSONE Setup}

In {\DVIWindo}'s `Print\dots ' mode, the `Use DVIPSONE' checkbox lets you
tell the program either to use the appropriate Windows printer driver, or
else call upon {\DVIPSONE}, if available. (Obviously, to use {\DVIPSONE},
either the printer must be a PostScript device, or you must be attempting to
`print' PostScript output to a file.)     

The checkbox appears only if {\DVIWindo} can find {\DVIPSONE} --- % the case
which is the case if
either {\dvipsoneexe} is on your {\PATH}, or (better) if its preamble file
({\dvipreamenc}) and encoding vectors (€*.vec€) are in the folders
pointed to by the {\PREPATH} and {\VECPATH} environment variables.
% respectively.

{\DVIPSONE}'s {\PIF} file ({\dvipsonepif}) is in 
€dvipsone€ sub-folder
% the same folder as {\dvipsoneexe} 
% (under Windows~95/98 and Windows NT 4.0, 
it will have a {\DOS} icon but its €.pif€ extension may not appear
(To change this, double click `My Computer,'
then `View{\down}Folder Options,' and  select the `View' tab.
Uncheck `Hide file extensions for known file types').
% Use the Windows {\PIF} editor (in Windows NT 3.5) or 

Right-click on the {\PIF} file and choose `Properties' 
% (in Windows~95/98 or NT 4.0) 
to modify it if necessary. `Program Filename' should
specify the executable (e.g., €c:\yandy\dvipsone\dvipsone.exe€). 
% Any 
Command
line arguments are ignored (since suitable command line arguments are passed
from {\DVIWindo}).

You can set up the `Display Usage' field in the {\PIF} file for running
`Normal' rather than `Full Screen.' In addition, you can choose to check the
`Close Window on Exit' box. The advantage of doing this is that no inactive
Windows remain after printing is finished. The disadvantage is that error
messages from {\DVIPSONE}, if any, disappear as soon as {\DVIPSONE} exits. It
is perhaps best to initially {\it not\/} close the window on exit (and to
manually close the resulting inactive windows). Once you've checked out the
linkage from {\DVIWindo} to {\DVIPSONE}, you can modify the {\PIF} file to
`Close Window on Exit.'

It is possible to do other things in Windows while {\DVIPSONE} is running, although speed will be impacted (as happens when the Windows print spooler is running). But avoid doing anything in {\DVIWindo} to the {\DVI} file you are trying to print. You can cancel printing from {\DVIPSONE} by typing Ctrl+C while the {\DVIPSONE} window is selected --- although this may not properly terminate the printing job on the printer (which is not a problem when {\DVIPSONE} runs directly in {\DOS}).

If you run {\DVIPSONE} from a command prompt in Windows~95/98 {\it and\/}
your PostScript printer is attached to a serial port (€COM1€ or €COM2€), you
may want to use the {\MODEX} utility to increase the port's setting beyond
the 19,200 baud limit imposed by {\DOS}. The program takes arguments similar
to those taken by the {\DOS} Mode command; with no arguments, it reports the
current settings of €COM1€ and €COM2€. Note that {\MODEX} affects the port
speed {\it only} for {\DOS} access.  

The {\MODEX} utility cannot be used in Windows~NT, since NT prevents
programs from directly accessing I/O hardware registers.
Fortunately, it also isn't normally needed in this case.

\subsect{Some Details of DVIPSONE Usage}

{\DVIPSONE} is controlled by command line flags and arguments. You can get a partial listing of these flags and arguments by typing €dvipsone -?€. Less frequently used items are omitted from the resulting display to permit the list to be less than 25 lines long and fit on the screen without scrolling. For the complete list, see the Appendix.

Each command line flag or argument is preceded by €-€; the first argument {\it not\/} preceded by €-€ is considered the name of the first {\DVI} file to be processed. A flag is a letter that stands on its own, while an argument is a letter followed by €=€ and a name or a string of characters.

For example, to increase the verbosity of {\DVIPSONE}'s output, you can use the command line flag €v€; direction of the output to the second parallel port can be forced using the command line argument €d=LPT2€. To do both while processing the file €testfile.dvi€, type

\beginlines
€dvipsone -v -d=LPT2 testfile€
\endlines

\noindent You can process any number of {\DVI} files in one invocation of {\DVIPSONE} --- the same command line flags and arguments apply to all of the files. In addition, you can use wildcard arguments. So, for example, to process all {\DVI} files in folder €c:\myfiles€ whose names start with the word `chapter,' type

\beginlines
€dvipsone c:\myfiles\chapter*.dvi€
\endlines

\noindent (Note that in this case the €.dvi€ extension is needed so that {\DVIPSONE} will receive the full list of files. If you specify files {\it without\/} using wildcards, you may omit the extension.)

You can set up command line arguments and flags to be used when 
{\DVIPSONE} is called from {\DVIWindo} using 
`Preferences{\down}Command Line{\down}DVIPSONE' from {\DVIWindo}.
This preference is maintained in a
€DVIPSONE=...€ entry in the [Window] section of {\dviwindoini}. 
Items specified in this manner override any corresponding items in the
command line file (see next).

You can also avoid repeated typing of commonly used {\DVIPSONE} command line
arguments and flags by storing them in command line file {\dvipsonecmd} in
the {\DVIPSONE} subfolder of the main {\yandy} program folder. The format of
this file is the same as that of the command line (except that you may use
more than one line). % 96/Aug/26

Items on the command line override corresponding items in the command line file. Note also that because command line flags simply {\it toggle\/} the corresponding settings in {\DVIPSONE}, they do not have any effect if they appear an even number of times on the command line. As a result, you can cancel the effect of flags in the command line file by repeating them on the command line itself. You can also prefix any flag with €1€ or €0€ to force the flag on or off (this proves useful, for example, when you can't remember what is in {\dvipsonecmd}).

% A command line file can prove handy when using {\DVIPSONE} to print from
% {\DVIWindo}. But for operation in this mode you can {\it also\/} pass a set
% of command line flags and arguments to {\DVIPSONE} by placing them in a
% €DVIPSONE=...€ entry in the [Window] section of {\dviwindoini}. Items
% specified in this manner override any corresponding items in the command
% line file.

{\DVIPSONE} also employs a font substitution file. The standard version of
this file, {\standardsub}, resides in the €\dvipsone€ subfolder of the main
{\yandy} program folder. 

One function of this file is to let {\DVIPSONE} know which fonts are
printer resident and hence need not be included in the {\PS} output.
%
If your printer contains fonts other than the basic 13 PostScript fonts ---
the Times-Roman, Helvetica and Courier families, plus Symbol --- you may want
to edit {\standardsub} or (better) create your own substitution file, either
from scratch or by modifying one of the additional substitution files. This
new substitution file can then be called in place of {\standardsub}, using
the €-s€ command line argument (see Appendix). (You can even invoke €-s€
several times on a single command line, each time specifying a different
substitution file. The effect is the same as that attained by concatenating
all of the files into one large file.) % master

A sample line to specify a printer-resident font is

\beginlines
€tir Times-Roman *force* *reside*€
\endlines

\noindent The first element is the filename, less underscores and extension; the second is the PostScript FontName ({\it not\/} the Face Name used in Windows menus); the last two elements tell {\DVIPSONE} not to download the font but instead assume that it is printer resident.

Note that if you claim a font is printer resident and it isn't, all instances of that font get `{\courier Couriered out}' upon output: the printer will substitute Courier for the font it thinks is missing
(without any kind of error message). % 96/Aug/26

Another function of this file is to replace one font with another upon
output. For example, if your {\DVI} output uses €msbm6€ (from the AMS font
set) but you only have €msbm7€ and €msbm10€, you can add this line to
{\standardsub} to deal with the problem:

\beginlines
€msbm6 msbm7€
\endlines

\noindent Alternatively, you can append {\amsfontssub} to {\standardsub}. One
of several additional substitution files provided with {\DVIPSONE}, it
contains this line plus a number of others designed to deal with similar problems.  

% Another function of the font substitution file is to ensure that the fonts
% permanently resident in your printer do not normally get downloaded as part
% of {\DVIPSONE}'s PostScript output.

\subsect{Troubleshooting Printing from DVIWindo}

{\DVIWindo} can run into two classes of problems when printing.

{\bf Display OK; printing occurs in the wrong font.} If the first and
subsequent pages come out in the wrong font (typically Courier), then the
fonts are not being downloaded properly. This may be because they have not
been installed using {\ATM}, or, more likely, because the PostScript driver
doesn't know they are there. This can happen if you install the printer
driver {\it after\/} loading the fonts using {\ATM}. Remove the fonts using
the {\ATM} Control Panel, then reinstall them. Check that the fonts are
listed in the appropriate section of the {\winini} file. If printing with
{\DVIPSONE}, also check that the {\PSFONTS} environment variable in
{\dviwindoini} includes the folder where the fonts' {\PFB} files reside 
(typically €c:\psfonts€ or €c:\winnt\fonts€).

If the first page prints correctly but subsequent pages use the wrong font (typically Courier), your printer driver thinks there is not enough virtual memory in the printer. The driver then tries to compensate by wrapping each page in a €save/restore€ pair, which does not work, since {\pscriptdrv} output is {\it not\/} page-independent. With this scheme, fonts defined on one page are not available on another. You can check `Clear memory per page' (buried deep in the printer's Properties options), but that slows printing considerably. It is usually better to try to increase the amount of virtual memory the driver thinks your printer has (also via Properties).

{\bf Display OK; some characters print incorrectly.} On-screen display is
handled by {\ATM}, as is printing to non-PostScript printers. So in
this case it is next to impossible for different fonts or different font
metric information to be used for printing than for on-screen display
(except in the case of buggy HP {\PCL} printer drivers in Windows~95 ---
see €win95.txt€).

In the case of PostScript printers, printing is instead handled by {\pscriptdrv} or a similar PostScript driver. {\ATM} and {\pscriptdrv} both refer to the {\PFM} and {\PFB} files but interpret those files in different ways. If the interpretations don't agree, the printed result is usually OK but on-screen display is not. However, the reverse can also occur.

The Windows PostScript printer driver bases its selection of a {\PFM} file for a font, and the {\PFB} file to download for that {\PFM}, on the Windows Face Name. This can lead to hidden problems, since the listing in {\winini} includes {\it only\/} font file names, and does not contain any reference to either the Windows Face Name or the PostScript FontName (unlike {\atmini}, which is organized around Face Names).

The most common source of this problem is two fonts with the same Face Name. Typically {\pscriptdrv} uses the first one in its €softfonts€ list, ignoring any others. {\ATM} instead uses the most recently installed name, ignoring older versions. The best way to diagnose this type of problem is to check the association in {\atmini} between Face Name and font file name, then check in the appropriate €.fsf€ file to see what {\pscriptdrv} is using. (This file is binary, but its listings of Windows Face Names and font file names are in {\ASCII}.)

Seeing two fonts with the same Face Name usually results from not removing a
font in the {\ATM} Control Panel before installing a hard-reencoded version
of that font. Another cause is the tendency of some `clone' font vendors to
supply fonts that use a different PostScript FontName but the same Windows
Face Name as the original. A third cause is a potential conflict between a
newly installed font with the same Face Name as that of one of the fonts for
which {\pscriptdrv} contains wired-in {\PFM} files. (Normally this last
point should not be an issue, since {\pscriptdrv} is {\it supposed\/} to
refer to external {\PFM} files first, only resorting to its built-in {\PFM}
files if it can't find what it needs elsewhere.) 

Note that {\ATM}~4.0 does not maintain {\atmini}, instead using
a file called €atmreg.atm€ in your Windows folder. 
Use the €atmregan€ utility 
in €util€ sub-folder of the €yandy€ folder
to show the contents of that file:

\beginlines
€c:\yandy\util\atmregan€
\endlines

\subsect{Additional Troubleshooting for PostScript Printers}

If your PostScript printer is connected to a parallel port, type the
following test input at a command prompt:

\beginlines
€copy CON LPT1:€ \angi{Enter}
€showpage€ \angi{Ctrl+D} \angi{Ctrl+Z}
\endlines

\noindent If the printer is properly connected, it should eject a blank page.

If the printer is connected to serial port €COM1€ or €COM2€, type

\beginlines
€mode€ \angi{port name}
\endlines

\noindent or

\beginlines
€mode€ \angi{port name} €/status€
\endlines

\noindent to check that the proper €PRINTER BUSY€ handling has been set up. You should see €RETRY=B€ for the specified port. If not, add a €MODE€ line to your €autoexec.bat€ line (e.g. €MODE lpt1:,,B€);

Suspect flow control problems if only the first few pages of a document print correctly from a serially connected PostScript printer. Typical symptoms are overruns (parts of the file mysteriously disappear) or when the printer is receiving data (as reported by its flashing display) but does not print anything or prints garbled output.

You can download {\ehandlerps} (in the €\ps€ subfolder of the main {\yandy} program folder) to help diagnose these and related problems. Send it to the printer {\it before} the offending PostScript file (you may have to reboot the printer first). If the `offending command' it reports is €ioerror€, there may be a mismatch between printer and port settings for communications parameters or handshaking.
To download a file, just use the {\DOS} {\COPY} command. % 96/Aug/26

The error handler remains printer resident and provides a page containing detailed analysis of the state of the PostScript interpreter whenever an error occurs. By default, it produces hard copy, but if the printer is attached to a serial port, the error handler can also be configured to send its information back to the computer, where the {\SERIAL} utility (see section 3.6.4) can show the error information on screen and also send it to a log file.

Hardcopy output from {\ehandlerps} is selected by the line

\beginlines
€showflag true def€
\endlines

\noindent while serial port output is selected by

\beginlines
€printflag true def€
\endlines

\noindent To change the default, read {\ehandlerps} into an editor as a plain {\ASCII} file and search for the two lines setting €showflag€ and €printflag€; change €false€ to €true€ as appropriate and save the file.

The test files provided in the €\dvipsone\debug€ subfolder of the main {\yandy} program folder might also prove useful. The files are a sequence of increasingly complex PostScript jobs. If the first few print without error but the last few do not, you may have a printer with an interpreter that is not completely compatible with Adobe Type~1 fonts.

\subsect{Useful Printer Utilities}

\subsub{Using DOWNLOAD} It is normally better to rely upon {\DVIPSONE}'s advanced font management techniques than to download fonts permanently. If you nevertheless need to do so, use the utility program {\DOWNLOAD}. This program can also be used to reboot the printer and to cause the printer to output a sorted listing of fonts in its €FontDictionary€. For some printers with a hard disk, you can also use {\DOWNLOAD} to download fonts to that disk

{\DOWNLOAD} uses the following command line flags and arguments:

\blist
\item €?€ --- Show short usage summary.

\item €b€ --- Reboot printer (to clear virtual memory). (Some non-Adobe PostScript interpreters do not support clearing of virtual memory without power cycling.)

\item €d€ --- Destination. Output will go to the designated device (€PRN€, €LPT1€, €LPT2€, €LPT3€, €AUX€, €COM1€, €COM2€ or a file).

\item €f€ --- Print sorted font dictionary on printer.

\item €h€ --- Load the specified font file to hard disk. (Since hard disk I/O functions tend to be printer specific, however, it is usually best to use the downloading program supplied with the printer instead.)

\item €i€ --- Read PostScript program from keyboard and send it to printer. (Keyboard input is terminated with a Ctrl+Z.)

\item €k€ --- Use the specified password (default is `0,' the factory default on most PostScript printers.)

\item €p€ --- Load the specified font file `permanently' to virtual memory.

\item €v€ --- Verbose mode.
\endlist

\noindent When output goes to a serial port, {\DOWNLOAD} assumes that the printer is set for hardware flow control. If the destination argument is omitted, the output is sent to a file in the current folder with the same name as the {\PFB} file, but with extension €.pfa€. {\DOWNLOAD} can be used in this way to convert binary {\PFB}-format font files into hexadecimal {\PFA} format, which can be sent to the printer later using the {\DOS} {\PRINT} or {\COPY} commands).

\subsub{Using TWOUP} Because the output produced by {\DVIPSONE} conforms to
Adobe's Document Structuring Conventions for {\PS} % PostScript 
files and is page independent, it is
possible to process such files to select or rearrange pages, print two pages
side by side on the same physical sheet of paper, and so on. Some of these
transformations are enabled by the use of outline fonts, which can be freely
rescaled. 

The {\TWOUP} utility illustrates some of the possibilities. For example, it allows you to print two pages next to each other on the same piece of paper ---  saving trees when you're reviewing drafts. It can also be used to generate pages in signature order --- ready for `saddle-back' stapling or stitching. 

The output of {\TWOUP} also conforms to the Document Structuring Conventions,
and so can be passed through the program a second time to print four logical
pages on one physical page (and so on). (Note that {\TWOUP} can be used to
process any {\PS} file that is page independent and satisfies the Document
Structuring Conventions, not just the output of {\DVIPSONE}.)

To avoid confusion, call the pages in the input file `logical' pages and the
pages in the output file `physical' pages. Further, if the document contains
$m$ pages, let $n=\lceil m/4 \rceil$, that is, $4n - 3 < m \le 4n$. The
command line flags and arguments are: 

\blist
\item €?€ --- Show short usage summary.

\item €a€ --- Invert alternating output pages.

\item €c€ --- Number of copies (the default is 1).

\item €d€ --- Destination. Output gets sent to the designated device (€PRN€, €LPT1€, €LPT2€, €LPT3€, €AUX€, €COM1€, €COM2€ or a file). If this argument is omitted, the output gets sent to a file in the current folder with the same name as the input file, but with extension €.ps2€ (or €.ps4€, and so on).

\item €e€ --- Insert blank logical pages to ensure that even pages are always on the right. (This is useful if the `page numbers' in the PostScript file are off by one from the actual page numbers.)

\item €g€ --- Print the `top' sides of signature-order pages (that is, only the odd numbered physical pages). This is useful for duplex printing (implies €s€).

\item €h€ --- Print the `bottom' sides of signature-order pages (that is, only the even numbered physical pages) (implies €s€).

\item €i€ --- Invert all pages (rotate 180 degrees in the horizontal plane).

\item €J€ --- Flip state of Ctrl+D flag (i.e., whether Ctrl+D is at end of output). Normally Ctrl+D is appended when output to printer, but not to file.

\item €l€ --- Specify logical page size. The default is €letter€. Other supported values are €note€, €legal€, €folio€, €ledger€, €tabloid€, €executive€, €quarto€, €a3€, €a4€, €a5€, €b4€ and €b5€.

\item €m€ --- Magnify the logical pages using the specified relative scale
factor (the default is €1.0€). {\TWOUP} normally uses a scale factor that
assures that the logical page fits into half of the physical page. There will
be a lot of white space on the output page if the logical pages have a
significant margin and the aspect ratio of half of the physical page doesn't
match the aspect ratio of the logical page. In this case it may be helpful to
increase the scale. The precomputed scale factor is multiplied by the scale
factor specified on the command line. 

\item €M€ --- Magnify the logical pages using the specified absolute scale factor (the default is €1.0€).

\item €n€ --- Do not trip out when meeting €%%Trailer€ or €%%EOF€ at top nesting level.

\item €o€ --- Insert blank logical pages to ensure that odd pages are always on the right. (The default is to print pages in the order they appear in the input file, without concern for whether the page numbers are even or odd.)

\item €O€ --- Tell printer to use duplex mode (if it has one).

\item €p€ --- Specify physical page size (default €letter€; see €l€ for other allowed values).

\item €r€ --- Reverse order of printing (for saddle-back stapling). You can use €g€ and €h€ to print on both sides of the paper. After printing the `top' of each page, load the paper into the paper tray upside down (but without rotating it in the horizontal plane) to print the `bottom' of each page. {\it Some\/} printer engines might also require using €r€ with either €g€ or €h€ (but not both) to avoid the need to manually reverse the order of the sheets before printing the second side.

\item €s€ --- Print pages in signature order, for saddle-back stapling. In
this case, the first physical page printed contains logical page $4n$ on the
left and logical page 1 on the right. The next physical page contains logical
page 2 on the left and logical page $4n-1$ on the right, and so on. The last
physical page printed contains logical page $2n$ on the left and logical page
$2n+1$ on the right. The staples holding the resulting booklet together will
be visible when the booklet is open on the last physical page printed. 

\item €T€ --- Tell printer to tumble (in duplex mode) if it can do so.

\item €v€ --- Verbose mode

\item €w€ --- Prolog file to be inserted.

\item €x€ --- Shift the right logical page {\it right}, and the left logical page {\it left}, by the specified amount (in points). Positive values increase the gutter width. If €x€ is repeated in a single command line, the first instance applies to the left page, the second to the right page.

\item €y€ --- Shift both logical pages {\it up} on the physical page by the specified amount (in points).

\item €z€ --- Use the second number in €%%Page:€ comments as the page number rather than the first. Normally {\TWOUP} uses the first number appearing in the €%%Page:€ document structuring comments as `page number.' Output from {\DVIPSONE} uses the first number for {\TeX}'s €counter[0]€. (In some documents the first `number' may be an alphanumeric label instead.) The second number is just the page count within the PostScript file.
\endlist

\subsub{Using PKTOPS} {\DVIPSONE} normally uses only Adobe Type~1 outline
fonts, because inclusion of bitmapped fonts makes the PostScript output
resolution dependent. However, since some fonts are not available in outline
form, {\DVIPSONE} also provides a mechanism for using bitmapped fonts. 

Computer Modern fonts in bitmapped form are usually available in {\PK}
(packed) format, which is not suitable for use on a PostScript printer. The
{\PKTOPS} utility generates an Adobe Type~3 font from a {\PK} font file;
{\DVIPSONE} can use the resulting Type~3 bitmap font file. It should be
placed somewhere on the font search path. ({\DVIPSONE} can use Type~3 font
files properly {\it only\/} if they are in the special form produced by
{\PKTOPS}. Other fonts get included in the output without modification ---
and without guarantees!)

A Type~3 font file produced by {\PKTOPS} can also be downloaded to the
printer before the PostScript job calling for that font goes to the printer.
In that case, the fact that this font is to be treated as printer resident
should be noted in the font substitution file.

Ideally, the resolution (dpi) of the {\PK} font should match that of the
printer. If you cannot obtain an exact match, try to find a {\PK} file made
at a resolution that is some integer multiple of the printer's resolution.
And if that is not possible, use the {\it highest\/} resolution available.
(If the resolution of the bitmap font does not match that of the printer,
the output tends to look somewhat heavier and a bit jagged, although it {\it
will\/} print at the correct size.) 

{\PKTOPS} can process multiple {\PK} files in one invocation --- all files listed on the command line get processed under control of the specified flags and arguments:

\blist
\item €?€ --- Show short usage summary.

\item €c€ --- Insert comments in output file.

\item €d€ --- Destination. Output goes to the designated device (€PRN€, €LPT1€, €LPT2€, €LPT3€, €AUX€, €COM1€, €COM2€). If the destination is omitted, output goes to a file in the current folder with the same name as the {\PK} file, but with extension €.ps€.

\item €l€ --- Do not force upper case font name.

\item €v€ --- Verbose mode.
\endlist

\noindent Normally bitmaps for all characters get converted. In some situations you may want to limit the size of the output file by including only those characters actually needed:

\blist
\item €a€ --- Include characters in €"€\angi{string}€"€

\item €r€ --- Include bitmaps for characters in the range \angi{start}--\angi{end}.

\item €x€ --- Include bitmaps for the characters specified by the given hexadecimal string (the default is all characters). The bits of the first character in the string indicate whether the characters from 0 to 3 should be included, and so on.
\endlist

\noindent Arguments €a€ and €r€ may be repeated.

To download an Adobe Type~3 font file produced by {\PKTOPS}, either select the appropriate destination using the command line flag €d€, or send the resulting file to the printer as any ordinary PostScript file, using the {\DOS} {\PRINT} or {\COPY} commands.

The resulting font file is set up for `permanent' downloading to the printer. It is possible to modify the font file to provide for temporary downloading by commenting out a specially marked line of PostScript code at the beginning of the file.

\subsub{Using SERIAL} Some very old PostScript printers do not provide
hardware flow control. With them, you must use a downloader for all but very
short files, since {\DOS} does not directly support software flow control.
In fact, the {\DOS} {\PRINT} or {\COPY} commands cannot be used, and output
from {\DVIPSONE}, {\DOWNLOAD}, {\PKTOPS} and {\TWOUP} cannot be sent
directly to such a printer. 

In such situations turn to {\SERIAL}, which uses software flow control. ({\SERIAL} actually supports both hardware ({\DTRDSR}) and software ({\XONXOFF}) flow control --- but is not needed if hardware flow control is available, since output can then be sent directly to the printer from {\DVIPSONE} and the utility programs, or by using the {\DOS} {\PRINT} and {\COPY} commands.)

The optional command line flags and arguments are:

\blist
\item €?€ --- Show short usage summary.

\item €d€ --- Send the output to the specified destination (the default is €AUX€, also known as €COM1€).

\item €e€ --- Do not send end-of-job (Ctrl+D) to the printer.

\item €l€ --- Do not write a log file (€printer.log€).

\item €p€ --- Do not get port addresses from machine (use standard addresses).

\item €q€ --- Assume specified interrupt request number rather than default for port.

\item €t€ --- Time to wait for end-of-job (default 60 sec). Zero means wait indefinitely.

\item €v€ --- Verbose mode.

\item €w€ --- Do not wait for end-of-job (Ctrl+D) from printer.
\endlist

\noindent Not waiting for the end-of-job indicator from the printer allows you to continue using the computer as soon as the file has been sent to the printer, but means that any error messages sent back (by €ehandler.ps€, for example~) will be lost.

Note that in order to use software flow control it is necessary to access the serial port directly, that is, to bypass both {\DOS} and {\BIOS}. This means that {\SERIAL} may not work on some PC clones that do not use the standard hardware interface for the serial port. (The €q€ argument may help in this regard.)

This utility can also not be used on systems that prevent programs from
accessing hardware directly --- such as Windows~NT. % 96/Aug/26

\subsub{Using CHANGED} The {\CHANGED} utility allows you to (a) extract the pages of output that have changed with respect to a previous output run, and (b) extract specified page ranges and reorder pages in a PostScript file. It's designed for use on output produced by {\DVIPSONE}, but can also be used on PostScript files produced by other programs, provided those files are {\DSC} (Document Structuring Convention) compliant and page independent (i.e., there are no font definitions in the middle of a file).

To print only pages that have changed, {\CHANGED} compares two output files and copies the pages that show differences to a third output file, €changed.ps€, which it deposits in the current folder. The command line for this function is:

\beginlines
€changed [-v] €\angi{old-PS-File} \angi{new-PS-File}
\endlines

\noindent The two PostScript files are not treated symmetrically. The header in the output file is copied from the new file; the header in the old file is ignored. Pages that appear in the new file but not in the old one are copied to the output. Pages that appear in the old file but not in the new file are ignored.

An example of the syntax used to extract and/or reorder pages is:

\beginlines
€changed -v -P=3-7,43-39,5,63 myfile.ps€
\endlines

\noindent A 1-page range is indicated by a single number (e.g., 5 in this example). `Inverted' page ranges (e.g., 43-39) yield pages in reverse order, and a particular page may appear more than once (e.g., page 5 again).

The numbers denote physical (sequential) pages within the file (the second
number in the PostScript €%%Page: € comment). 
Use €p€ instead of €P€ to instead deal with logical page numbers (the first
number in €%%Page: €). 
As usual, there are potential problems if logical page numbers are repeated
in the source file. In this case {\CHANGED} picks the first page with a given
page number. 

Pages are output in the order specified in the page range list. Use the command line argument €f€ to instead output pages in the order that they appear in the source file. You can use other delimiters, such as a plus sign or a semicolon, instead of comma. (This is convenient when invoking {\CHANGED} using a batch file, since commas break up the list into separate batch file arguments.)

\section{{\TeX} Issues}

\subsect{Working With Different Keyboards}

Using {\TeX}'s normal €\accent€ mechanism for accented characters
(i.e. is writing €\"A€ for {\"A} and €\c C€ for {\c C})
can become
tedious when you are working in a language that uses a lot of accented
characters. In that case, it is usually easier to just enter the accented
characters directly from the keyboard. (Conversely, if you use {\TeX} only
for English text, you can just skip this section!) 

There are several strategies for achieving direct entry of accented
characters; which is best depends on (i) what type of editor you use, (ii)
how your keyboard is encoded, (iii) how your fonts are set up, and (iv)
whether or not those fonts contain ready-made accented characters
(Please also refer to €keyboard.txt€ in €doc-misc€).

When you press a key on the keyboard, a character code number gets entered into your {\TeX} source file. What code number you get depends on the encoding used by the software (i.e., operating system plus editor) when it reads the signals from the keyboard. If you are using a Windows editor, you typically have the keyboard mapped to produce character codes corresponding to Windows {\ANSI} encoding (see file €ansinew.vec€, in the €\fonts\encoding€ subfolder of the main {\yandy} program folder). And if you are using a {\DOS} editor, you typically get character codes corresponding to a particular {\DOS} `code page.' In English-speaking countries this is usually code page 437 (see file €dos437.vec€), while in many countries where writing can be represented using the Latin 1 character set it is instead code page 850 (see file €dos850.vec€). (You can control which code page is loaded from the command prompt via the Mode command.)

The keyboard mapping may or may not be the same as the mapping used on the
output side for your fonts. Text fonts installed `out of the box' using
{\ATM}, for example, are typically set up for Windows {\ANSI}. 
%
% Used straight from {\DOS}, such fonts may instead be set up for Adobe
% StandardEncoding (see file €standard.vec€).
%
The {\yandy} TeX System provides several ways of dealing with differences between keyboard encoding and font encoding:

{\bf Keyboard mapping matches font encoding.} This is the easiest of all, since (virtually) nothing needs to be done --- no remapping of character codes is required. This is what happens if you use a Windows editor to create your source files, and if you also do not reencode the fonts (i.e., you are using Windows {\ANSI}). However, you may need €\input ansiacce€ in your source file to compensate for plain {\TeX} and {\LaTeX}'s hardwired assumptions about accents and special characters.

This method cannot be used with Computer Modern ({\CM}) fonts, however, because they use their own unique encoding (TeX Text) and do not contain the `standard' accented characters --- at least not normally in encoded positions (the {\CM} fonts from {\yandy} {\it do\/} have these extra characters, as noted below).

{\bf Keyboard mapping different, accented characters available.} If the keyboard mapping is different from the font encoding, but the font does contain pre-built accented characters, you can use {\TeX}'s €xchr[]€ character code permuting table, which provides the mapping from {\TeX}'s internal character codes to those used in the source document. The {\it inverse\/} of this table (€xord[]€) translates input. Such a table is a plain {\ASCII} file, and can be specified on the {\yandy} TeX command line (using the €-x€ argument).

A typical example is a case where a {\DOS} editor is used to create the
source files but the fonts are set up for Windows {\ANSI}. In this case, the
internal representation should match Windows {\ANSI}, and the €xchr[]€ table
should describe the mapping {\it from\/} Windows {\ANSI} {\it to\/} the
{\DOS} code page in use. {\TeX} then performs the inverse mapping on input.

Sample files are provided in the €\yandytex\keyboard€ subfolder of the main {\yandy} program folder: €dos437wn.map€ is appropriate when the editor uses {\DOS} code page 437 (English), and €dos850wn.map€ is appropriate when {\DOS} code page 850 (Latin 1) is in use. You can use the {\yandy} utility €translat.exe€ (in the €\util€ subfolder) to create additional tables. For example, the two €*.map€ files just described were made using

\beginlines
€translat ansinew dos437€
\endlines

\noindent and

\beginlines
€translat ansinew dos850€
\endlines

\noindent respectively, with redirection of the on-screen output to a file in
each case (using €>€ 
on the command line). Some editing may be required to fine-tune tables
created in this fashion. Note the apparent inverse order of the arguments.
This is because the €xchr[]€ array translates {\it from\/} {\TeX}'s internal
representation {\it to\/} the keyboard mapping.

The Computer Modern text fonts from {\yandy} do include the 58 `standard'
accented/composite characters found in most Type~1 fonts. But they are not in
the TeX Text encoding. So one option here is to reencode these fonts to make
the accented characters accessible (see Appendix, section 6.9). If you use
this approach, you will be incompatible with other users of {\CM} fonts, but
can then simply use the method described here.  You will also lose access to
the upright upper-case Greek letters which are hidden in the {\CM} roman text
font! % 96/Aug/26
%
So we recommend the `European Modern' (EM) fonts instead.

{\bf Keyboard mapping different, accented characters not available.} A different strategy is required when merely permuting the numbers 0--255 does not do the job --- as is the case when the fonts you're using lack ready-made accented and composite characters. For dealing with accented characters that appear in the input but that do not occur in the fonts, {\yandy} TeX provides a `keyboard replacement' table mechanism (the €-k€ command line argument). This allows you to automatically expand accented character codes in the input file into {\TeX} commands for constructed accented characters: character code 132 may become €\"a€ and 128 may be replaced with €\c C€, for example.

Sample files for this purpose are in the €\yandytex\keyboard€ subfolder: As with the €*.map€ character mapping tables, €dos437.key€ would be used with {\DOS} code page 437; €dos850.key€ with {\DOS} code page 850, etc.

Each line in a keyboard replacement file contains the character code number
and the replacement string, separated by white space. Use €"..."€ to quote
the replacement text if it contains white space (useful for €\c C€ and €\c
c€, for example). Normally a replacement string would consist of plain
{\ASCII} characters (codes 32--126), but it can also invoke
accented characters or arbitrary {\TeX} control sequences.
% although it may also use accent
% characters directly in order to trigger pseudo ligatures in the {\TFM}
% files (e.g., replacing `dieresis' followed by `a' with `adieresis').

{\bf Keyboard mapping different, accented characters not available
(alternative).} 
Another way to deal with this case is to have {\TeX} itself do the remapping,
by making the characters `active.' Simply €\input meta_437€ (for code page
437) or €\input meta_850€ (for code page 850). This capability is similar to
that provided by the Textures €option_key€ {\TeX} source file and by the
{\LaTeXe} package €inputenc€. 
%
See also €keyboard.txt€ in the €yandy\doc-misc€ folder.

Note that proper hyphenation of text containing accented characters is not
possible if the fonts do not contain ready-made accented characters. 
% 96/Aug/26 
This is a problem with Computer Modern (CM) fonts.

One solution is to use the European Modern (EM) fonts instead.

\subsect{Some Details of {\yandyBold} TeX Usage}

Like {\DVIPSONE} and {\yandy}'s various utility programs, {\yandy} TeX accepts both arguments and flags on the command line. Flags have the form €-€\angi{value}, and arguments look like €-€\angi{arg}€=€\angi{value}. In an argument, you can use a space instead of €=€ on the command line (which proves convenient when setting up batch files).
%
A complete list of {\yandy} TeX's command line flags and arguments appears 
in the Appendix. 

You can set up command line arguments and flags to be used when 
€yandytex.exe€ is called from {\DVIWindo} using 
`Preferences{\down}Command Line{\down}Y\&Y TeX' from {\DVIWindo}.
This preference is maintained in the
€TeX=...€ entry in the [Window] section of {\dviwindoini}. 
Items specified in this manner override any corresponding items in the
command line file (see next).

If you frequently use command line items, you can (i) put them in
the batch file {\texbat} (in the €\yandytex€ subfolder of the main {\yandy}
program folder) so that they are in effect when that batch file is invoked,
(ii) put them in {\DVIWindo}'s `TeX' menu replacement text so they are in
effect when you call {\yandy} TeX from the `TeX' menu, or (iii) add a
€TeX=...€ item to the [Window] section of {\dviwindoini} (which also takes
effect when calling {\yandy} TeX from the `TeX' menu).

Another alternative is to set up a command file, {\yandytexcmd}, containing
the required flags and arguments. Anything not preceded by a €-€ (or €/€)
gets ignored. A typical file might look like

\beginlines
€c:\yandy\yandytex\yandytex.exe -v -L -H=8€
\endlines

\noindent Multiple lines are permitted. {\yandy} TeX searches for this file
first in the current folder, then in the €\yandytex€ subfolder. There is no
warning message if such a file is not found  
(since it is not an error to have no such file). % 96/Aug/26
Command line flags and arguments in this file take effect {\it before\/} those supplied on the command line, so the command line takes precedence in the event of a conflict.

As described in the main manual, typing Ctrl+Z when {\yandy} TeX is waiting
for a file name input performs an `Emergency Exit' from the program.
% Likewise, 
Typing €nul€ as the file name causes the program to read an empty
file --- which in some cases may be appropriate, or at least
keep {\TeX} going a little longer emitting hopefully
helpful error messages.

To interrupt program operation % in other states, 
type Ctrl+C. If input characters are buffered up,
you may see no immediate response, in which case try Ctrl+Break. {\yandy} TeX
is not always in a state in which it is responsive to such interruptions ---
in that case, try Ctrl+C several times in succession to abort the current
operation (and possibly also leave the output in a messy state).

\subsect{Handling Graphics in the {\yandyBold} TeX System}

\subsub{Some Notes on TPIC $\backslash$specials} {\TPIC} €\special€s are used by various {\TeX} macro packages (such as {\eepicsty}) to draw simple shapes in a device independent way. Several {\DVI} processors, including {\DVIWindo} and {\DVIPSONE}, support these €\special€s --- a complete list of which appears in the Appendix, section 6.8.
One advantage of {\TPIC} over {\LaTeX}'s picture environment is that there
are no constraints on direction and length of arrows. % 96/Aug/26

One use of the €\special€s depends on accumulating a polygonal path, then `stroking' this path (using solid, dashed or dotted lines, or even quadratic splines) and/or `filling' the shape obtained by closing the path. You can also draw circles, circular disks, ellipses aligned with the coordinate axes and elliptical arcs.

Consult the file €tpictest.tex€, in the €\texinput€ subfolder of the main
{\yandy} program folder, for some examples of the commands' use.  
% And 
When using the €\special€s, keep the following points in mind:

\blist
\item The origin of the coordinate system is at {\TeX}'s current point --- $x$ increasing to the right and $y$ increasing downward.

\item {\TeX}'s current point is {\it not\/} disturbed by {\TPIC} €\special€s (so this is {\it not\/} a way to displace text typeset in {\TeX}).

\item Lengths, widths and coordinates are in milli-inches (0.001 in.) Only integers are permitted. An exception is the specification of dash length and dot interval (in inches).

\item Angles are in radians, clockwise from the horizontal. (Angles are allowed to be reals, of course.)

\item Gray levels lie between 0.0 and 1.0, with 0 being white and 1 black. (Note that this is reversed from common usage.)

\item `Stroke' means draw a solid, dashed or dotted line, or a spline, with a pen of specified width. Strokes are always black.

\item `Fill' means fill a closed shape with a specified gray level. If no gray level is explicitly specified, black is assumed. The shape gets implicitly closed if it is not closed already.

\item Stroking and/or filling a polygonal path resets it. The next path-accumulating command starts a new path.

\item Explicitly setting the gray level implies that the next shape is to be filled. The request to fill a shape is reset after the shape is filled; to fill the next shape, a gray level must be specified again.

\item Some implementations have limits on how many lines a polygonal path may contain (600 typically).
\endlist

\subsub{Insertion of EPS figures} As noted elsewhere, the {\yandy} TeX System
accommodates insertion of {\EPS} images and/or figures via the most commonly
used €\special€s defined for this purpose. (There is {\it no\/} notational
standardization for {\EPS} file insertion across the various dialects of
{\TeX}.) Following is a discussion of those €\special€s. 

{\bf Important note:} these €\special€s are the low-level mechanism; 
use the {\LaTeXe} €graphics€ or €graphicx€ packages instead, if possible. 
In plain {\TeX} use €epsf.tex€, and in {\LaTeX}~2.09 use €psfig.sty€.
Actually, we have modified these to deal correctly with {\EPS} files
with previews.  
The modified files are called €epsfsafe.tex€ and €psfigfx.sty€.

The following discussion is pretty much only for situations
where you are dealing with `legacy' {\TeX} source material.

{\bf Method 1} --- Scheme supported by Tomas Rokicki's {\DVIPS}, used by one
dialect of Trevor Darrell's {\PSFIG} macro package:

\beginlines
€\special{ps::[begin]€ \angi{w} \angi{h} \angi{xll} \angi{yll} \angi{xur} \angi{yur} €startTexFig}€
€\special{ps: plotfile€ \angi{eps-file}€}€
€\special{ps::[end] endTexFig}€
\endlines

\noindent  The six arguments are the desired width and height of the inserted figure on the page, and the lower left and upper right corner of its bounding box, respectively. All of these quantities are in {\DVI} units (that is, `scaled' points, 65,536 per pica point, of which there are 72.27 per inch). Note that letter case is significant in the words €startTexFig€ and €endTexFig€.

The figure is scaled so as to map the bounding box into a rectangle of the specified width and height. The {\it upper left-hand\/} corner of this rectangle is placed at {\TeX}'s current point.

Note that scaling may be different in the horizontal and vertical directions, which may lead to unexpected results. Isotropic scaling can be forced by making the aspect ratio of the rectangle defined by the requested width and height match the aspect ratio of the rectangle defined by the bounding box (This is usually taken care of by the macro package being used).

Clipping to the rectangle defined by the bounding box may be called for by inserting the line:

\beginlines
€\special{ps:: doclip}€
\endlines

\noindent after the €startTexFig€ line. There can be several €ps: plotfile€ lines between the €startTexFig€ and €endTexFig€ lines, making it possible to insert prolog and postlog files for a particular figure.

{\bf Method 2} --- A variant on the previous theme for Stephan v. Bechtolsheim's {\DVITWOPS}, generated by another dialect of Trevor Darrell's {\PSFIG} macro package:

\beginlines
€\special{ps: psfiginit}€
€\special{ps: literal€ \angi{w} \angi{h} \angi{xll} \angi{yll} \angi{xur} \angi{yur} €startTexFig}€
€\special{ps: include€ \angi{eps-file}€}€
€\special{ps: literal "endTexFig "}€
\endlines

\noindent Clipping may be called for by inserting the line

\beginlines
€\special{ps: literal "doclip "}€
\endlines

\noindent after the €startTexFig€ line. Also, there can be several €ps: include€ lines calling for PostScript files, as in the previous scheme.

{\bf Method 3} --- The scheme of Anthony Li's {\DVITWOPS}, used by yet another dialect of Trevor Darrell's {\PSFIG} macro package:

\beginlines
€\special{pstext="€\angi{w} \angi{h} \angi{xll} \angi{yll} \angi{xur} \angi{yur} €startTexFig"}€
€\special{psfile=€\angi{eps-file}€}€
€\special{pstext=endTexFig}€
\endlines

\noindent Clipping to the specified bounding box may be requested 
by inserting the line:

\beginlines
€\special{pstext="doclip"}€
\endlines

\noindent after the €startTexFig€ line. As in the previous schemes, there may be several €psfile=€\angi{file-name} lines between €startTexFig€ and €endTexFig€.

If several figures share the same prolog file, then it may make sense
to read such a common prolog file once at the beginning. A user prolog file accessible to all included {\EPS} files may be inserted using:

\beginlines
€\special{header=€\angi{user-prolog-file}€}€
\endlines

{\bf Method 4} --- Another scheme supported by {\DVIPS}, generated by Tomas Rokicki's {\EPSF} macro package:

\beginlines
€\special{PSfile=€\angi{eps-file} €llx=€\angi{xll} €lly=€\angi{yll}
€                urx=€\angi{xur} €ury=€\angi{yur} €rwi=€\angi{rwidth*10}€}€
\endlines

\noindent indicating that the file \angi{eps-file} is to be inserted with the 
{\it lower-left\/} corner of the bounding box of the inserted figure at {\TeX}'s current point (note that here the first two letters in the word €PSfile€ are upper case).

Four of the arguments specify the bounding box of the figure. The last argument specifies the requested width of the figure (scaled by 10). The coordinate system in which the parameters are specified is the default PostScript coordinate system, with 72 units per inch (that is, {\TeX}'s `big points') with the origin at the lower left-hand corner of the page. The figure is scaled isotropically.

{\bf Method 5} --- The scheme of an older version of {\DVITWOPS}, due to Mark Senn {\it et al\/}, used by Gerald Roylance's macro package {\PSADOBE} and {\PSFIG}:

\beginlines
€\special{psfile=€\angi{eps-file}€}€
\endlines

\noindent indicating that the file \angi{eps-file} is to be inserted with the {\it origin\/} of the coordinate system of the inserted figure at {\TeX}'s current point. Additional arguments may be used to specify 
scaling and offsets, as well as clipping:

\beginlines
€\special{psfile=€\angi{eps-file} €hscale=€\angi{x-scale} €vscale=€\angi{y-scale}
€        hoffset=€\angi{x-offset} €voffset=€\angi{y-offset} €hsize=€\angi{x-size}
€        vsize=€\angi{y-size}€}€
\endlines

\noindent All key-value pairs after the first are optional. Scales may be given as floating point quantities (and are {\it not\/} percentages). Offsets and clipping sizes are specified in `big points,' 72 to the inch. Different scaling in the horizontal and vertical directions may be specified. Note that in this scheme, the clipping rectangle, specified by €hsize€ and €vsize€, is constrained to have its lower left-hand corner at the origin.

{\bf Method 6} --- The scheme for figure inclusion used by James Clark's {\DVITOPS}:

\beginlines
€\special{dvitops: import€ \angi{eps-file} \angi{width} \angi{height}€}€
\endlines

\noindent where \angi{width} and  \angi{height} are the desired width and height of the included illustration, specified in any of the units recognized by {\TeX}.

The illustration is scaled so that it will fit into the specified space. Scaling is the same in the horizontal and vertical directions --- the illustration is centered in the direction in which there is extra space. The {\it lower left-hand\/} corner of the bounding box is placed at {\TeX}'s current point. 

It is also possible to insert a prolog file using

\beginlines
€\special{dvitops: prolog€ \angi{user-prolog-file}€}€
\endlines

\noindent The user's prolog file appears after {\DVIPSONE}'s own preamble, 
but before anything else, independent of where the corresponding €\special€ occurred in the {\TeX} source file.

To switch the output to landscape mode for one page, start the page with:

\beginlines
€\special{dvitops: landscape}€
\endlines

\noindent In landscape mode, {\TeX}'s origin, normally 1 inch below and 1 inch to the right of the top left-hand corner of the page, is instead 1 inch {\it above\/} and 1 inch to the right of the {\it bottom\/} left-hand corner of the page.

{\bf Method 7} --- A scheme for figure inclusion supported by ArborText's 
{\DVILASER}{\trademark}:

\beginlines
€\special{ps: epsfile€ \angi{eps-file} \angi{scale-number}€}€
\endlines

\noindent indicating that the file \angi{eps-file} is to be inserted with the {\it lower left-hand\/} corner of the figure's bounding box placed at {\TeX}'s current point, scaled by \angi{scale-number}/1000. Scaling is optional; \angi{scale-number} should be an integer.

{\bf Method 8} --- The scheme used by Blue Sky Research's TeXtures{\trademark}:

\beginlines
€\special{illustration€ \angi{eps-file} €scaled€ \angi{scale-number}€}€
\endlines

\noindent indicating that the file \angi{eps-file} is to be inserted with the {\it lower left-hand\/} corner of the figure's bounding box placed at {\TeX}'s current point, scaled by \angi{scale-number}/1000. Scaling is optional; \angi{scale-number} should be an integer.

It is also possible to include PostScript program fragments in a file, using

\beginlines
€\special{postscriptfile€ \angi{postscript-file}€}€
\endlines

\noindent The difference between €illustration€ and €postscriptfile€ is that the former treats the file as an encapsulated PostScript file that is to be positioned in accordance with the bounding box specified in the file, while the latter treats the file as raw PostScript code to be inserted without any additional positioning.

{\bf Method 9} --- The scheme proposed by Nelson Beebe for his driver {\DVIALW},
where comma-separated key-value pairs appear, starting with the pair €language "PS"€ (use a space between a key and the corresponding value, not `€=€').

For example,

\beginlines
€\special{language "PS", include "€\angi{eps-file}€"}€
\endlines

\noindent causes inclusion of the illustration in the file \angi{eps-file}. The included figure is positioned with the {\it upper left-hand\/} corner of the figure's bounding box placed at {\TeX}'s current point. If the figure is instead to be treated as an overlay (that is, using the default PostScript coordinate system) then use 

\beginlines
€\special{language "PS", overlay "€\angi{eps-file}€"}€
\endlines

{\bf Method 10} --- The command syntax for figure inclusion used by Andrew Trevorrow in Oz{\TeX} for the Macintosh, and in Psprint for Vax VMS.

\beginlines
€\special{psfile=€\angi{eps-file}€}€
\endlines

{\bf Method 11} --- The command syntax used by PC TeX. 

\beginlines
€\special{eps: €\angi{eps-file} €x=€\angi{width} €y=€\angi{height}€}€
\endlines

{\bf Method 12} --- The command syntax used by Scientific Word. This syntax requires using {\DVIPSONE}'s €-*S€ command line flag to prevent conflicts with other uses of €\special{ps: ...}€

\beginlines
€\special{ps: €\angi{eps-file}€}€
\endlines

{\DVIPSONE} also accommodates the command syntax of an older version of Andrew Trevorrow's OzTeX:

\beginlines
€\special{€\angi{eps-file}€}€
\endlines

\noindent This syntax only works if the command line flag €-j€ is used, because this form of €\special€ does not include any special keyword or separator that could be used to distinguish it from other usage of €\special€, or from meaningless text. Instead the €\special€ starts right off with the name of the file to be included. Activation of this command syntax is therefore somewhat risky.

\subsub{Adding a preview to an EPS file without one} Most Windows graphics
applications add a {\TIFF} or {\WMF} preview to {\EPS} files. Some Unix
graphics applications add an {\EPSI}-format preview to {\EPS} files.
{\DVIWindo} shows all three preview types. 

If you have an {\EPS} file without preview, you can add one using a commercial product such as Transverter Pro, available from TechPool Software, 1463 Warrensville Center Road, Cleveland, OH 44121-2676 USA. Phone (216) 291-1922 (voice) or (216) 382-1915 (fax).

Alternatively, you can use GhostScript %  2.6.1 
and GhostView % 0.7 
for Windows --- which are public domain, but harder to install and use. In
GhostView select `Edit' from the menu, then select `Add EPS Preview.' This
adds a preview in {\TIFF} format.

%% revise GhostView versions?  Or omit version numbers?

% For the PC/Windows version of GhostScript 2.6.1, you need the files
% €gs261win.zip€, €gs261ini.zip€ and €gs261386.zip€. You may {\it not\/} want
% to get the €.gsf€ fonts that go with them (in files €gs22fnta.zip€,
% €gs22fntb.zip€, \dots €gs22fnte.zip€); use real Type~1 fonts instead.
% Rename  €fontmap.atm€ to €fontmap€. The rendering of Type~1 fonts will not
% be as good as with {\ATM}, of course.

% For the GhostView 0.7 beta, you need the file €gsview07.zip€. One site is
% where it is available is €ftp.cs.wisc.edu€, in directory €pub/ghost€.
% Another is €ftp.cica.indiana.edu€, in €pub/pc/win3/util€.

If you have trouble finding GhostScript and GhostView, 
then try €http://www.ghostscript.com€ or
€http://www.cs.wisc.edu/~ghost€,
or % try a search
try searching from Yahoo on WWW (i.e. €http://www.Yahoo.com€).
% Potential sites are €oak.oakland.edu€, €ftp.cs.wisc.edu€,
% €ftp.cica.indi-ana.edu€ (and its mirrors), and €prep.ai.mit.edu€. 
% Alladin Site?

Avoid versions that need to be compiled or are written for other platforms.
Also avoid versions stored in compression schemes other than zip ---
including tar format, which must first be undone on Unix.

\subsub{Previewing inserted graphic files} Even if your {\EPSF} files all
have {\TIFF} previews, {\TeX} might still have problems with them. The
reason: {\TeX} figure-insertion macros, such as Trevor Darrell's {\psfigtex}
(available by anonymous FTP from €whitechapel.media.mit.edu€) or Tom
Rokicki's {\epsftex}, do not like to read files with binary headers. 

% The following modification to the file-reading code in {\epsftex} attempts
% to surmount this problem. The only changes needed are the two lines
% following the comment lines starting with `\%-\%.' There are many dialects
% of {\psfigtex}, each tuned to a different {\DVI}-to-PostScript converter,
% but most share the same code for reading the bounding box.

A simple modification of these figure insertion macros gets around this
problem. 
Note that the graphics package in {\LaTeXe} already does the right thing.
The fix has also been incorporated in €epsfsafe.tex€ and €psfigfx.sty€ in 
the €texinputs€ folder.

% The modification might not work in all situations, since the file-reading
% part of {\TeX} is somewhat implementation and version dependent. 
% However, the modification does work on several implementations we have
% tried, so it has a good chance of working for you.

One shortcoming of this modification, for which there is no easy workaround,
is that a binary file just may contain a very long stretch of bytes without a
`return' or `linefeed' character.  As a result in extreme cases an overflow
of the input buffer may occur, with an appropriately worded message (`Unable
to read entire line').  No clever tricks with €\catcode€s can get around
this; however, the input buffer in {\yandy} TeX is very long and so should not
present a problem with most files, particularly if the PostScript section
precedes the {\TIFF} preview
(In addition, {\yandy} TeX has a special
trick to prevent it from bombing out when it meets such problem files).
% For such files one only has to survive 30 bytes of binary header information.  

% Removed 98/Jun/5

% \beginlines
% €% file reading stuff from epsf.tex€
% €% EPSF.TEX macro file:€
% €% Written by Tomas Rokicki of Radical Eye Software, 29 Mar 1989.€
% €% Revised by Don Knuth, 3 Jan 1990.€
% €% Revised by Tomas Rokicki to accept bounding boxes with no€
% €% space after the colon, 18 Jul 1990.€
% €% Portions modified/removed for use in PSFIG package by€
% €% J. Daniel Smith, 9 October 1990.€
% €...€
% % €\newread\ps@stream€
% % €\newif\ifnot@eof % continue looking for the bounding box?€
% % €\newif\if@noisy % report what you're making?€
% % €\newif\if@atend % %%BoundingBox: has (at end) specification€
% % €\newif\if@psfile % does this look like a PostScript file?€
% % €%€
% % €% PostScript files should start with `%!' (not if they are EPSF...)€
% % €%€
% % €{\catcode`\%=12\global\gdef\epsf@start{%!}}€
% % €\def\epsf@PS{PS}€
% % €%€
% % €\def\epsf@getbb#1{%€
% % €%€
% % €% The first thing we need to do is to open the€
% % €% PostScript file, if possible.€
% €%€
% €\openin\ps@stream=#1€
% €\ifeof\ps@stream\ps@typeout{Error, File #1 not found}\else€
% €%€
% €% Okay, we got it. Now scan lines until we find one that doesn't€
% €% start with % (misleading). Looking for the bounding box comment. €
% €%€
% €% The following has been modified to try and ignore binary stuff€
% €% that occurs at the beginning of an EPSF file with TIFF preview€
% €% It also no longer complains if the file does not start with %!€
% €%€
% €{\not@eoftrue \chardef\other=12€
% €\def\do##1{\catcode`##1=\other}\dospecials \catcode`\ =10€
% €%-% Neuter some more nasty characters€
% €\catcode`\^^L=9 \catcode`\^^?=9€
% €%-% Comment out next line if you want the `Not PS file' error message€
% €\@psfiletrue€
% €\loop€
% €\if@psfile €
% €...€
% \endlines

% \noindent Note that the graphics package in {\LaTeXe} does {\it not\/}
% require this fix.  Also note that the above fix has already been
% incorporated in €epsfsafe.tex€ and €psfigfx.sty€ in the €texinputs€
% folder.

\subsub{Verbatim PostScript in DVI files} In certain rare cases you may be tempted to use verbatim PostScript code in your {\TeX} source files. The best advice we can give is: {\it don't\/}! If an effect can be achieved

\blist
\item directly in {\TeX} (using rules, or the {\LaTeX} line and circle fonts),

\item by insertion of an {\EPS} figure,

\item by insertion of a {\TIFF} image,

\item by use of emlines €\special€s (see sample file €emlines.tex€), or

\item by use of device-independent {\TPIC} €\special€s
(see €tpictest.tex€),

\endlist

\noindent then it is better {\it not\/} to use verbatim PostScript. For one
thing, a solution using {\TeX} alone is more portable. For another, you
cannot easily preview a file using inserted verbatim PostScript on a platform
that does not support Display PostScript --- and you cannot easily print such
a file on a non-PostScript printer. Furthermore, debugging inserted verbatim
PostScript can be very difficult. Most important, though, raw PostScript is
totally dependent on the environment used by a particular DVI-to-PostScript
driver. 

Some parts of the {\LaTeXe} package use verbatim PostScript to do their
magic.  Most of these work with {\DVIPSONE}, {\it provided\/} you select
€dvipsone€ as an option to the package.  Or, equivalently, have a file called
€graphics.cfg€ in the graphics package folder with the line
€\ExecuteOption{dvipsone}€.  

All that having being said, though, using verbatim PostScript in €\special€s
for output through {\DVIPSONE} can produce some interesting effects --- such
as rotated text. Some experimentation may be required to achieve exactly the
effect you desire without disturbing {\TeX}'s positioning of text on the
page, or the current font selection.

There are several ways to use verbatim PostScript with {\DVIPSONE} (see
below). All have the potential of corrupting the PostScript output file.
Note, however, that some of the less protected methods for including verbatim
PostScript are enabled {\it only\/} if you use {\DVIPSONE}'s €-j€ command
line flag. Download {\ehandlerps} to the printer ahead of time to obtain
potentially useful debugging information.

In some of the schemes for including verbatim PostScript, the coordinates are
specified via the default PostScript coordinate system. In this standard
coordinate system, the origin is at the lower left corner, with $x$
increasing to the right and $y$ increasing upward, at 72 units per inch. In
some cases the inserted code is bracketed by €save/restore€ or
€gsave/grestore€ pairs.

In addition, €PageHeight€ and €PageWidth€ are defined in PostScript points
(72 per inch). These quantities are accessible to verbatim PostScript and are
handy when one wants to flip the page horizontally or vertically, or to
rotate it. Also defined and accessible are the physical and logical page
numbers, €PhysicalPage€ and €LogicalPage€. 
Finally, the dictionary called €dvidict€ --- which is used by code in the
preamble and by code generated by {\DVIPSONE} --- is on top of the dictionary
stack.

Before we delve into the nitty gritty of raw Post\-Script inclusions,
just a reminder that it is in general safer to look for alternatives
using existing graphics packages, inserted {\EPS} graphics,
or standardized €\special€'s like €emlines€ or {\TPIC}.

\subsub{Syntax for PostScript insertion $\backslash$specials} {\DVIPSONE}
accommodates a large number of schemes for including verbatim PostScript, in
order to provide partial support for methods used by other {\DVI} processors.
(We wish there were {\it some\/} standardization!) Here is the complete list: 

\blist
\item €\special{verbatim="€\angi{PS code}€"}€ --- 
(standard {\PS} coordinate system; no €gsave/grestore€)

\item €\special{ps: €\angi{PS code}€}€ --- (naked {\PS} style,
% (standard {\PS} coordinate system;  98/Jun/5
no €gsave/grestore€)

\item €\special{postscript €\angi{PS code}€}€ --- Textures style 
(PS coordinates, but origin at current point; does €gsave/grestore€)

\item €\special{language "PS", literal "€\angi{PS code}€"}€ --- {\DVIALW}
style (standard {\PS} coordinates; full €save/restore€; 
treated like inserted figure) 

\item €\special{"€\angi{PS code}€"}€ --- {\DVIPS} `literal graphics' 
(PS coordinates, but origin at current point; full €save/restore€) 

\item €\special{dvitops: inline €\angi{PS code}€}€ --- {\DVITOPS} style; 
use €-j€ (no protection, except restores font)

\item €\special{ps:: €\angi{PS code}€}€ --- % {\DVIPS} style; 
% use €-j€  98/Jun/5
(naked {\PS} style, no €gsave/grestore€) {\DVIPS} style; 

\item €\special{pstext=€\angi{PS code}€}€ --- {\DVI}{\sc 2ps}-Li style; 
use €-j€ (no protection)

\item €\special{ps: literal €\angi{PS code}€}€ --- {\DVI}{\sc 2ps}-SvB style;
use €-j€ (no protection)

\item €\special{header=€\angi{PS file}€}€ --- user-supplied header file
(contribut\-ed to user-supplied prolog in €dvidict€)

\item €\special{headertext=€\angi{PS code}€}€ --- user-supplied 
verbatim header (contributed to user-supplied prolog in €dvidict€)

\item €\special{!€\angi{PS code}€}€ --- `literal macros'; 
% use €-j€  
(contributed to a user-supplied prolog in €dvidict€)

\item €\special{DSCheader=...}€ --- Adobe Document Structuring Convention 
header; use €-j€ (contributed to {\DSC} contents at start of file)
\endlist

\noindent Which method to use? As with the plethora of schemes for figure
inclusion using €\special€, the choice can be awkward. The following
suggestions may help:

\blist
\item If you are porting code designed for another driver, you may be able to
just use what is there, or use that method with some minor modifications. 

\item If you don't care what coordinate system you operate in, 
then use €ps:€. % then use €ps::€. 98/Jun/5 
This affords no protection and involves no overhead. Use your own
€gsave/grestore€ or €save/restore€, if appropriate. 

\item If you want to work in the standard PostScript coordinate system, use
€verbatim=...€ % €ps:€. 98/Jun/5
% This, too, affords no protection and involves very little overhead.
Use your own €gsave/grestore€ or €save/restore€, if appropriate. 
This, too, affords no protection and involves very little overhead.
\endlist

% \noindent (Use of €ps:€ versus €ps::€ may be just the opposite when using {\DVIPS}.)

\subsub{PostScript programming tips} Some additional useful tips for verbatim PostScript operations include:

\blist
\item In its PostScript output, {\DVIPSONE} always sets up the
parameters €/PageHeight€, €/PageWidth€,  
€/LogicalPage€ and €/PhysicalPage€. 
% €/Logical€ and €/Physical€. % fixed 97/Nov/28
Any verbatim PostScript code you create can reference the values of these
parameters. 

\item You can define PostScript procedures that get called at the top of the page (€bphook€) and at the bottom of the page (€ephook€). The default versions of these procedures do nothing. Both operate in the standard PostScript coordinate system and are inside the €save/restore€ pair for the page. You can set up the procedures using a PostScript header/prolog file:

\beginlines
{\parindent=1pc
€\special{header=€\angi{user-prolog-file}€}€
}
\endlines

\noindent (or use €-w=€\angi{user-prolog-file} on the command line). Alternatively, use

\beginlines
{\parindent=1pc
€\special{headertext=€\angi{verbatim-user-supplied-prolog}€}€
}
\endlines

\noindent Beginning-of-page hooks are useful for inserting backgrounds, crop marks and borders, or when changing the coordinate system. (Note that with some drivers other than {\DVIPSONE}, the equivalent of €bphook€ is called €bop-hook€, and the equivalent of €ephook€ is called €eop-hook€.)

\item Do not leave anything on the stack (and do not remove any items you did not place there). {\DVIPSONE} produces PostScript code that relies on the stack, and that code will get confused if any additional items are found there after a €\special€.

\item If you need to preserve some information (say, the coordinate transformation matrix CTM, or the current location or the gray level), use variables to hold the values (as opposed to leaving things on the stack). Avoid short names that might conflict with names used by the {\DVIPSONE} preamble.

\item If necessary, use €save/restore€ or €gsave/grestore€ --- {\it within\/} a particular €\special€ --- to preserve the state and to restore it after the inserted PostScript code.

\item Avoid matching use of €save€ or €gsave€ in one €\special€ with €restore€ or €grestore€ in another €\special€. In most cases you will be preserving more of the state than you want, {\it and\/} undoing desired changes in state. Restore only the specific state variables that actually need to be restored (often just the current point). Alternatively, when restoring state, omit components that should not be restored.

\item To save the current point in one €\special€, use code like:

\beginlines
{\parindent=1pc
€currentpoint /savedy exch def /savedx exch def€
}
\endlines

\noindent You can later restore the current point (to get back to the same place on the page) using:

\beginlines
{\parindent=1pc
€savedx savedy moveto€
}
\endlines

\item To save the CTM, use code like:

\beginlines
{\parindent=1pc
€/savedCTM matrix currentmatrix def€
}
\endlines

\noindent You can restore it later (to get back the same coordinate transformation) using

\beginlines
{\parindent=1pc
€savedCTM setmatrix€
}
\endlines

\item To save the current gray level in one €\special€, use code like:

\beginlines
{\parindent=1pc
€/savedgray currentgray def€
}
\endlines

\noindent You can restore it later in another €\special€ (perhaps because you changed the gray level while painting something directly in PostScript) using:

\beginlines
{\parindent=1pc
€savedgray setgray€
}
\endlines

\item To preserve the current font in one €\special€ use code like:

\beginlines
{\parindent=1pc
€/savedfont currentfont def€
}
\endlines

\noindent You can restore it later in another €\special€ (perhaps because you inserted something using a different font) using:

\beginlines
{\parindent=1pc
€savedfont setfont€
}
\endlines

\noindent (To preserve and restore state {\it within\/} a single €\special€, you can, of course, just use €save/restore€ or €gsave/grestore€, as appropriate.)

\item Do not confuse {\TeX}'s current point with the current point in PostScript. In particular, by moving the current point on the page using verbatim PostScript, you may get bizarre placement of text on the page (which may or may not be what you are after, of course\dots). Obviously, {\TeX} knows nothing of the changes you have made --- it assumes the current point is unchanged after a €\special€.

\item Always follow €\special{...}€ with either additional {\TeX} control sequences or a `\%.' Otherwise {\TeX} will insert horizontal space where you do not expect it.

\item Always precede €\special{...}€ with €\leavevmode€
when it is the first thing in a paragraph
(anything else that takes you out of vertical mode,
like €\noindent€ should work as well).
Otherwise spacing will be thrown off since the €\special€
then appears while you are still in vertical mode.
\endlist

\subsub{PostScript coding examples} The remainder of this section provides several detailed examples of verbatim PostScript code.
Note that some of the effects described here can be obtained
more easily by using the €graphics€ or €color€ packages in {\LaTeXe}.
One advantage of using these packages is that often the desired
effect will then {\it also\/} work in {\DVIWindo} 
(although sometimes only in Windows~NT).

\blist
\item {\bf Example 1a (rotated text block)}: A text block is to appear in the left margin rotated 90 degrees (so lines run down the page). Normal text is to resume below that.

\beginlines
{\parindent=1pc
€% This is the normal text before the rotated part:€
€The graphs of $f$ and $f^{-1}$ are so closely related that the graph€
€of $f$ can be used to visualize the graph of $f^{-1}$. If the graph€
€of $f$ is as shown in Figure 2(a),€
€% this sets up the rotated text (with narrower margins):€
€\setbox0\vbox{\hsize=13pc \raggedright€
€% You rotate this page counterclockwise through a right angle, then€
€% the graph of $f^{-1}$ appears on your left. The€
€% only trouble is that the numbering on the horizontal axis goes in€
€% the wrong direction, so you must flip this picture over to get the€
€% usual picture of $f^{-1}$, which appears on your right.€
€% The first \special preserves the current point and CTM;€
€% it then rotates the coordinate system by 90 degrees;€
€% the rotated text is then typeset;€
€% the second \special restores the CTM and the current point.€
€\special{ps:: currentpoint /savedy exch def /savedx exch def€
€/savedmatrix matrix currentmatrix def 90 rotate}%€
€\box0€
€\special{ps:: savedmatrix setmatrix savedx savedy moveto}%€
€% We are now back where we were before the rotated text was inserted€
€% Move down the page by amount equal to the width of the rotated text€
€% (Otherwise the following text will appear next to the rotated part)€
€\vskip13pc€
€% Now back to more text in normal orientation:€
€This procedure is awkward with books and impossible with blackboards,€
€so it is fortunate that there is another way to construct the graph€
€of $f^{-1}$.€
}
\endlines
\endlist

\noindent Note how the €\special€s {\it only\/} preserve the CTM and the
current point. Using €gsave\grestore€ instead preserves the full graphical
state, including the current font, which can have undesirable results if
there are font switches. 

\blist
\item {\bf Example 1b (rotated text block)}: The same rotated text block can be obtained using:

\beginlines
{\parindent=1pc
€\special{ps:: gsave 90 rotate}%€
€\box0€
€\special{ps:: currentfont grestore setfont}%€
}
\endlines
\endlist

\noindent In this case, rather than explicitly saving {\it only\/} what needs
to be saved (CTM and current point), we save the full graphical state (using
€gsave€), but then selectively avoid restoring parts of the state that should
stay the same (namely the current font). 

The reason one shouldn't restore the font is that {\TeX} is assuming that the
font after the second €\special€ is exactly what it was before that
€\special€ --- namely the font last used in the rotated text, rather than the
font that was selected just before the first €\special€ (which is what
€grestore€ would restore). 

A final comment on rotation: 
use the {\LaTeXe} €graphics€ or €graphicx€ packages if possible.
If you do use some version of €rotate.sty€ instead, note that this style
file was designed for use with {\DVIPS}, which uses a left-handed 
coordinate system.  When using €rotate.sty€ with {\DVIPSONE} you may 
% make some small changes: 
% either (i) use €ps::€ instead of €ps:€ in €\@vspec€, or (ii)
need to change the 90 to 270, and conversely change the 270 to 90. 
% Remember to use
In some cases you may also need to use
the {\DVIPSONE} €-j€ command line flag to enable raw PostScript. 

\blist
\item {\bf Example 2a (gray rules)}: A gray rule is to appear in some text:

\beginlines
{\parindent=1pc
€This (black) text is followed by a gray rule%€
€\special{ps:: /savedgray currentgray def .75 setgray}%€
€\hbox{\vrule height1pc depth0pt width 50pt}%€
€\special{ps:: savedgray setgray}%€
€This text is preceded by a gray rule (and is black again).€
}
\endlines
\endlist

\noindent Note how the €\special€s only preserve and restore the gray value. Because €gsave/grestore€ instead restores the full graphical state, including the current point, the text following would have been placed on top of the rule rather than to its right where it belongs.

\blist
\item {\bf Example 2b (gray rules)}: We can obtain the same gray rule between two pieces of text using:

\beginlines
{\parindent=1pc
€This (black) text is followed by a gray rule%€
€\special{ps:: gsave .75 setgray}%€
€\hbox{\vrule height1pc depth0pt width 50pt}%€
€\special{ps:: currentpoint grestore moveto}%€
€This text is preceded by a gray rule (and is black again).€
}
\endlines
\endlist

\noindent As in example 1b, we use €gsave€ to save the full graphical state, but then selectively do not restore the part we don't want restored --- in this case the current point. We do not want to restore the current point because after typesetting the rule, {\TeX}'s current point is at the right end of the rule, not at the left, which is what €grestore€ would restore (thus the following text would overprint the gray rule).

Again, note that it is best to use 
€\special{color rgb: €\angi{r} \angi{g} \angi{b}€}€ instead of either of the
foregoing approaches.  
This is a device independent way of specifying color, and
both {\DVIPSONE} and {\DVIWindo} support this construct. % 96/Aug/26

\blist
\item {\bf Example 3 (2-color work)}: Here is one way to do simple 2-color work in {\DVIPSONE}, using only a PostScript Level 1 printer or imagesetter.
\endlist

\noindent Assign everything that is to appear in the spot color to some
special distinguishable gray level --- say, 0.5, if you can assume that
everything else is either 0 (black) or 1 (white). It is probably best to
define some macro for this since you might want to change gray values later.
You can then use the standard €color€ €\special€'s. Like

\beginlines
€\def\blue#1{%€
€\special{color push gray 0.5}%€
€#1\special{color pop}}€
€This text is in black.€
€\blue{This text appears in blue.}€
€This text is again in black.€
\endlines

\noindent gets you support in both {\DVIPSONE} and {\DVIWindo}.

This could also be done using raw Post\-Script: % Here is a simple example:

\beginlines
€\def\blue#1{%€
€\special{ps:: /oldgray currentgray def 0.5 setgray}%€
€#1\special{ps:: oldgray setgray}}%€
€This text is in black.€
€\blue{This text appears in blue.}€
€This text is again in black.€
\endlines

\noindent Run this through {\TeX}. 
Make up one PostScript file (say, €black.ps€):

\beginlines
€{dup 0.4 gt 1 index 0.6 lt and {pop 1} if} settransfer€
\endlines

% €{dup 0.4 gt 1 index 0.6 lt and {pop 1} {pop 0} ifelse} settransfer€

\noindent This maps 0.5 gray to 1 (white) and 
% {\it and\/} 1 
0 to 0 (black) and 1 to 1 (white).
Make up another PostScript file (say, €blue.ps€):  

\beginlines
€{dup 0.4 gt 1 index 0.6 lt and {pop 0} {pop 1} ifelse} settransfer€
\endlines

\noindent This maps 0.5 to 0 (black) and 0 {\it and\/} 1 to 1 (white). 
The first file will be used for black, the second for blue. 

Now run the {\DVI} file through {\DVIPSONE} twice (use the €-j€ command line
flag so the program won't complain about the verbatim PostScript code). 
The first time use €-w=black€ on the command line, the second time use
€-w=blue€.  This pulls in the two PostScript files as prologs. The result
will be two PostScript output files, one for the black plate and one for the
blue.  (You'll have to rename or move the first output file to avoid
overwriting it the second time you call {\DVIPSONE}.) The same idea can be
extended to more than two colors; just pick a set of distinguishable gray
levels to label them. 

This method does not take into account the current transfer function, which
is OK in most cases. But for the politically correct way of doing something
more elaborate, see page 743 of the second edition of the {\tensl PostScript
Reference Manual}. 

Note that you can't rely on an exact {\it equality\/} test in the PostScript
code because of rounding problems and the discrete set of values (usually
256) in the lookup table used by the PostScript interpreter. In addition,
{\it everything\/} will be affected by this transfer-function modification.
So the method won't work well if your work contains inserted {\TIFF} images
with a continuous range of gray levels! 

The method {\it will\/} work with inserted {\EPS} figures, if those figures are created using the same conventions: 0.5 gray for blue and 0 gray for black. This may appear a little confusing at first, because instead of using colors directly, one uses one PostScript file per color --- and in each of these files the corresponding color is painted black.

Unfortunately, nothing analogous to €settransfer€ (which works with €setgray€ and €currentgray€) is available to work with €setrgbcolor€ and €currentrgbcolor€ (because it would need much too large a lookup table).

% Note that it is best to use €\special{color rgb: €\angi{r} \angi{g}
% \angi{b}€}€ instead of the foregoing approach. This is definitely an instance
% where use of predefined €\special€s may be better than raw PostScript. The
% construct   

% \beginlines
% €\def\blue#1{%€
% €\special{color push rgb: 128 128 128}%€
% €#1\special{color pop}€
% \endlines

% \noindent gets you support in both {\DVIPSONE} and {\DVIWindo}.

\blist
\item {\bf Example 4 (changing scale and position)}: You can change the scale and position on a page of output from {\DVIPSONE} using command line arguments €-m=...€, €-x=...€ and €-y=...€. The same effects can be achieved by editing the PostScript file without rerunning {\DVIPSONE}, just by changing the values of €/mag€, €/xoffset€ and €/yoffset€.
\endlist

\noindent To illustrate yet another way of using verbatim PostScript, consider how this can be done using a PostScript header file. Suppose the file we will construct is €control.ps€. Then {\it anywhere\/} in the {\TeX} source, say: 

\beginlines
€\special{header=control}€
\endlines

\noindent This inserts the PostScript text from €control.ps€ ahead of any output from {\TeX} (and inside €dvidict begin ... end€).

Now create the header file with something like the following in it:

\beginlines
€/bphook{€
€/mag 1200 def€
€/xoffset 72 def€
€/yoffset 72 def€
€}def€
\endlines

\noindent This tells {\DVIPSONE} to start each page by redefining €magnification€ to 1200 (instead of the default 1000), €xoffset€ to 72 pt (instead of 0), and €yoffset€ to 72 pt (instead of 0). 

\blist
\item {\bf Example 5 (suppressing } $\backslash${\ttb special}{\bf s used by other DVI processors)}: Each {\DVI} processor supports its own set of €\special€s. Some of these are verbatim PostScript, and as such are passed by {\DVIPSONE} (since that program has no way to distinguish `intentional' use of verbatim PostScript and `bad' €\special€s intended for a different driver). It is always best to edit the {\TeX} source to get rid of these €\special€s. But sometimes that may not be possible.
\endlist

\noindent One way of dealing with this problem is to define dummy PostScript procedures. For example, if your driver uses €m1200€ to change the magnification and €cop3€ to change the number of copies, you may wish to define: 

\beginlines
€/m1200{}def€
€/cop3{}def€
\endlines

\noindent This code can then either be placed in a PostScript header file, read in using €\special{header=...}€, inserted using €\special{headertext=...}€, or appended to the {\dvipreamenc} file itself.

If your {\dvipreamenc} file is in binary form, first pass it through {\PFBtoPFA} to convert it to hexadecimal. Then rename the file ({\dvipreampfa}) back to {\dvipreamenc}. Finally, append your PostScript definitions, but bracket them in €dvidict begin€ and €end€ as follows:

\beginlines
€dvidict begin€
€/m1200{}def€
€/cop3{}def€
€end€
\endlines

\noindent What about calls that take arguments? Suppose your nonstandard €\special€ is of the form €\special{234 435 foo}€. In that case, simply pop the arguments off the stack in the dummy procedure called `foo':

\beginlines
€/foo{pop pop}def€
\endlines

\noindent Life is harder if the arguments {\it follow\/} the command, as in

\beginlines
€\special{xy 234 435}€
\endlines

\noindent In this case, you may be able to use €readline€ to read and discard the rest of the line:

\beginlines
€/xy{currentfile 256 string readline pop pop}def€
\endlines

\blist
\item {\bf Example 6 (modifying other drivers' } $\backslash${\ttb special}{\bf s)}: Sometimes verbatim PostScript for other {\DVI} drivers miraculously works in {\DVIPSONE}. Sometimes it almost works. One example is the following pair of €\special€s for rotating a text block:

\beginlines
{\parindent=1pc
€ps:gsave currentpoint currentpoint translate 270 rotate€
€neg exch neg exch translate€
€ps:currentpoint grestore moveto€
}
\endlines
\endlist

\noindent Although this code violates the rules, it almost works. The problem is that it is designed for a driver that uses a left-handed coordinate system. To make it work with {\DVIPSONE}, change the 270 to 90. Another approach is to change the €ps:€ to €ps::€ (and use the €-j€ command line flag).

\section{Operating System Issues}

The {\yandy} TeX System version 2.1 runs under Windows~95/98 and
Windows~NT. Some of its components ({\DVIPSONE}, {\yandy} TeX itself,
{\AFMtoTFM} etc.) can run %  separately
as `console applications' from a `command prompt'
(`Start{\down}Programs{\down}Command Prompt').
% in a {\DOS} window. 
This section describes some of the considerations involved in getting the
system's programs to function in these operating environments. 

One of the first things we recommend you do in terms of
adjusting your Windows preferences is to make sure
it shows you file extensions of all files.
Double click `My Computer,' then `View{\down}Folder Options,' 
and  select the `View' tab. 
Uncheck `Hide file extensions for known file types.'
Then double click on the `Hidden files' folder icon
(unless it is already open) and check `Show all files.'
(Details may depend on which version of Windows you are running).

While you are here, you may also want to check
`Smooth edges of screen fonts' in `Visual Settings' 
(not available in all versions of Windows).

\subsect{DOS Considerations in Windows 95/98}

The {\DOS}-related issues involving {\DVIPSONE} and {\yandy} TeX are not
specific to those programs. We describe them here since you may encounter
them in other contexts and may not be familiar with workarounds for potential
problems under {\DOS}. 

\subsub{Limitation on environment size} Sometimes it is convenient to control
the {\yandy} TeX System via {\DOS} environment variables rather than the
`environment variables' listed in the [Environment] section of
{\dviwindoini}. You can then use a batch file to change the values of the
variables for each project worked on. (You can't modify {\dviwindoini}'s
`environment variables' by this method. So remove from {\dviwindoini} the
variables you want to be able to change; the system will then look to the
{\DOS} environment for variables of the same name.) 

If you define many new {\DOS} environment variables for this purpose, you may run up against the default {\DOS} environment size. The default value of the environment varies, depending on the version of {\DOS}, but you can set the environment to any size by adding the line

\beginlines
€SHELL=C:\WINDOWS\COMMAND.COM C:\WINDOWS\COMMAND\ /E:€\angi{xxxx} €/p€
\endlines

\noindent to your {\configsys} file, where \angi{xxxx} specifies the number
of bytes to be set aside for environment variables. 

Specify at least 1024, but avoid making the environment size much larger than
really needed, since the environment gets copied into the 64k data segment of
each 16-bit program that you run --- and some of these programs may not
have much space left in the data segment. % as is. 

\subsub{Limitation on the length of command lines} There is a 127-character
limit on any line typed at the command prompt. This can be a problem if you
are trying to pass many arguments to {\DVIPSONE}, for example.  

Specifically in the case of {\DVIPSONE}, you may want to set up commonly used command line parameters in the file {\dvipsonecmd}. Then you need only explicitly type on the command line those parameters that have not already been specified in this file. {\DVIPSONE} also can read indirect command files (response files). It interprets a file name preceded by `@' to be the name of a file containing command line flags and command line parameters.

The 127-character limitation also applies to {\autoexecbat}, so your {\PATH}
variable may not be as long as you would like it to be. There is no error
message --- anything longer than 127 characters is simply snipped off. As a
result, you may think that a given folder is on your {\PATH} when in fact it
is not. In {\autoexecbat}, use €PATH=...€ rather than €SET PATH=...€ to
squeeze out a few more characters. 
% You can also use €config.sys€ where there is no line length limitations.

In Windows 95/98
you can determine the current values of your environment variables by typing
{\SET} at a command prompt. You may also use the {\SET} command in
{\configsys}, in addition to {\autoexecbat} --- and there is no limit on the
length of lines in {\configsys}. (In {\configsys}, though, you cannot use the
€PATH=...€ form; you must use €SET PATH=...€.)

\subsect{Windows NT Considerations}

Problems and inconsistencies arising under Windows~NT relate primarily to the interpretation of the `\&' character and to NT's font-handling procedures.

\subsub{Placing `\&' in file and folder names} Windows~NT (as some other
operating systems like OS/2, Unix and some {\DOS} clones) uses `\&' on the
command line as a separator between two commands. This makes it awkward to
specify executables named €y&ytex.exe€, folders like
€c:\yandy\y&ytex€, environment variables named €y&ytex€ and {\TeX} 
formats like €&plain€. 

On the command line you {\it can\/} quote the \& by preceding it with
\char142\ % €^€
% (e.g., €c:\yandy\y^&ytex\y^&ytex.exe)€, 
(e.g., {\tt €c:\yandy\y€\char142€&ytex\y€\char142€&ytex.exe€}), 
but this can get awkward
--- and it works only from the command line, not in a batch file.  
This is why % Therefore, in version 2.1 
we use the file and subfolder names €yandytex.exe€ and €\yandytex€ 
rather than €y&ytex€.

\subsub{Allowing `+' instead of `\&' with the {\TeX} format} You tell {\TeX} what format file to use on the command line via the `\&.' For example,

\beginlines
€tex &latex ...€
\endlines

\noindent loads up the {\LaTeX} 2e format (that is, the file {\latexfmt}). If no format is specified, then {\TeX} looks for the default format file, {\plainfmt}.

When you call {\TeX} from the command line in Windows~NT you need to quote
the \& by preceding it with \char142\ % €^€
% (e.g., €tex ^&lplain€). 
(e.g., {\tt €tex €\char142€&lplain€}). 
% Starting with version 1.2, 
To avoid the above mentioned problems,
{\yandy} TeX accepts + as an alternative to \& on the command line. 

\subsub{Font handling} 
% At the time of writing there is no Adobe Type Manager for Windows~NT. 
There now is an {\ATM} for Windows~NT. If you have it, use it,
since provides the best on-screen font rasterization.

However, under NT you can also install Type~1 fonts from the
Windows Control Panel and have them automatically converted to TrueType form
(provided the font vendor permits this). When you do so, you can also elect
to have the Type~1 fonts made available to the PostScript printer driver (so
the converted TrueType versions get used {\it only\/} for on-screen display
and the original Type~1 fonts get used for printing to PostScript printers).
We recommend checking all three check boxes in the dialog box for the
conversion process. 

The automatic conversion is somewhat better than that provided by some
commercially available font tools. However, for commercial grade, hand-hinted
Type~1 fonts --- such as fonts from {\yandy} --- there will be a noticeable
loss in display rendering quality, since the original hinting gets lost. For
less well-made fonts the converted version may render as well as the original
(the `auto hints' in the Type~1 version are not much better than the `auto
hints' in the TrueType version).

% following no longer true!

% Text fonts do not present any additional problems --- except that 
% you will be restricted to Windows {\ANSI} encoding since the {\ENCODING}
% environment variable has no effect. So use {\TFM} files set up for Windows
% {\ANSI}, not TeX 'n {\ANSI} (or hard-reencode the text fonts {\it before\/}
% conversion). 

For the most up-to-date information on font usage under Windows~NT, see the
file €ntfonts.txt€ in the €\doc-misc€ subfolder of your main {\yandy} program
folder.  And if you do have {\ATM} for NT, then use that.

\subsub{Long file names} In {\DOS}, long file names are automatically
truncated to $8+3$ characters. This does not happen in Windows~NT (even under
the older FAT file system). Consequently, when {\TeX} calls for files with
long names (such as {\texpool}, {\lcircle10tfm} and {\lcirclew10tfm}), those
files may not be found under the %  {\DOS}
shortened names. 

Therefore, in Windows~95/98, and on a Windows~NT installation,
% with a file system that supports long file names, 
you may have to rename €tex.poo€ to
{\texpool}, €lcircle1.tfm€ to {\lcircle10tfm} and €lcirclew.tfm€ to
{\lcirclew10tfm}. The {\yandy} TeX System 2.1 installation program 
% attempts to do 
does this renaming automatically for you. 
% On a Windows~NT installation with a FAT file system (such as a dual 
% boot configuration),  
In some situations you may also wish to use the
€-8€ command line flag, which forces {\yandy} TeX to truncate file names to
the {\DOS} $8+3$ convention. 

Avoid file names with spaces 
% (such as €c:\My Documents\TeX\foo.tex€),
(such as €"c:\My Documents\TeX\foo.tex"€),
however, since {\TeX} parses its own command line and determines where the
file name ends by explicitly looking for a space character!

\subsub{Relating font file names to Windows Face Names} {\TeX} accesses
fonts through the name of the {\TFM} file, which normally is the same as the
font's other file names (but with different extensions, of course). For
example, the Adobe Type~1 outline font file for Times-Roman is
€tir_____.pfb€, the Windows metric file is €tir_____.pfm€, and the {\TeX}
metric file is €tir.tfm€. Similarly, the Wingdings TrueType outline font
file is €wingding.ttf€, the associated €.fot€ file is €wingding.fot€
(if present), and the corresponding {\TeX} metric file is €wingding.tfm€.

{\DVIWindo} has to find the relationship between font file name and Windows
Face Name so it can use the font in Windows.  It uses several different
methods depending on the operating system, the font type, and version
of {\ATM} installed (if any).  Here is the short version of the story:
For Type~1 fonts, it does this by looking for the file €atmreg.atm€ 
(ATM~4), or in the [fonts] section of {\atmini} (ATM~3).
For TrueType fonts it looks in the registry (Windows~NT) or 
in the [fonts] section of {\winini} (Windows~95/98).
(Actually what is listed there is
the `Full Name', not the `Face Name', but that is another story\dots).
In Windows~NT, it looks instead for a [ttfonts] section, which is
set up by the €setupttf€ utility.

% ÆMDRVØactually that is a gross over-simplification :=)ÆMDNMØ

% Because there is currently no {\ATM} for Windows~NT, {\atmini} will not be
% updated when you install new fonts. In addition, Windows~NT uses the Registry
% instead of {\winini} to maintain its list of TrueType fonts, so {\winini}
% will not be updated either. 

% This is {\it not\/} a problem on a dual boot configuration, where Windows~NT
% is just using fonts that have already been installed in Windows 3.1. There,
% the appropriate entries will already exist in {\winini}. When new fonts are
% installed that are only available in Windows~NT, though, or on a single boot
% Windows~NT configuration, an extra step may be required.

Under Windows~NT {\DVIWindo} attempts to read installed font information
from the Registry.  This is somewehat unreliable since the `font name'
in the registry is a made-up name (not the Windows Face Name, nor
the {\PS} FontName, nor the fonts FullName!).

If {\DVIWindo} complains that it can't find
TrueType fonts, you can create the appropriate {\winini} entries
automatically by using {\yandy}'s {\SETUPTTF} utility. You can invoke this
utility with €-s€ on the command line to get (i) a list of all TrueType fonts
recorded in the [fonts] section of {\winini}, and (ii) a list of all TrueType
fonts €c:\windows\system\*.fot€ 
(output can be redirected to a file if desired). 

Invoke {\SETUPTTF} with no arguments (it defaults to €-vfnm€
in this case) to actually update the €[ttfonts]€ section of {\winini}.

If your {\winini} file is not in the standard place (€c:\winnt€), 
specify the Windows folder using the command line argument €-W=...€. 
If your €.ttf€ % €.fot€
files are not in the standard place (€c:\winnt\fonts€), specify the system
folder using the command line argument -€S=...€.

Alternatively, you can explicitly list the €.ttf€ or €.fot€ 
files to be considered on the command line --- and note that wildcards are
accepted:

\beginlines
€setupttf -m c:\winnt\*.fot€
\endlines

\noindent If your {\winini} file is not in the standard place 
(€c:\windows€ or €c:\winnt€),
you may wish to create a dummy file in that folder for {\SETUPTTF} to update. 

\subsect{Windows 95/98 Considerations}

The {\yandy} TeX System requires few adjustments and/or workarounds
under Windows~95/98. For the most up-to-date information, consult file
€win95.txt€ in the €\doc-misc€ subfolder of your main {\yandy} program
folder. 

If you print to a {\PCL} printer, you {\it will\/} need {\ATM} version 3.02
or later;
version 3.01 has problems using `soft fonts' under Windows~95/98 in that
printing mode (when using {\PCL} printers you may also have to deal with
bugs in the Windows 95 {\PCL} printer drivers, see €win95.txt€).
%
For on-screen display and printing to {\PS} % Post\-Script
devices, Adobe Type~1 fonts work just fine under Windows~95/98 --- as 
long as you have installed Adobe Type Manager version 3.01 or later.

\subsub{Special DOS issues} The {\DOS} under Windows~95 (98) is version 
7.0 (7.1).
If you installed on top of an older version of {\DOS}, and your {\PATH} is
not set up correctly, you may get `Incorrect {\DOS} Version' errors in
various situations.

Your {\PATH} should list €\windows\command€ (the new {\DOS} folder) first, before €\dos€ (the old {\DOS} folder); otherwise the {\XCOPY} and {\FIND} commands will not work. In addition, {\PATH} should list both the new {\DOS} folder and the old {\DOS} folder, otherwise other {\DOS} commands such as {\REPLACE} will not work (since they are not defined in the new folder). A typical {\PATH} definition in {\autoexecbat} might thus be:

\beginlines
€PATH c:\windows;c:\windows\command;c:\dos;c:\utility;...€
\endlines
\subsub{Font considerations} Make sure that {\ATM} knows about the Type~1
fonts you have (check the {\ATM} Control Panel). Also check font installation
using `Font{\down}Show Fonts' in {\DVIWindo}; you need to reinstall your fonts
if they do not show up here.

\section{Appendix}

\subsect{Frequently Asked Questions}

{\Q Q1:} The glyph `AE' mysteriously shows up in my printed output when I €\input€ a particular file.

{\A} You probably have a Ctrl+Z (character code 26) in the file. In {\DOS},
Ctrl+Z indicates the end of the file, and so {\yandy} TeX ignores a Ctrl+Z
that is the very last byte in a file.  
% ÆMDRVØ(unless you use the command line flag €-z€). 96/Aug/26ÆMDNMØ
But {\it inside\/} a file, {\yandy} TeX allows {\it all\/} character codes including `control' characters. You probably have some invisible white space after the Ctrl+Z and before the true end of file.

% {\Q Q2:} Accents appear {\it before\/} the letter to be accented, rather than over it. What's wrong?

% {\A} You are probably using `old style' syntax of the form

% \beginlines
% €\"{a}, \'{e}, \c{c}, ...€
% \endlines

% \noindent to specify accented characters. This prevents {\TeX} from linking to the ready-made accented characters in the font. Use instead:

% \beginlines
% €\"a, \'e, \c c, ....€
% \endlines

% \noindent If this still does not work as desired, then your {\TFM} files may lack the appropriate pseudo ligatures (or you are perhaps using fonts that do not have ready-made accented characters). Make new {\TFM} files. If you do this by executing {\AFMtoTFM} directly, remember to use the command line flags €a€, €d€ and €j€:

% ÆMDRVØhmm, now texnansi.tex and ansiacce.tex no longer depend on pseudo ligsÆMDNMØ

% \beginlines
% €afmtotfm -vadjx -c=texnansi tir_____.afm€
% \endlines

% \noindent (This is automatic if you instead execute `WriteTFM\dots' from {\DVIWindo}.)
 
% Another alternative is to {\it not\/} use the ready-made accented characters in the fonts. If you place €\input texnansi€ in your source file, {\it un\/}comment the €\buildcomposites€ statement in it.
 
{\Q Q2:} How do I use BibTeX, MakeIndx or DVICOPY?

{\A} These utilities are all in the €util€ sub-folder of your €yandy€ folder.
You may find it most convenient to use these from the command prompt
(`Start{\down}Programs{\down}Command Prompt').
Gather all the necessary files into a common folder and make
that the current folder.
You can instead set {\DOS} environment variables
(either €TEXINPUTS€ and €TEXBIB€, or
€BIBINPUTS€ and €BSTINPUTS€)
to tell these utilities where the inputs are.
%% env variables for BibTeX ???
Other versions of these utilites may also be found on the CD
in the €win32€ sub-folder of the €CTAN€ folder.

{\Q Q3:} I keep getting complaints about encoding errors in CM fonts and I don't know what's causing them.

{\A} The Computer Modern text fonts are {\it not\/} ordinary text fonts, since they have a most peculiar character layout that matches no other known encoding, contain very many fewer than the standard 228 glyphs expected in a normal text font, and are designed to be used with fixed hardwired encoding. They must therefore be marked `symbol/math/pi/decorative', {\it not\/} `text.'

Despite this fact, some TrueType versions of the CM fonts are marked as
`text' fonts, and so {\DVIWindo} tries to reencode them --- which doesn't
work since TrueType fonts cannot be reencoded in Windows~95/98.

You {\it must\/} deinstall all TrueType versions of the CM fonts, {\it and\/}
physically remove all the font files from your hard drive, before installing
the CM fonts that {\yandy} supplies (As an added benefit you will get 
noticably better on-screen rendering of the CM fonts).
After deleting the TrueType CM fonts, remove the stain left on your hard-drive 
with a strong detergent (just kidding!).

{\Q Q4:} I use Computer Modern fonts. The character layout of the {\CM} text fonts does not appear to be affected by on-the-fly encoding.

{\A} The {\CM} text fonts are not standard text fonts as recognized by
Windows; to work in Windows as required by {\TeX}, they are marked
symbol/math/pi/decorative rather than `{\ANSI} text.'  
% ÆMDRVØ(The {\CM} text fonts use their own peculiar character layout and do not have anywhere near the `standard' complement of 228 glyphs for text fonts).ÆMDNMØ
As a result, {\CM} text fonts are {\it not\/} affected by the automatic
reencoding of standard text fonts specified by the {\ENCODING} environment
variable. % (in the [Environment] section of {\dviwindoini}). 

It is possible to reencode the {\CM} fonts to make the 58 accented characters
accessible (see section~6.9). Before you do this, though, consider that the
modified fonts then will not act the way {\TeX} expects them to, since
special characters will be in different places. To accommodate this change,
you would need to read in a suitable {\TeX} macro header file (such as
€texnansi.tex€).

In addition, the {\CM} text fonts do not have a full complement of glyphs.
They contain only $128-16+58$ of the `standard' 228 glyphs found in regular
text fonts. They even lack some {\ASCII} characters like `braceleft' and
`braceright,' % as well as 
`less,' `greater,' `underscore,' `backslash,' `bar,'
`quotesingle,' `quotedbl,' `asciitilde,' `asciicircumflex,' etc.
If you like the `Computer Modern' look, but want ordinary text fonts
that can be reencoded like other text fonts, consider the new
`European Modern' (EM) fonts.

{\Q Q5:} If I try to launch `{\DVIWindo} Help,' there are complaints about
missing fonts like `Times New Roman,' `Arial,' and `Courier New.'

{\A} The Help file uses standard Windows TrueType fonts. Make sure you have
TrueType enabled and that these fonts are properly installed. 
%
Check that these fonts show up in the Windows Character Map utility. If the
fonts do not show up in Character Map, reinstall them from your Windows 
CD or diskettes. Make sure you have the corresponding €.ttf€ and €.fot€ files
actually on your hard disk (they are placed there by the Windows
installation).
Check that the entries in the [fonts]
section of {\winini} refer to the correct folder.

{\Q Q6:} I am using `TeX 'n {\ANSI}' encoding for text fonts. Accented
characters, special characters like `germandbls,' and most accents work fine,
but `dotaccent' (sometimes used for derivatives) does not. 

{\A} While most special characters and accents in `TeX 'n {\ANSI}' are in the
same place as the `TeX Text' encoding used in most Computer Modern text
fonts, a few are not. This is because TeX Text encoding does {\it not\/}
match {\ASCII} encoding. To use TeX 'n {\ANSI} effectively you should add
€\input texnansi€ to your plain {\TeX} of {\LaTeX} 2.09 source file. 
In {\LaTeXe} use €\usepackage[LY1]{fontenc}€ instead.
That way you gain access to
`dotaccent,' `hungarumlaut' and `ogonek' --- and also set up proper `lower
case codes' for the accented characters.  

{\Q Q7:} I switched to `TeX 'n {\ANSI}' (or some other) encoding and now
ligatures (or special characters, or accented characters) don't show up
correctly in some text font (i.e., they are blank, missing or replaced with a
`bullet,' or else replaced with the wrong glyph).

{\A} These are typical encoding problems. 
% Make sure you have at least {\ATM} 2.6 --- check in the {\ATM} Control Panel.
Make sure {\ATM} is `On.' Also make sure you have the encoding vector
€texnansi.vec€ (or whatever you are using) where {\DVIWindo}, {\AFMtoTFM} and
{\DVIPSONE} can find it. Typically the environment variable {\VECPATH} points
to the folder containing vectors. Then check that the text font is showing up
properly in {\DVIWindo}; use `Show Font' from the `Font' menu. In the case of
TeX 'n {\ANSI}, the first line should show 
`fraction,' `dotaccent,' `hungarumlaut,' `ogonek,' 
and the f-ligatures (these lines are blank for Windows
{\ANSI}). The last six lines should show most of the 58 standard accented
characters.

Make sure you are telling {\TeX} about the position of special characters in
the encoding you have selected. Use the appropriate {\TeX} header file in
your plain {\TeX} or {\LaTeX}~2.09 source file: €\input texnansi€ for TeX 'n
{\ANSI} encoding or €\input ansiacce€ for Windows {\ANSI} encoding.
In {\LaTeXe} use €\usepackage[LY1]{fontenc}€ or
€\usepackage[ansinew]{texnansi}€ respectively.

{\Q Q8:} How can I check whether the actual font files are set up properly for
on-the-fly font encoding? 

{\A} Use the {\DECODE} utility as described in section 2.5.7.

{\Q Q9:} After running the {\DECODE} utility I have ascertained that my
{\PFB}, {\PFM} or {\TFM} files are {\it not\/} set up for the appropriate
encoding. What to do?

{\A} For {\it text\/} fonts only (math fonts have hardwired encoding): If the
{\PFB} and/or {\PFM} files are incorrect, then simply reinstall them from the
original font diskettes, using the {\ATM} Control Panel. This will give you
the original files, which are set up as required. 
% If you do not have the original {\PFB} and {\PFM} files, you must `revert'
% the current versions, as described in section 2.4.2. 

{\Q Q10:} My {\TeX} formats include {\TeX} macro header files that I use
frequently. Now I can't get on-the-fly reencoding to work. What gives?

{\A} A {\TeX} format file includes `frozen-in' {\TFM} files for fonts that
the format calls for. Changes you make to the {\TFM} files in the {\TEXFONTS}
folder {\it after\/} creating the format have no effect. You can check on
where {\yandy} {\TeX} is getting font metric information from by using the
€-Z€ command line flag --- all {\TFM} files will then be listed in the log.

% {\Q Q11:} I am running the {\yandy} TeX System under Windows~NT and the text
% fonts always show up with Windows {\ANSI} encoding, no matter how I set the
% {\ENCODING} environment variable.

% {\A} At the moment there is no {\ATM} for Windows~NT. The Font Installer in
% NT's Control Panel provides for automatic conversion of Type~1 fonts to
% TrueType format. However, there is no way to reencode TrueType fonts on the
% fly, so all text fonts appear with Windows {\ANSI} encoding. Use €\input
% ansiacce€ in your source file. And make sure the {\TFM} files are set up for
% Windows {\ANSI}.

% If you are using fonts that were automatically converted from Type~1 to
% TrueType form, another option is to reencode the Type~1 fonts {\it before\/}
% conversion, using {\ENCODE}, as explained in section 2.5.2.

{\Q Q11:} When there are no errors, the window in which {\TeX} is
running disappears as soon as it is done.  How can I pause it
so that I can read what is in that window?

{\A} All the information that appears in that windows (and more)
is in the {\LOG} file.  The {\LOG} file has the same name as the
{\TeX} source file, but extension €.log€.  It appears in the same
place as the corresponding €.dvi€ file.  Hence if you have
a common €WorkingDirectory€ the {\LOG} file will appear there.
If you don't, the {\LOG} file will be in the same folder as 
the {\TeX} source file.

You can also cause {\TeX}, {\DVIPSONE} and {\AFMtoTFM} to
pause before and after they run by checking `Fonts{\down}Pause WinExe'.
In each case you can then proceed by hitting any key while the
paused window has the focus.


% {\Q Q12:} I am running the {\yandy} TeX System under Windows~NT 3.51, and
% {\DVIWindo} complains that it cannot find any of the fonts I use, even though
% I installed them using the Control Panel Font Installer (which automatically
% converted them from Type~1 to TrueType format).

%  {\A} The font installer in Windows~NT 3.51 creates €.fot€ and €.ttf€ files
% with the correct font names embedded, but then `installs' the fonts in the
% Registry with the wrong names. This problem has been fixed in Windows~NT 4.0.
% Under 3.51, first try using the {\SETUPTTF} utility. If that doesn't solve
% the problem:

% \blist
% \item Determine what €.fot€ and €.ttf€ files correspond to the fonts you
% installed. One way to do this is to look in the Registry with the Registry
% Editor (€c:\windows\system32\regedt32.exe€), under  

% \beginlines
% {\parindent=1pc
% €HKEY_LOCAL_MACHINE\Software\Microsoft\Windows~NT\CurrentVersion\Fonts€
% }
% \endlines

% \noindent You can also use {\yandy}'s {\SETUPTTF} utility to list €.ttf€
% or €.fot€ files and the names recorded in them; e.g., €setupttf -Z€. If you use
% nonstandard directories, execute €-?€ on the command line to learn how to
% tell {\SETUPTTF} where your font files are.

% \item  Copy all of the installed font files (typically in
% €c:\windows\system€) to a temporary folder. Delete the original files. Then
% `Remove' all of the fonts, using `Fonts' in the Control Panel. Finally,
% reinstall the fonts from the temporary folder.   
% \endlist

{\Q Q12} When I call {\TeX} from {\DVIWindo} a window flashes briefly
on screen and then disappears.  No {\DVI} file appears.
How can I discover what the problem is?

{\A} Normally when there is an error, {\TeX} will pause rather than
exit after completing its task.  But if due to some error {\TeX}
is never actually called, it has no chance to stop the window
from disappearing again.  Typically such problems are somehow
related to the way {\TeX} --- or {\DVIPSONE} or {\AFMtoTFM} ---
is called from {\DVIWindo}.

You can cause {\DVIWindo} to show you how it tries to call {\TeX},
{\DVIPSONE} and {\AFMtoTFM} by checking `Fonts{\down}Show WinExe.'
Looking at the command line used will usually dispell the mystery.
The problem may be related to settings of environment variables
or to the parameters being passed.

{\Q Q13:} My text fonts show up correctly on screen --- complete with
ligatures and special characters --- but the ligatures and/or special
characters do not print correctly on a PostScript printer. What could the
problem be? 

{\A} Mismatch between on-screen view and printing to a PostScript printer can
result from a mismatch between what the {\PFB} and the {\PFM} files say about
encoding. For a text font, the {\PFB} file should contain the line €/Encoding
StandardEncoding def€. The {\PFM} file should be set up for Windows {\ANSI}
encoding. Use the {\DECODE} utility to verify this. 

In addition, if you use on-the-fly reencoding make sure you have set the
encoding as desired. Check `Fonts{\down}Encoding', or equivalently the 
{\ENCODING} variable in the [Environment] section of {\dviwindoini}
This should be the name of the desired encoding vector.
% (and {\TEXANSI} should {\it not\/} be set to 1); 
% Conversely, if you use Windows {\ANSI} encoding,
% make sure that {\ENCODING} is set to `ansinew.'
% and that {\TEXANSI} is set to 1. 

{\Q Q14:} My text fonts print correctly on a PostScript printer, but are not
rendered correctly on screen --- the ligatures and/or special characters do
not show correctly. What could the problem be? 

{\A} 
% Check that you have {\ATM} version 2.6 or later. 
Verify that {\ATM} is `On.' Check that the encoding vector you specified is
somewhere where {\DVIWindo} can find it. Typically the {\DVIWindo}
environment variable {\VECPATH} points to a folder with encoding vectors.
Also check in {\dviwindoini} for €LastError=...€, which may provide
additional information. See also {\bf Q7}. % Q7 ???

{\Q Q15:} With some fonts, `WriteTFM\dots' does not appear to produce the
correct result. Also, on-screen display does not match the vector specified
by the {\ENCODING} environment variable. 

{\A} This can happen if the flags in the {\PFM} file are not set correctly.
Use {\DECODE} on the {\PFM} file to check that it is set up for Windows
{\ANSI}. In addition, {\ATM}'s font cache can get corrupted if you make many
changes or have many fonts installed. In this case, delete the {\atmfontsqlc}
file and reboot your system (ATM~3).

% {\Q Q16:} I am switching to the new color €\special€s from the old ones. 
% But I seem to be missing a file called €color.eps€. 

% {\A} Unfortunately, €\special{color ...}€ does not use a distinguishing
% delimiter after the token €color€ (not our idea!), so it is interpreted as
% possibly the name of an {\EPS} file to be inserted. (By the way, just
% specifying the name of an {\EPS} file in a €\special€ --- without any key
% word or other mark --- is another unusually bad idea, but one supported by
% some other drivers, which is where this particular problem originates.) 

{\Q Q16:}
When I try to transfer typeset material on the clipboard from
{\DVIWindo} to Word~97
nothing appears in Word~97.

{\A}  If you look on the clipboard you will see that material copied from
{\DVIWindo} does appear there.  To look at the clipboard use
`Start{\down}Programs{\down}Accessories{\down}Clipboard Viewer'
(If you don't have it installed, use 
`Settings{\down}Control Panel{\down}Add/Remove Programs').

In any case, there is a bug in several new MicroSoft `97' applications
that prevents them from recognizing Windows MetaFiles in `isotropic' mode
(which is supposed to prevent the importing application from distorting
the material). The work around is to add:

€ISOTROPIC=0€

\noindent to the €[Window]€ section of €dviwindo.ini€

{\Q Q17:} Every time I launch {\TeX} from {\DVIWindo} I get this horrible
`This application has violated system integrity' error message
in Windows~95.

{\A} Try launching a {\DOS} box by double clicking with the mouse --- you
will most likely get the same error message. Try launching {\TeX} using a hot
key instead of using the mouse to select from {\DVIWindo}'s `TeX' menu ---
you most likely will {\it not\/} get the message. If this is the case, you
have a conflict between Windows mouse service and {\DOS} mouse service. You
may have to comment out the line in {\autoexecbat} that launches your {\DOS}
mouse program.

{\Q Q18:} Whenever I print, the `Use {\DVIPSONE}' box is checked, even when I
want to print to a non-PostScript device like my fax board. I can always
`uncheck' the box when I `print' to a non-PS printer, but this is
 inconvenient.   

{\A} You can control whether or not the `Use {\DVIPSONE}' box is initially
checked for a given printer via an entry in {\dviwindoini}. Add a line
listing the ports on which you have PostScript devices.  This semicolon
separated list goes in the [Window] section of {\dviwindoini}. For example:   

\beginlines
€UseDVIPSONE=LPT1:;COM2:;FILE:€
\endlines

\noindent If you {\it never\/} want the `Use {\DVIPSONE}' check box checked, insert €UseDVIPSONE=BOGUS:€ instead.

{\Q Q19:} Timothy Van Zandt's PSTricks doesn't seem to work properly with {\DVIPSONE}.

{\A} PSTricks uses raw PostScript to do all the wonderful things it does.
Each printer driver creates a different PostScript environment, so PSTricks
needs to be told what {\DVIPSONE} requires. Look in the €\ps€ subfolder of
your main {\yandy} program folder for the file €pstricks.pro€ and in the
€\texinput€ subfolder for €pstricks.con€ (a {\TeX} header file), both of
which are specially modified to work with {\DVIPSONE}.

{\Q Q20:} {\DVIWindo} doesn't seem to recognize a new TrueType font I
installed. It shows up in `Fonts{\down}Show Fonts,' but when I use it in
{\TeX}, {\DVIWindo} complains it can't find it.

{\A} Check the name under which the font is installed, using the Registry
database editor. % as described in the answer to {\bf Q12}. % Q12 ???
It most probably does not match the `Full Name' in the font's 
€.ttf€ or €.fot€ file.
Use the {\SETUPTTF} utility with €-Z€ on the command line to check on the
names in the €.fot€ file. If the font is mistakenly installed under the
PostScript FontName instead of the PostScript FullName, reinstall it.
%  as described in the answer to {\bf Q12}.  % Q12 ???

{\Q Q21:} How can I tell {\LaTeX} to use the VI editor when {\LaTeX}
encounters a syntax error and I want to edit the line that is causing the
error?  

{\A} Add this to the [Environment] section of {\dviwindoini}:

\beginlines
€TEXEDIT=vi +%d %s€
\endlines

\noindent When (La){\TeX} encounters an error, instead of using `x' to
terminate execution, use `e' to edit the file. 

{\Q Q22:} How can I add a link to my VI editor in the `TeX' menu?

A: You can edit the `TeX' menu directly from {\DVIWindo} (refer to the main
manual). Alternatively, in the [Applications] section of {\dviwindoini} you
may want to add   

\beginlines
€VI|F9=c:\tools\cmds\vi.exe @.tex€
\endlines

\noindent so you will be able to press F9 whenever you want to edit the file
that you are viewing under {\DVIWindo}. (Substitute your setup's actual path
to €vi.exe€.)  Check that F9 isn't already used in another TeX menu entry.

{\Q Q23:} When I insert a PostScript level 2 {\EPS} file, pages of junk come
out of the printer. 

{\A} {\DVIPSONE} parses level 2 code properly, including binary data. However, 

\blist
\item An {\EPS} figure made for a level 2 printer will most likely not print
on a level 1 printer. Make sure your printer is level 2. 

\item An {\EPS} file containing binary data may not print over a serial or
parallel link even if the printer is a level 2 printer. Use an AppleTalk or
EtherNet connection --- both of which have separate job control channels ---
to avoid interpreting control characters in binary data as job control
commands.

\item When transferring an {\EPS} file containing binary data from a
Macintosh to an IBM PC, make sure that it is {\it not\/} treated as a text
file. Otherwise translation of line-termination characters will corrupt the
file's binary part.

% ÆMDRVØ\item If your {\EPS} file contains binary data, suppress {\DVIPSONE}'s own line-termination translation using the command line flag €-R€.ÆMDNMØ
% ÆMDRVØ96/Aug/26 (this is going to be the default now for safety)ÆMDNMØ
\endlist

\noindent In general, you should avoid binary data in {\EPS} files (except
for the {\TIFF} header). If possible, use {\TIFF} files for images instead of
{\EPS} files.  

{\Q Q24:} I get errors in €makefont€ and €scalefont€ on my imagesetter with
PostScript files produced by {\DVIPSONE}. 

{\A} You have an `Emerald'-based RIP (probably an Agfa Viper or Lino 50).
These have an error in the matrix multiplication arithmetic for the
€makefont€ and €scalefont€ operators. Use €-*A=10000€ on the command line
with {\DVIPSONE} for a workaround. 

{\Q Q25:} I print on A4 paper and rules (like division lines) near the top of
the page come out too low on the page.

{\A} You probably have a QMS 1660-2 or related printer. These printers have
an arithmetic overflow error which appears when using large coordinates. Use
€-*A=10000€ on the command line with {\DVIPSONE} for a workaround.  

{\Q Q26:} LucidaBright Roman (or some other upright font) shows italic in
{\DVIWindo}. 

{\A} Select the font in question in `Fonts{\down}Show Font.' Check all four
styles. If `{\sc *synthetic*}' shows up in the title bar, there is a problem
with the font files for that style. For example, the {\PFM} file may be
missing or corrupted. Reinstall the fonts. Alternatively, in rare cases, the
{\ATM} Quick Load Cache may get corrupted. In that case, delete the file
{\atmfontsqlc} (typically in €c:\psfonts€) and reboot your system. 

{\Q Q27:} When I print to my QMS printer, output from {\DVIPSONE} is shown as
{\ASCII} PostScript code instead of being interpreted as PostScript. But if I
`print to file' from {\DVIPSONE} and then copy that file to €lpt1:€
everything works fine. What gives?

{\A} Different printers use different methods to decide whether or not the
input data they receive is PostScript code. Some QMS printers require more
than just a line starting €%!PS-Adobe-3.0\...€. 
{\DVIPSONE} leaves out most header comment lines when sending output directly
to a printer. You can force it to include all header comment lines by using
€-Y€ on the command line.
 
% ÆMDRVØThe above may now be obsolete ?ÆMDNMØ

{\Q Q28:} {\DVIPSONE} is having problems printing to my Hewlett-Packard
PostScript printer. What might the matter be? 

{\A} {\DVIPSONE} cannot print if you have an application tying up the printer
port.  If you have trouble printing to an HP PostScript printer using
DVIPSONE, check your {\winini} file for €run=...€ or €load=...€ entries in
the €[Window]€ section, which may be loading a printer specific `print monitor'
or spooler.  Remove any such entries.   

See also €win95.txt€ in €doc-misc€.

{\Q Q29:} I'm having trouble printing to a networked PostScript printer. What gives?

{\A} First check whether you can print a PostScript file by copying it to the
port to which the printer is assigned. For example: 

\beginlines
€COPY c:\yandy\dvipsone\debug\printst1.ps LPT3:€
\endlines

\noindent You may need to talk to your network guru if this does not work.
Also please refer to €netprint.txt€ in your €doc-misc€ sub-folder.

Next, check `Font{\down}Show WinExe' in {\DVIWindo} to see what `port'
{\DVIWindo} is using when calling {\DVIPSONE}. If it is something like
€NE00:€, try and find out its `shared name' --- typically a UNC that starts
with €\\€. Try printing to that shared name.  

The easiest way to do this may be to
use `Preferences{\down}Command Line{\down}DVIPSONE' to add
the €-d=\\foo\bar€ command line option.  Equivalently, add a
line like €DVIPSONE= -d=\\foo\bar€ to the [Window] section of {\dviwindoini}.

You could also print using the {\DVIPSONE} entry in the `TeX Menu.' 
Edit this entry to add €-d=\\foo\bar€ (or whatever) after the €dvipsone.exe€.  

For additional information on network printing issues please refer to
€netprint.txt€ in €doc-misc€.

\vskip .05in

\noindent {\bf Note:}  For additional FAQs, check out our
web page.  In particular:
€http://www.YandY.com/faq-sys.htm€ and
€http://www.YandY.com/faq-fonts.htm€.

\subsect{{\yandyBold} TeX Flags and Arguments}

{\yandy} TeX understands the following command line arguments \& flags. Note that these items are {\it case sensitive}:

\blist
\item €?€ --- Show basic usage summary.

\item €8€ --- Truncate file names to {\DOS} $8+3$ format (FAT). {\DOS}
normally truncates file names to its $8+3$ file name convention. Under
Windows~NT and Windows~95/98, however, long file names are not truncated ---
which is, of course, normally an advantage. 
%
But if you have a dual-boot system with files stored on {\FAT} directories,
then {\yandy} TeX will not find files whose names have been truncated on the
file system (such as €tex.pool€, €lcircle10.tfm€, and €lcirclew10.tfm€. In
that case, use the €-8€ flag to truncate such long file names in {\yandy} TeX.

\item €a€ --- Write {\AUX} file in the specified folder (alternatively, set the environment variable {\TEXAUX}).

\item €c€ --- Don't look first in current directory for {\TFM} files.

\item €C€ --- Don't look first in current directory for input files.

\item €d€ --- Do not convert €\€ to / in format and file names. The default is to allow €\€ in the first argument on the command line, and hence {\it not\/} treat tokens starting with €\€ as {\TeX} control sequences. This applies to the second argument also, if the first is a format file. The conversion also applies to directories specified in environment variables. You can turn off this conversion of €\€ to / using €-d€ on the command line. (Note that {\DOS} treats / in file names just like €\€ --- except at the command prompt, where / indicates that an argument follows).

\item €e€ --- Hyphenation hash table size (for ini{\TeX} only). The default allocation of 1009 for hyphenation exceptions is typically one or two orders of magnitude more than is needed. You can, however, change the table size via €e=...€. Suppose, for example, that you want to read in a hyphenation dictionary of 25,000 words. Then you might want to use €-e=30000€ on the command line (i.e., about 25\% more than 25,000, to reduce the incidence of collisions in the hash table). This makes it possible to completely control hyphenation, {\it without\/} relying on €\patterns€.

\item €h€ --- Hyphenation pattern trie size (for ini{\TeX} only). Controlling the size of the hyphenation pattern trie via €-h=...€ can come in handy if you need to load up hyphenation patterns for several languages.

\item €H€ --- Set horizontal tab step interval for input lines (e.g., €-H=8€). {\TeX} normally treats a horizontal tab as a single `space' character. This can be annoying when reproducing verbatim program examples, where horizontal tabs may be used for spacing. With this flag set to €-H=€\angi{tab-step}, each tab is replaced by one or more spaces as needed to move to the next column which is a multiple of \angi{tab-step} characters from the beginning of the line. In many cases editors display program text with an implicit \angi{tab-step} of 8, although C language code often is displayed with an implicit \angi{tab-step} of 4 instead to provide for deeper nesting of levels.

\item €i€ --- Start up as ini{\TeX}: create format file (use €\dump€ at €*€ prompt).

\item €I€ --- Do not use format-specific {\TEXINPUTS} folder list. With this flag set, {\yandy} TeX will {\it not} look for an environment variable with a name equal to that of the format used (e.g., {\PLAIN} or {\LPLAIN} or {\LATEX}), even if such a variable is defined. It will instead always look for the {\TEXINPUTS} variable itself.

\item €j€ --- Convert from IBM OEM to Windows encoding when showing `non
{\ASCII}' characters.  See also €-w€.

\item €J€ --- Don't show paragraph line breaking statistics in log file.

\item €k€ --- Use key-replacement table for input characters. A keyboard replacement table (see section 4.1) can be set up from the command line, using €-k=€\angi{file-name}.

\item €K€ --- Suppress all extensions (revert to Knuthian {\TeX}). {\yandy} TeX has several extensions of `standard' {\TeX} that may provide additional on-screen and log file output (for example, showing missing character error information). Use the €-K€ command line flag if you want to revert to a completely `standard' {\TeX}. 

\item €l€ --- Write {\LOG} file in the specified folder (alternatively, set the {\DVIWindo} environment variable {\TEXLOG}).

\item €L€ --- Show file name (as well as line number) when reporting an error. Output is in the standard form produced by many C compilers. This makes it possible to use editor commands that read in the corresponding source file and position the cursor on the line in question. In Epsilon, for example, you can use €Alt+X next-error€ --- which may be bound to a key (e.g., Alt+E) for convenience (using €Alt+X bind-to-key€). {\sc warning}: Let {\TeX} finish before editing and writing out a new version of the source file. Remember that {\TeX} still has the source file open when it reports the error!

\item €m€ --- Initial memory size in kilo-words (for ini{\TeX} only). {\yandy} TeX allows most of {\TeX}'s various memory spaces to grow dynamically, but the definition of {\TeX} itself does {\it not\/} provide for growth in main memory while in ini{\TeX} mode. {\yandy} TeX's default is to allocate 64k words (i.e., 512k bytes) initially for {\TeX}'s main memory. In the unlikely event that you run out of memory while creating a new format, use €-m=...€ to increase the initial allocation. Note that this allocation is written into the format file and so also becomes the initial allocation when that format is used later (although at that point main memory {\it can\/} grow without constraint). If you have a PC with relatively little free extended memory, you may wish to create formats with small initial memory (8k words for plain {\TeX}). You can then run small {\TeX} jobs in less than 1.6 megabytes of free extended memory. {\yandy} TeX's speed is reduced a few percent when the initial memory allocation is that small, however. (Conversely, if you have lots of memory and often run large jobs, you may wish to use a larger initial allocation to gain some speed.)

\item €M€ --- Do not show `missing character' information on screen. Missing character information was of little importance when everyone just used Computer Modern fonts with their fixed `TeX Text' encoding scheme (which used all 128 positions on the 7-bit character code space). But now missing character information is {\it very\/} important for debugging font encoding problems, problems with {\TFM} files, and so on. Use the €-M€ command line flag to turn this feature off.

\item €n€ --- Do not allow non-{\ASCII} character codes in source files (complain if byte €>€ 127). Although {\yandy} TeX can, of course, handle arbitrary character codes from 0 to 255 in both input and output, sometimes input files use only the {\ASCII} range 32 to 127, and any non-{\ASCII} character indicates a typo. This flag asks {\yandy} TeX to check for such characters in input.

\item €N€ --- Don't show character code in decimal (in addition to hex).

\item €o€ --- Write {\DVI} file in the specified folder (alternatively, set the {\DVIWindo} environment variable {\TEXDVI}).

\item €O€ --- Don't show format file name in log file.

\item €p€ --- Allow use of €\patterns€ after loading formats. Normally {\TeX} refuses to allow redefinition of hyphenation patterns once a format has been dumped (or once typesetting has begun). It can, however, be very convenient to build {\TeX} formats incrementally, by using ini{\TeX} with an existing format specified on the command line. Use the €-p€ command line flag to allow €\patterns€ to flush previous definitions of hyphenation patterns.

\item €P€ --- Set TeX's default rule width to the specified value (default is 26214, or 0.4pt).

\item €Q€ --- Quiet mode (omit all stops and omit terminal output).

\item €r€ --- Do not allow Mac line termination (i.e., `return' instead of `newline'). The default is to allow `return' as a line terminator (as well as `newline' {\it and\/} `return' followed by `newline'). This is handy when dealing with files ({\TeX} source as well as {\EPS} files) ported from Macintosh or Unix. You can force {\yandy} TeX to instead open files in {\it text\/} mode using the €-r€ command line flag; with this flag in force, `return' alone will {\it not\/} act as a line terminator (i.e., standard {\DOS} behavior).

\item €R€ --- Run mode (omit all stops).

\item €S€ --- Scroll mode (omit error stops).

\item €T€ --- Normal (default) mode (stops at every opportunity to interact).

\item €v€ --- Be verbose (show implementation version number).

\item €w€ --- Do not show non-{\ASCII} character codes in hex. {\TeX}
normally shows non-{\ASCII} characters in screen output using hexadecimal
notation 
% (e.g., €^^fe€ 
(e.g., {\tt \char142\char142€fe€ }
is character code 254). Use this flag to instead show
the character `as is.' This is useful if the font encoding you specify is
that used by the underlying operating system (e.g., local {\DOS} code page
in the case of {\DOS}, in which case accented characters will display
properly); see also €-j€

\item €W€ --- Don't use {\dviwindoini} for environment variable lookup.

\item €x€ --- Use non-{\ASCII} input character mapping table (€xchr[]€). The command line customization of the €xchr[]€ array comes in handy when using non-English keyboards (see section 4.1). Each line in the file specified contains two numbers defining one entry in the €xchr[]€ array. Input bytes matching the second number are replaced with the first number. For example, if you have the two lines €146 39€ and €145 96€ in the mapping file, then the internal {\ASCII} code 146 will be translated to 39 for output of error messages, file names and log files, and the internal {\ASCII} code 145 will be translated to 96. Conversely, in input the numeric code 39 (`quoteright' in {\ASCII}) will be translated to 146 (`quoteright' in Windows {\ANSI}), while numeric code 96 (`quoteleft' in {\ASCII}) will be translated to 145 (`quoteleft' in Windows {\ANSI}). Character codes not mentioned in the file are not translated. Ideally you would want to set up the €xchr[]€ array as a {\it permutation}, so that {\TeX} can construct an exact inverse for the €xord[]€ array which is used on input. (See {\tensl The {\TeX}book} for additional details.) Note that you typically don't want to use the €-x€ argument while building formats, since the source files for formats mostly are set up for {\ASCII}.

% \item €z€ --- Do not discard Ctrl+Z at end of file; treat as character (code 26). {\yandy} TeX normally reads its input files in binary mode so it can deal with various line terminations, and so it can handle {\it all\/} 8-bit characters including Ctrl+Z. Because pre-{\DOS} text files on IBM PC compatibles used to be terminated with Ctrl+Z, {\yandy} TeX normally silently discards a Ctrl+Z if found at the very end of the file. 

\item €Z€ --- Show {\TFM} file names in log file (as well as source file names). Don't be surprised to see some {\TFM} files listed more than once. {\TeX} needs to read copies of the {\TFM} file for every size at which a font is used. Also remember that {\TeX} format files contain `frozen' font metric information. If font metric information for a font is incorporated in a format file, then {\TeX} will ignore any changes you make to the {\TFM} file. You'll be able to tell whether or not a {\TFM} file is being read by looking in the log file.
\endlist

\subsect{Flags and Arguments for DVIPSONE}

\subsub{DVIPSONE flags} Command line {\it flags\/} for {\DVIPSONE} are {\it case sensitive}. Here is a complete list:

\blist
\item €?€ --- show short usage summary

\item €g€ --- print only odd pages. This is useful for duplex (two-sided) printing.

\item €h€ --- print only even pages, in reverse order. We assume that page $2n$ is to be printed on the back of page $(2n-1)$.

\item €I€ --- ignore all €\special€s (useful if some of them crash the printer)
	
\item €j€ --- allow certain kinds of verbatim PostScript (and other potential pitfalls)

\item €J€ --- allow €/Encoding€ array to have less than 256 elements (optimization --- not recommended)

\item €k€ --- pretend that {\it all\/} fonts are printer resident (do not include any in PostScript output)

\item €K€ --- pretend that {\it no\/} fonts are printer resident (include all in PostScript output)

\item €L€ --- keep space byte before €ND€ in encrypted part of font

\item €M€ --- show command line (useful when called from another program)

\item €N€ --- do not deal with accented/composite characters in partial download

\item €O€ --- do not use standard €\b€, €\t€, €\n€, €\f€ abbreviations in strings

\item €P€ --- suppress partial font downloading (include complete fonts)

\item €Q€ --- do not strip junk from ancient Adobe fonts

\item €r€ --- output pages in reverse order. (Normally pages are printed in the order in which they appear in the DVI file.)

\item €S€ --- show font substitution table (useful for debugging substitution file)

\item €U€ --- convert all FontNames to upper case (CM, {\AMS}, Extra {\LaTeX} + {\SliTeX})

\item €v€ --- be verbose. List font file names and {\DVI} file pages as they are being processed. (In the default non-verbose mode, a `*' is used to denote each font file, while a `.' is used to denote each page processed.)

\item €V€ --- show complete font tables (useful for debugging font problems)

\item €W€ --- toggle whether or not Ctrl+D will be put in at end of PostScript output (normally done when going direct to printer, but not to file)

\item €X€ --- reencode text fonts to Windows {\ANSI} (equivalent to €TEXANSI=1€ in {\dviwindoini}; now obsolete with {\ENCODING} environment variable in that file)

\item €Y€ --- do not strip comments when sending output directly to the printer

\item €z€ --- avoid non-{\EPS} material in PostScript output (€jobname€, €DOCINFO, pdfmark€s, etc)

\item €Z€ --- do {\it not\/} pass through comments in {\EPS} files (dangerous with Adobe Illustrator {\EPS})
\endlist

\noindent {\it Several `extended' flags take an asterisk after the leading `€-€':}

\blist
\item €*2€ --- remap `space' (32 to 195, 13 to 176, 0 to 161)

\item €*3€ --- do not give up after seeing 64 errors

\item €*4€ --- show €counter[0]€$-$€counter[1]€ in €%%Page€ {\DSC} (instead of just €counter[0]€)

\item €*6€ --- do not write €pdfmark€s to PostScript output

\item €*7€ --- suppress background in €imagemask€ (monochrome images)

\item €*8€ --- send error output to €stdout€ instead of €stderr€ (so can redirect)

\item €*b€ --- keep black (suppress effect of €\special{color ...}€)

\item €*B€ --- use `return'$+$`newline' (default uses just `newline') in PostScript output (this will however break binary inclusions in {\EPS} files)

\item €*c€ --- allow color: allow use of €colorimage€ operator for {\TIFF}	(even though €colorimage€ is not a standard PostScript level 1 operator)

\item €*E€ --- do not check encoding for text fonts versus {\TFM} file checksum

\item €*f€ --- check whether fonts are loaded on printer before printing job (shows error page if a font is not found)

\item €*F€ --- reduce size of font table to save memory (16-bit version only)

\item €*G€ --- make 1-byte adjustment for error in GhostScript {\TIFF} files

\item €*H€ --- do not wrap €ps:€ code (i.e., treat like €ps::€) --- more like {\DVIPS}

\item €*i€ --- do not insert fonts specified by €%%IncludeFonts: ...€ in {\EPS} files

\item €*I€ --- bind all procedures at top of page (this is a speed up, but might not be safe when doing page imposition, color separation, etc.)

\item €*l€ --- do not force long form of octal strings (which is needed for Apple LaserWriter)

\item €*L€ --- output is for PostScript level 2 (use compression for inserted {\TIFF} images); see also €*Z€

\item €*m€ --- do not use {\texfontsmap} for font name aliases

\item €*M€ --- reduce size of font substitution table to save memory (16-bit version only)

\item €*O€ --- landscape printing

\item €*p€ --- do not pass through {\EPS} files

\item €*Q€ --- pass through control characters in {\EPS} files

\item €*r€ --- request duplex printing; see also €*w€

\item €*R€ --- Remap control character codes 0--9 to 161--170, 10--32 to 173--195

\item €*s€ --- do not pay attention €%%EOF€ {\DSC} comments and similar material in inserted {\EPS} files

\item €*S€ --- Allow figure inclusion €\special€ used by Scientific Word
% (€ps:...€)

\item €*T€ --- force standard form of encoding vector (write out in full)

\item €*w€ --- request tumble in duplex printing; see also €*r€

\item €*W€ --- try and prevent long lines in inserted PostScript and {\EPS} files

\item €*x€ --- add random prefix to font names

\item €*X€ --- replace aliases from {\texfontsmap} up front (not after failure to find {\PFB} file)

\item €*Z€ --- allow only {\ASCII}85 coding of {\TIFF} file derived images (not actual compression); see also €*L€
\endlist

\noindent If you use verbatim PostScript you need to use €j€. If you use color, then you need to use the command line flag €*c€ (and do not use €*b€). And if you have trouble with a clone PostScript interpreter, try removing some of the default optimizations (€O€, €L€, €Y€, €*T€, €P€), and do {\it not\/} turn on any of the optional optimizations (€N€, €Z€, €*l€).  Also try using €*s€ if you have problems with inserted {\EPS} figures.  Please notify {\yandy} if you can identify which optimization a particular clone is unable to handle.  We'd like to (i) complain to the source, (ii) provide a suitable workaround if possible, and (iii) warn other users about the problem.

\subsub{DVIPSONE arguments} Command line {\it arguments\/} for {\DVIPSONE} are also {\it case sensitive}. Here is the complete list:

\blist
\item €a€ --- {\AFM} metric file search path (not normally needed; used only if font substituted for --- better to set {\DVIWindo} environment variable {\AFMPATH} if required)

\item €A€ --- preamble file path (better to set {\DVIWindo} environment variable {\PREPATH})

\item €b€ --- beginning of page range (logical; €count[0]€ $-$ {\TeX} page number)

\item €B€ --- beginning of page range (physical; sequential % {\DVI} 
page count)

\item €c€ --- number of copies (uncollated). See also €*q€, below.

\item €C€ --- number of copies (collated --- {\it slow\/} printing). See also €*q€, below.

\item €d€ --- destination for output. Output gets sent to the designated device (€PRN€, €LPT1€, €LPT2€, €LPT3€, €AUX€, €COM1€, €COM2€ or a file). If the argument ends in `€:€' or starts with `€\\€' then it is considered a direct connection to a printer. If the argument is omitted, the output gets sent to a file in the current folder with the same name as the {\DVI} file, but with extension €.ps€. Another useful destination argument is €NUL€, which makes it possible to run a {\DVI} file through {\DVIPSONE} without producing printer {\it or\/} file output --- a quick way to determine whether the program can find all the required fonts and included illustrations.

\item €D€ --- size of PostScript dictionary €dvidict€ (default 256)

\item €e€ --- end of page range (logical; €count[0]€ $-$ {\TeX} page number). The arguments €-b=...€ and €-e=...€ may be used more than once, in which case €b€'s and €e€'s must alternate, although the sequence may start and end on either a €b€ or an €e€. If you only specify a beginning page, everything from that page on gets printed. If you only specify an ending page, everything up to (and including) that page is printed.

(In {\TeX}, there may be several pages with the same €count[0]€ `page number.' With €-b€ and €-e€, you can specify which `page group' you are referring to by appending a colon and the number of the page group. Each page group consists of pages with an ascending sequence of page numbers. A new group starts when a page number is not larger (in absolute value) than the previous page number. To select the page range 4--7 in the first group, for example, use €-b=4:1 -e=7€.)

\item €E€ --- end of page range (physical; sequential {\DVI} page count). The €-B=...€ and €-E=...€ arguments may also be used more than once. However, page ranges must be specified {\it either\/} using the lower case letters {\it or\/} the upper case letters --- you're not allowed to mix the two forms.

\item €f€ --- font search path (where {\PFB} files are located; better to set {\DVIWindo} environment variable {\PSFONTS})

\item €F€ --- add specified prefix to all font names

\item €i€ --- {\EPS} file search path (better to set environment variable {\PSPATH}). The {\DVI} file specifies a fully qualified file name for an inserted illustration, and {\DVIPSONE} attempts to open the file using that name. If this fails and an illustration path exists, the pathname is stripped off the file name, and the result appended to each of the paths in the illustration pathname in turn. If this also fails, then the file is searched for in the folder from which the {\DVI} file was read --- and finally in the current folder. The rationale is that {\DVIPSONE} may be running on a computer other than the one on which {\TeX} was run to create the {\DVI} file; thus, the folder structure may not be the same as it was when the {\DVI} file was created.

\item €G€ --- encoding vector path (better to set environment variable {\VECPATH})

\item €H€ --- font substitution file path (better to set environment variable {\SUBPATH})

\item €l€ --- paper size. Acceptable values are €letter€, €note€, €legal€, €folio€, €ledger€, €tabloid€, €executive€, €a2€, €a3€, €a4€, €a5€, €b3€, €b4€, €b5€, and €quarto€. You may also use \angi{w}€*€\angi{h} where \angi{w} and \angi{h} are width and height in points. The default is €letter€ format on PostScript printers. Note that PostScript commands for paper size specification tend to be device dependent.

\item €m€ --- magnification (if used twice: $x$ and $y$ magnification). Scale the output by the specified number, which need not be an integer (the default is 1.0).

\item €o€ --- counter-clockwise rotation about the center of the page (in degrees); thus, to obtain landscape printing, specify plus or minus 90.

\item €p€ --- {\PFM} metric file search path (not normally needed; used only if font substituted for --- better to set {\DVIWindo} environment variable {\PFMPATH} if required)

(In most cases, {\DVIPSONE} doesn't need font metric files {\it at all}. And when it does, only {\it one\/} of the possible forms need be present. If {\DVIPSONE} is run on the same computer system as that used to produce the {\DVI} file, then {\TFM} files must exist for the fonts used, since {\TeX} had to have access to them. But {\DVIPSONE} may be running on another system, so it is useful to allow for other sources of font metric information, particularly for fonts other than Computer Modern. {\DVIPSONE} first tries to find a {\TFM} file, because {\TFM} files are compact and can be read quickly. If this fails, it tries to find an {\AFM} file. It only looks for {\PFM} files if it can't find {\TFM} or {\AFM} files.)

\item €s€ --- font substitution file to use (declare fonts printer resident,
reencode fonts, etc). Font substitution files (and any encoding vectors
specified therein) are first searched for in the same folder as the {\DVI}
file being processed, and if not found there, in the home folder of
{\DVIPSONE}. This makes it convenient to override a general-purpose font
substitution file in the {\DVIPSONE} folder with a customized file of the
same name in the folder of the {\DVI} file being processed. More than one
substitution file may be specified by using €-s€ again.

\item €t€ --- {\TFM} metric file search path (not normally needed; used only if font substituted for --- better to set environment variable {\TFMPATH} if required)

\item €w€ --- prolog file to be inserted (may occur more than once)

\item €x€ --- shift in $x$. Move the output to the right by an amount in points (72 per inch) specified by the argument.

\item €y€ --- shift in $y$. Move the output down by an amount in points (72 per inch) specified by the argument.
\endlist

\noindent {\it Several `extended' arguments take an asterisk after the leading `€-€':}

\blist
\item €*A€ --- divide all coordinates by specified number (useful for getting around bugs in Viper based RIPs)

\item €*C€ --- minimum rule thickness (in scaled points)

\item €*D€ --- Add extra {\DSC} comment to the head of the PostScript file (e.g., €-*D=%%DocumentColor:€).

\item €*h€ --- specify frequency of halftone screen (default: use printer's default). €-*h=€\angi{n}€+€ means use $n$ or higher (if default is higher); €-*h=€\angi{n}€-€ means use $n$ or lower (if default is lower). Can also specify screen angle with second argument: €-h=73:45€, €-h=73+45€, €-h=73-45€

\item €*J€ --- default dots per inch for {\TIFF} files that don't specify resolution

\item €*P€ --- use specified €papersize€ for defining €%%BoundingBox€
\endlist

\subsect{DVIWindo Command Line Arguments}

In `normal' use, {\DVIWindo} needs no command line parameters (and cannot be
passed such parameters). However, it can be invoked (a) directly (by double
clicking on the {\DVIWindo} icon), (b) by double clicking on a {\DVI} file,
(c) by dragging and dropping a DVI file on an iconized {\DVIWindo}, (d) from
another Windows application, using `WinExec,' or (e) from a {\PIF} file. And
in the last two cases, you {\it can\/} supply a command line to indicate what
{\DVIWindo} is supposed to do. For example, you can ask the program to show a
selected page of a specified document, or to print a selected page range of
one or more {\DVI} files.

{\DVIWindo}'s command line flags and arguments, like {\DVIPSONE}'s, are preceded by €-€. Any item that does {\it not\/} start with €-€ is considered a file name. File name(s) should come after all command line flags and command line arguments. 

You can call {\DVIWindo} from another application to show a {\DVI} file. To
do so, simply specify

\beginlines
\angi{DVI-file}
\endlines

\noindent at the command prompt, providing the full path to the file.

The file extension €.dvi€ is associated with {\DVIWindo}
during installation.  This also means you can click on a link
to a {\DVI} file on the web in your browser and have it download
the {\DVI} file and launch {\DVIWindo} automatically.

You can have the {\DVI} file opened at a specific page. Just specify

\beginlines
€-p=€\angi{n} \angi{DVI-file}
\endlines

\noindent where \angi{n} is the desired page. Similarly, to call {\DVIWindo}
from another application just to print files, use the €-w€ command line
argument. For example:  

\beginlines
€-w="Apple LaserWriter II NT",pscript,COM1:€ \angi{DVI-file}
\endlines

\noindent Here, the first argument to €w€ is the device, the second is the driver and the third is the port (in the form found in {\winini}). The device name must be enclosed in double quotes if it contains spaces. The default printer is used if the device, driver and port are omitted (i.e., if only €-w€ appears).

When printing, you can also specify the number of copies using €-c=€\angi{n}, and a page range using €-b=€\angi{begin} and €-e=€\angi{end}. Page order can be reversed using €-r€, and you can print alternating pages using €-s€, or only odd pages using €-g€, or only even pages using €-h€. Finally, several files can be printed in one call, using wildcard characters in \angi{DVI-file}.

\subsect{Maintaining DVIWindo's Preferences}

{\DVIWindo}'s preferences are stored in the [Window] section of {\dviwindoini}. The following items are normally found in that section:

\blist
\item €Defaults€ --- {\DVI} file selection defaults.

\item €FileName€ --- Name of the last {\DVI} file viewed.

\item €Font€ --- Last font viewed in `Show Fonts.'

\item €Mapping€ --- Coordinate transformation for chosen screen scale and position

\item €Preferences€ --- Long list of boolean preference choices.

\item €Save€ --- Set to 1 if preferences are to be saved.

\item €Size€ --- Window position and size.

\item €SourceDefaults€ --- Source File selection defaults.

\item €SourceFileName€ --- Name of the last {\TeX} source file referred to in the `TeX' menu.

\item €Units€ --- Units selected for {\DVIWindo} measurement box.
\endlist

\noindent All of these items are controlled from various menus in {\DVIWindo}. The following optional entries are not --- you must add them to {\dviwindoini} using an {\ASCII} editor, if required:

\blist
\item €AdvancedGraphics=0€ --- Do not allow €AdvancedGraphics€ mode (Win32) (CTM €\special€)

\item €AllowTruncate=0€ --- Do not allow {\TFM} file name truncation (to {\DOS} 8.3).

\item €AllowVersion=0€ --- Do not allow mismatch in numeric suffix in TrueType font file name.

\item €Angle=45€ --- Control angle of screen in half-tones (see €Screen=1€).

\item €ANSITeX=0€ --- Do not remap control character range in {\ANSI} encoded fonts

\item €Aspect=0€ --- Do not constrain aspect ratio of zoom rectangle to match window.

\item €ATMPrefer=0€ --- Do not try to force selection of Type~1 fonts if possible.

\item €ATMExactWidth=0€ --- Do not force {\ATM} to use exact width for characters.

\item €AutoActivate=0€ --- Do not allow autoactivation of fonts with {\ATM} 4.0 (default is for {\DVIWindo} to read {\atmregatm} for font info).

\item €ClipRules=0€ --- Do not clip rules to window.

\item €CmdShw=...€ --- Control how Windows application appears when called from `TeX Menu.' Values: €0€ Hide, €1€ ShowNormal/Normal, €2€ ShowMinimized, €3€ ShowMaximized/Maximize €4€ ShowNoactive, €5€ Show, €6€ Minimize, €7€ ShowMinNoactive, €8€ ShowNA, €9€ Restore. Default is €1€; to show full screen set to €3€.

\item €ColorStable=1€ --- Use {\TeX} internal font numbers in `Color Font' palette (makes colors stable between jobs using the same format file).

\item €CommFind=0€ --- Use old Find/Search dialog box.

\item €CommFont=0€ --- Use old Font dialog box.

\item €CompressColor=0€ --- Do not compress 24-bit RGB to palette color ({\TIFF} images).

\item €DefaultTIFFDPI=300€ Dots per inch assumed for {\TIFF} files not containing resolution tag.

\item €Deslash=1€ --- Convert €\€ to €/€ in file names before calling applications from the `TeX' menu. Not required for {\yandy} TeX, which does its own conversion.

\item €DVIPSONE=...€ --- Command line flags and arguments to be passed to {\DVIPSONE}.

\item €Escape=0€ --- Do not quit {\DVIWindo} when `Escape' is hit.

\item €FontMap=0€ --- Do not use {\texfontsmap} font name aliasing.

\item €ForceTIFF=1€ --- Force search for {\TIFF} file corresponding to {\EPS} file (default: look only if specified {\EPS} file has no extension).

\item €Frequency=...€ --- Control frequency of screen in halftones (default: use device default).

\item €HyperText=0€ --- Turn off hypertext support.

\item €IgnoreBadEncoding=1€ --- Ignore certain types of encoding errors:
Control characters used in {\ANSI} encoded (i.e., text) fonts. 
(Typically because of TrueType CM fonts marked
incorrectly as `text' fonts). 

\item €IgnoreBadInstall=1€ --- Ignore errors in TrueType font names (better solution: run {\SETUPTTF} utility).

\item €IgnoreFontCase=0€ --- Take into account font case when checking whether Windows supplied the requested font

\item €IgnoreLigatures=0€ --- Do not step over apparent ligatures in {\DVI} file search.

\item €ISOTROPIC=0€ --- Do not mark output Metafiles as €MM_ISOTROPIC€ (which means they can be scaled anisotropically).

\item €KeepZeroKern=1€ --- Keep kern pairs of zero width when writing {\AFM} file.

\item €LongNames=0€ --- Show abbreviated short names in File Open dialog box.

\item €MagBase=...€ --- Base of magnification steps (default 1000).

\item €MaxBright=...€ --- Value between 0 and 255. Colors brighter than this do not get considered for `Color Fonts.' 

\item €MaxDocuments=...€ --- Length of Most Recently Used Document list		(default 8 on hires screens, 4 on lores screens).

\item €PaletteOffset=...€ --- Value between 0 and 255. Shift color table in `Color Fonts.'

\item €PassSize=0€ --- Do not pass page size to {\DVIPSONE} when printing.

\item €PassOrientation=0€ --- Do not pass page orientation to {\DVIPSONE} when printing

\item €PassDuplex=0€ --- Do not pass duplexing information to {\DVIPSONE} when printing

\item €PreventConflict=0€ --- Allow painting of screen while called application is running

\item €RawSpecial=1€ --- Allow figure inclusion €\special€ used in OzTeX and Psprint.

\item €RefreshDelay=1€ --- How many clock ticks to delay refreshing screen (default is to refresh on clock tick where change in {\DVI} file is noticed).

\item €Remap=0€ --- Turn off remapping of control character range (0--31 to 161--195).

\item €Remap=1€ --- Current default. Remap control character range if a `TeX' font.

\item €Remap=2€ --- Always remap control character range.

\item €SciWord=1€ --- Allow {\EPS} figure inclusion €\special€ from Scientific Word.

\item €Screen=1€ --- Use elliptical screen, not device halftone screen.

\item €Share=0€ --- Turn off periodic checking of {\DVI} file for new version (avoid some sharing problems --- but no automatic refresh).

\item €ShowMetaFile=0€ --- Turn off Windows MetaFile support.

\item €ShowName=0€ --- Suppress placement of file name in {\EPS} rectangle.

\item €SmallStep=1€ --- Magnification increments approximately 10\% (not approximately 20\%).

\item €SnapTo=0€ --- Do not grid fit coordinates for rules.

\item €StretchColor=0€ --- Don't expand color range to fill available gamut.

\item €StretchGray=0€ --- Do not expand gray level range to fill black-white range.

\item €StringLimit=8€ --- Maximum number of characters allowed in a displayed string before €TextOut€ can affect on-screen spacing (particularly for fixed width fonts; see section 2.8).

\item €StripPath=1€ --- Strip path from €?€ replacement in menu call

\item €TeX=...€ --- Command line flags and arguments to be passed to {\yandy} TeX.

\item €TTRemap=1€ --- Remap control character range in TrueType fonts.

\item €TTFontSection=0€ --- Do {\it not\/} look in [TTFonts] section of {\winini} (this section is set up by {\SETUPTTF}).

\item €TTOnly=1€ --- Use/allow only TrueType fonts.

\item €T1Only=1€ --- Use/allow only Type~1 fonts.

\item €UseATMFontInfo=0€ --- Use €ATMGetFontInfo€ (Win32 only).

\item €UseATMINI=0€ --- Do not use {\atmini} for Type~1 font information. €1€ use {\atmini} if {\ATM} loaded properly, €2€ always use {\atmini} (default €1€ in Win16 and €2€ in Win32).

\item €UseBaseFont=0€ --- Do not share metric information for different font sizes.

\item €UseCTM=0€ --- Do not translate certain verbatim {\PS} sequences into	equivalent CTM €\special€s for rotation and scaling (Win32).

\item €UseDVIPSONE=...€ --- Printer ports on which {\DVIPSONE} should be used for printing (use semicolons to separate multiple ports; e.g., €FILE:;LPT1:€). Can be overridden temporarily by check box in `Print' dialog.

\item €UseGetProfileATM=1€ --- Use €GetPrivateProfile€ on {\atmini} (default is to read the file directly, which is faster).

\item €UseGetProfileTT=0€ --- Do not use €GetPrivateProfile€ on {\winini} (default is to use €GetPrivateProfile€, which is safer).

\item €UseRegEnumValue=0€ --- Do not use €RegEnumValue€ to read registry directly for fonts.

\item €UseRegistry=1€ --- Call {\REGEDIT} to write out registry in {\ttfontsreg} and read that.

\item €UseTEXINI=0€ --- Do not try to look for generic font substitution €dviwindo.fnt€.

\item €UseTTFINI=0€ --- Do not use {\winini} for TrueType font information. €1€ use {\winini} if TrueType enabled, €2€ always use {\winini} (default €1€ in Win16 and €2€ in Win32)

\item €UseTTMapping=0€ --- Do not set up TrueType font name mapping table ahead of time

\item €UseUSRINI=0€ --- Do not try to look for specific font substitution \angi{filename}€.fnt€. 

\item €WarnOnce=1€ --- Warn only once about TrueType font name problems.

\item €WorkingDirectory=...€ --- The location where you want {\TeX} to deposit {\DVI} files when called from the `TeX' menu. Omit (or set to €NUL€) to have {\TeX} work instead in the folder of the source file.
\endlist

\noindent The {\dviwindoini} file has an [Environment] section which overrides any {\DOS} environment variables set for {\DVIWindo}, {\DVIPSONE} and {\yandy} TeX. To disable this feature, set the {\DOS} environment variable {\USEDVIWINDOINI} to zero in your {\autoexecbat} file:

\beginlines
€SET USEDVIWINDOINI=0€
\endlines

\subsect{Fine Points of DVIWindo's `TeX' Menu}

Following is some additional information on setup and maintenance of {DVIWindo}'s `TeX' menu.

\blist
\item When an application is called from the `TeX' menu, the current working folder is set either to (i) the folder specified by €WorkingDirectory=...€ in the [Window] section of {\dviwindoini} (if you specified a common working directory during installation), or (ii) the folder of the file being processed. So, if you do not have a €WorkingDirectory=...€ entry and you are using the €#€ syntax to search for a file, then the current folder gets set to the folder in which that file is found.

\item Suppose you want to set the current folder to the one in which a particular file is found, but you also want to pass the name of that file {\it without\/} path or extension to a batch file. Just use the €*€ option:

\beginlines
{\parindent=1pc
€MyHack=mybatch @.tex *€
}
\endlines

\noindent This construct calls €mybatch.bat€ with two arguments, the second being the name of the file without path or extension. It also sets the current folder (unless €WorkingDirectory€ is set).
\endlist

\noindent As noted elsewhere, the `TeX' menu's setup gets maintained in the [Applications] section of {\dviwindoini}. Following is a rather lengthy sample [Applications] section, showing lots of possibilities.

% ÆMDRVØManual indent adjustment in this sectionÆMDNMØ
\beginlines
{\parindent-6\p@
€; Note: Add WorkingDirectory=... if DVI files should go in common place.€
€; Note: Do NOT specify a `working directory' in the PIF files.€
€;€
€;€
€;€
€;€€[Applications]€
€; Windows DOS box (full screen)€
€DOS Full Screen|F2=c:\yandy\dviwindo\dosprmpt.pif€
€; Windows DOS box (windowed)€
€DOS Windowed|F3=c:\yandy\dviwindo\doswinpt.pif€
€; Call Windows Notepad with TeX file corresponding to current DVI file€
€Notepad|F4=c:\windows\notepad @.tex€
€; Call PFE Editor with TeX file corresponding to current DVI file€
€PFE Editor|F11=C:\yandy\pfe\pfe32.exe @.tex€
€;Switch to already-open PFE Editor€
€-> PFE Editor|C-F11=$Window(Programmer's File Editor)€
€; Call vedit, vi, CodeWright, qedit, your favorite editor, similarly€
€;€
€; Following creates a line in menu€
€Separator1=Line€
€;€
€; Note: more control if you call DVIPSONE from `Print' in `File' menu€
€DVIPSONE|F12=c:\yandy\dvipsone\dvipsone.bat -d=lpt1 *€
€;€
€Separator2=Line€
€; Following for creating new formats using iniTeX (-i on command line)€
€iniTeX|F9=c:\yandy\yandytex\initex.bat "Format Source File|plain" "Format Menu Name|TeX"€
€Separator3=Line€
€TeX|F5=c:\yandy\yandytex\tex.bat @.tex€
€AMSTeX|F6=c:\yandy\yandytex\tex.bat +amstex @.tex€
€LaTeX 2.09|F7=c:\yandy\yandytex\tex.bat +lplain @.tex€
€LaTeX 2e|F8=c:\yandy\yandytex\tex.bat +latex @.tex€
}
\endlines

\subsect{Flags and arguments for AFMtoTFM}

The {\AFMtoTFM} utility, found in the €\util€ subfolder of your main {\yandy} program folder, provides an extensive array of options that you can use when creating {\TFM} files from {\AFM} sources. Here is a complete list (note that flags and arguments are {\it case sensitive\/}):

\vskip .25in\noindent {\bf Command line flags:}
\blist
\item €?€ --- show usage summary

\item €0€ --- do not ignore zero width kerns

\item €1€ --- do not add some `TeX Text' characters (16--32) if Windows {\ANSI}

\item €a€ --- insert 5 standard {\TeX} f-ligatures and 6 pseudo ligatures for endash, emdash, questiondown, exclamdown, quotedblleft, quotedblright

\item €b€ --- backward compatability (old style {\TFM}) limit to 255 kern pairs

\item €B€ --- suppress bold; pretend font is not bold (for Textures)

\item €d€ --- insert 5 pseudo ligatures for guillemotleft, guillemotright, quotedblbase, lslash, Lslash

\item €E€ --- direct error output to €stdout€ instead of €stderr€ (so can redirect error output to file)

\item €f€ --- insert just the 6 standard pseudo ligatures (those inserted by €a€, minus f-ligatures)

\item €I€ --- suppress italic; pretend font is not italic (for Textures)

\item €j€ --- insert pseudo ligatures for the 58 standard accented characters

\item €L€ --- allow ligatures for fixed pitch font (default is to suppress ligatures for fixed width fonts)

\item €M€ --- use Macintosh $5+3+3$\dots contracted font name for €FontID€

\item €n€ --- suppress ligatures listed in {\AFM} file (default: use ligatures in {\AFM} file unless fixed pitch font)

\item €q€ --- do not allow ligatures based on `dotlessi' (e.g., €\'\i€)

\item €Q€ --- allow ligatures based on `i' (e.g., €\'i€)

\item €S€ --- add glyphs borrowed from Symbol font if Macintosh encoding used

\item €t€ --- insert €codingscheme€ and €fontID€ in the way Textures needs

\item €u€ --- retain underscores in file names (default is to strip trailing underscores so €tir_____€ becomes €tir€)

\item €v€ --- verbose mode

\item €x€ --- do not extend file name with `x' if font is reencoded (default is to append `x' to name to distinguish from unencoded version, unless name already ends in `x').

\item Character spacing options:

\noindent €P€ --- €spacestretch=spacewidth/2€ and €spaceshrink=spacewidth/6€

\noindent €J€ --- €spacestretch=spacewidth/3€ and €spaceshrink=spacewidth/3€

\noindent €R€ --- €spacestretch=spacewidth*3/5€ and €spaceshrink=spacewidth*6/25€

\noindent €N€ --- €spacestretch=(spacewidth*3/5+160)/2€

\noindent and €spaceshrink=(spacewidth*3/10+110)/2€

\noindent Default:  Use €Comment Space€ \angi{width} \angi{stretch} \angi{shrink} line in {\AFM} file or (if not given) €spacewidth=300€, €spacestretch=160€, €spaceshrink=110€, except €spacewidth€ is overridden by width of `space' character if found. Can be overriden from command line using €-s=...€; see below.
\endlist

\noindent {\bf Command line arguments:}
\blist
\item €c€ --- encoding vector to use (default: use encoding in {\AFM} file)

\item €C€ --- use given checksum (specified in hex) for {\TFM} file (default: compute checksum based on font encoding name)

\item €e€ --- extra space (at end of sentence) (default: read €Comment ExtraSpace€ line in {\AFM} or (if not given) €((500-spacewidth)+110)/2€ if €spacewidth <€ 500, else 110

\item €l€ --- minimum kern width (smaller kerns will be discarded)

\item €m€ --- maximum number of kern pairs per character

\item €O€ --- path for output (default: current directory)

\item €p€ --- path for encoding vectors (default: {\VECPATH} environment variable)

\item €s€ --- width of space; can also give 3 values €-s=€\angi{n1}€:€\angi{n2}€:€\angi{n3} which will be €spacewidth€, €spacestretch€, €spaceshrink€

\item €Z€ --- `italic fuzz' italic correction adjustment (default 30), where €(xur+italic fuzz)=(width+italic correction)€
\endlist

\subsect{Batch and PIF files}

You will normally not have to modify the basic batch files used by the
{\yandy} TeX System. But the example provided by these batch files may help
if you choose to set up batch files for additional entries in {\DVIWindo}'s
`TeX' menu, as shown above. (Linking to a program via a batch file can often
provide more flexibility than calling the program directly.) 

% In the {\PIF} Editor (Windows~NT 3.5x) or the
In the Properties dialog % (Windows~95/98 or Windows~NT 4.x) 
for a batch file or program, the optional
parameter €?€ forces Windows to prompt you to supply a target file name. 
You can also select whether you want the program or batch file to run full
screen or windowed, and whether the window will be automatically closed upon
exit.  You get to the Properties dialog by right clicking on the 
title bar of the window when the console application is running.
This creates or modifies an existing {\PIF} file.

% It is, in fact, {\it not\/} necessary to specify a Program File Name at all,
% only a Window Title. Although the PIF Editor complains when it doesn't see a
% Program File Name, it nevertheless accepts such an entry. As long as the
% Window Title is correct, the resulting PIF file will do what you specify ---
% and will not require alteration even if you later change the location of the
% program or batch file involved. (The location would, of course, have to be a
% folder on your {\PATH} in both cases.) 

% ÆMDRVØdoes this need to be revised in view of Windows~95/98 ?ÆMDNMØ

Here is €tex.bat€ (if your main {\yandy} program directory is something other than €c:\yandy€, the line containing the directory name will be appropriately modified):

\beginlines
€@echo off€
€rem show current directory and command line€
€chdir€
€echo %0 %1 %2 %3 %4 %5 %6 %7 %8 %9€
€c:\yandy\yandytex\yandytex.exe -v -L %1 %2 %3 %4 %5 %6 %7 %8 %9€
€if not errorlevel 1 goto end€
€rem pause, but only when run from command prompt in Windows€
€set | find "windir=" > NUL€
€if not errorlevel 1 pause€
€:end€
\endlines

\noindent And here is €latex2e.bat€ (€latex209.bat€ is similar). We don't really need this one, since the €+latex€ can merely be passed as the first argument to €tex.bat€ (as above, a line may be different if your main {\yandy} program directory is something other than €c:\yandy€):

\beginlines
€@echo off€
€rem show current directory€
€chdir€
€echo %0 %1 %2 %3 %4 %5 %6 %7 %8 %9€
€C:\yandy\yandytex\yandytex.exe +latex -v -L %1 %2 %3 %4 %5 %6 %7 %8 %9€
€if not errorlevel 1 goto end€
€rem pause, but only when run in DOS box in Windows€
€set | find "windir=" > NUL€
€if not errorlevel 1 pause€
€:end€
\endlines

\subsect{TPIC Command List}

{\TPIC} commands are 2-letter words followed in some cases by numeric arguments. They are generated by some {\LaTeX} style files such as {\eepicsty}; you can also invoke {\TPIC} commands directly, as in

\beginlines
€\special{€\angi{command} [\angi{argument(s)}]€}€.
\endlines

\noindent The command words are meant to be mnemonic (but are mostly mnemonic only in a somewhat misleading way):

\blist
\item €pn €\angi{n} --- set pen width for stroking to \angi{n} milli-inches.

\item €bk€ --- flag next graphic to be filled, and set gray level for fill to 1 (black).

\item €wh€ --- flag next graphic to be filled, and set gray level for fill to 0 (white).

\item €sh [€\angi{g}€]€ --- flag next graphic to be filled, and set gray level for fill to \angi{g} if optional argument is specified; otherwise set gray level to 0.5 (the default).

\item €tx €\angi{hex} --- use specified bit pattern for filling. This is typically translated to an equivalent gray level.

\item €pa €\angi{x} \angi{y} --- add the point \angi{x} \angi{y} to the current path. That is, move to \angi{x} \angi{y} if this is the first point in new path, or else add a line extending to \angi{x} \angi{y} to the path being accumulated.

\item €fp€ --- stroke a solid polygonal line defined using a sequence of €pa€ commands. If shading was requested using €bk€, €gr€ or €wh€, then also fill the shape defined by closing the figure.

\item €ip€ --- fill the polygonal shape that was defined by a sequence of €pa€ commands. Use the gray level specified by €bk€, €gr€ or €wh€. The shape is first closed if necessary.

\item €da €\angi{l} --- stroke a dashed polygonal line defined using a sequence of €pa€ commands. Argument \angi{l} is the length of dashes, and also the inter-dash interval (specified in {\it inches\/}). The length of the dash is adjusted so that each line starts and ends with a full-length dash. If shading was requested using €bk€, €gr€ or €wh€, then also fill the shape defined by closing the figure.

\item €dt €\angi{l} --- stroke a dotted polygonal line defined using a sequence of €pa€ commands. Argument \angi{l} is the interval between dots (specified in {\it inches\/}), which is adjusted so that each line starts and ends with a dot. If shading was requested using €bk€, €gr€ or €wh€, then also fill the shape defined by closing the figure.

\item €sp [€\angi{l}€]€ --- stroke a quadratic spline through the midpoints of the lines defined using a sequence of €pa€ commands. The spline starts with a straight line from the first point to the midpoint of the first line. The spline ends with a straight line from the midpoint of the last line to the last point. If the optional \angi{l} is omitted (or zero), the spline is stroked solid. If \angi{l} is positive, it gives the length of the dashes and the interval between dashes to be used (in {\it inches\/}). If \angi{l} is negative, its magnitude indicates the interval between dots to be used (in {\it inches\/}).

\item €ar €\angi{xo} \angi{yo} \angi{xr} \angi{yr} \angi{sa} \angi{ea} --- stroke an elliptical arc. The center of the ellipse is at \angi{xo} \angi{yo}. The major and minor axes are aligned with the coordinate-system axes. The horizontal and vertical semi-axes have lengths \angi{xr} and \angi{yr}, respectively. The arc goes clockwise from the starting angle \angi{sa} to the ending angle \angi{ea}. If shading is requested using €bk€, €gr€ or €wh€, then also fill the shape defined by closing the figure.

\item €ia €\angi{xo} \angi{yo} \angi{xr} \angi{yr} \angi{sa} \angi{ea} --- fill elliptical arc after closing the figure. Use the gray level specified by €bk€, €gr€ or €wh€. The center of the ellipse is at \angi{xo} \angi{yo}. The major and minor axes are aligned with the coordinate-system axes. The horizontal and vertical semi-axes have lengths \angi{xr} and \angi{yr}, respectively. The arc goes clockwise from the starting angle \angi{sa} to the ending angle \angi{ea}.
\endlist

\noindent Note that {\TPIC} state information, such as pen width and gray level, can {\it not\/} be carried across page boundaries; for otherwise, page independence would be lost.

Be aware of several issues when using the {\TPIC} commands, especially if maximum portability is a concern. Always specify the pen-width using €pn€ before starting to put together a new polygonal path or drawing an elliptical arc. And always explicitly set the gray level if filling is desired, using €bk€, €wh€ or €sh€.

\subsect{Modifying CM Text Fonts for TeX 'n ANSI Encoding}

We do not particularly recommend modifying the Computer Modern text fonts so that on-the-fly reencoding applies to them. Although doing so has some advantages --- such as providing access to ready-made accented characters --- there are several drawbacks. One is that the {\CM} text fonts lack several glyphs users expect to find in text fonts (such as left and right braces, less, greater, backslash, underscore, bar, quotesingle, quotedbl, asciitilde, and asciicircumflex). Another is that {\DVI} files made for the modified {\CM} fonts will not be portable: users employing {\CM} fonts in the `normal' way cannot use DVI files made for the modified fonts, and vice versa. And perhaps most seriously, by modifying {\CM} text font for TeX 'n {\ANSI} encoding you lose the 11 upright upper case Greek letters, since they are buried in the text fonts (but see below for a workaround).

If you do use modified {\CM} fonts, you should add €\input texnansi€ to your source files. Note, too, that you do not want to touch the {\it math\/} fonts --- the ones whose names start with CMEX, CMMI, CMSY, CMMIB or CMBSY. Finally, note that only {\DVIWindo} supports on-the-fly reencoding. If you want to reencode your {\CM} fonts for use with other Windows applications, see section 2.5.

If all of this hasn't dissuaded you, proceed as follows:

You need the original {\AFM} files, found on diskette C of the 3-diskette {\CM} font set from {\yandy}. You should build up the new {\PFB} and {\PFM} files in an empty temporary folder. Assuming that all your {\PFB} files are in €c:\psfonts€ and all your {\AFM} files have been copied to €c:\psfonts\afm€,

\nlist
\item From a command prompt, create an empty temporary folder and make that the current folder.

\item `Standardize' the {\PFB} files (i.e., replace the encoding with €/Encoding StandardEncoding def€) using the {\REENCODE} utility, as described in section 2.5.3. (Do {\it not\/} reencode to the encoding vector you want to use later.)

\item Make new {\PFM} files that are set up for Windows {\ANSI} encoding, using {\AFMtoPFM}. (Again, do {\it not\/} reencode to the encoding vector you want to use later.)

\item Make new {\TFM} files for {\TeX} (specifying the new encoding vector via €-c€ on the command line), and copy them to a folder in the list of folders specified by the {\TEXFONTS} environment variable.

\item From the {\ATM} Control Panel, select the {\CM} text fonts and click `Remove.'

\item From the {\ATM} Control Panel, click `Add.' Navigate to the temporary folder containing the new {\PFB} and {\PFM} files. Click `Add' again.

At this point, you can check whether everything has worked as expected by
using `Show Fonts' from the `Fonts' menu in {\DVIWindo}. You should see the
new character layout (as defined by the value of {\ENCODING}, including
ready-made accented characters. (If you have displayed Computer Modern fonts
since you launched Windows, but before you made the change, you may have to
exit and relaunch Windows for the changes to take hold.)  

% The 11 upper case upright Greek letters should have disappeared from the
% layout. If you want to avoid losing access to them in the modified {\CM} text
% fonts, you may want to make a modified version of {\texnansivec} --- say,
% {\cmanansivec} --- by copying the 11 lines for the upright Greek letters from
% {\textextvec}. You will then have to move `dotaccent,' `hungarumlaut,'
% `ogonek' and `fraction' elsewhere if you need access to those glyphs (and
% make a modified copy of {\texnansitex}).

% ugh, what a mess!

\item Add €\input texnansi€  to your plain {\TeX} or {\LaTeX}~2.09
source files.  In {\LaTeXe} use instead €\usepackage[LY1]{fontenc}€.

\item To be politically correct you should also rename the modified fonts so
there is no confusion with the `original' {\CM} fonts. 
\endlist

\subsect{Using the Old Adobe LucidaMath Fonts}

Using Adobe's old LucidaMath fonts with {\TeX} is a nontrivial process. {\TeX} insists on using the character range 0--31. Adobe has moved the characters in that range to 161--195 instead, presumably assuming that no one would have real characters in the control character range. (This is called `Lucida Math remapping.')

To get around this problem first use the {\REENCODE} utility to reencode the math fonts so that the characters show up in 0--31. (Actually, for various reasons it makes sense to have the characters show up in {\it both\/} 0--31 and 161--195.)

When the re-encoding process is done, use {\AFMtoTFM} to make suitable {\TFM} files for use with {\TeX} --- again, using the {\AFM} files supplied with {\DVIPSONE}:

\beginlines
€afmtotfm -vx -c=mathsy lms.afm€
€afmtotfm -vx -c=mathit lmi.afm€
€afmtotfm -vx -c=mathex lme.afm€
\endlines

\noindent Now copy the new {\TFM} files to where {\TeX} expects to find them. You can then refer to the fonts in your {\TeX} source files, e.g.,

\beginlines
€\font\lmi=lmi€
\endlines

\noindent For proper operation of the math fonts, use {\plaintex} (for plain
{\TeX}) or {\lfontstex} (for {\LaTeX} 2.09) as a template for making your own
definitions, simply replacing `cmsy*' with `lms,' `cmit*' with `lmi,' and
`cmex*' with `lme' at the appropriate point sizes. You can either load these
new definitions on top of an existing format such as plain {\TeX} or
{\LaTeX}, or make up a new format using ini{\TeX}. 

To use the fonts with {\DVIWindo}, you need to reencode the math fonts so that the characters show up both in 0--31 and 161--195. To get the required outline fonts:

\beginlines
€reencode -vtx -c=mathsy lms.pfb€
€reencode -vtx -c=mathit lmi.pfb€
€reencode -vtx -c=mathex lme.pfb€
\endlines

\noindent Here we assume that {\mathsyvec}, {\mathitvec} and {\mathexvec} are in the current folder or in the {\DVIPSONE} subfolder, and that the {\PFB} files are in the current folder. The €t€ on the command line adds the Lucida Math remapping.

Note that the three Adobe LucidaMath fonts have {\it exactly\/} the same characters as the corresponding {\CM} math fonts (just in the `wrong' places) --- which is why you can use the {\CM} math font encoding vectors.

To get the required {\PFM} files:

\beginlines
€afmtopfm -vsdtx -c=mathsy lms.afm€
€afmtopfm -vsdtx -c=mathit lmi.afm€
€afmtopfm -vsdtx -c=mathex lme.afm€
\endlines

\noindent The €s€ and €d€ on the command line prevent reencoding to Windows {\ANSI}, and the €t€ adds the Lucida Math remapping.

Now use the {\ATM} Control Panel to `Remove' the old LucidaMath fonts, if installed, then `Add' the three `new' LucidaMath fonts.

Some miscellaneous notes on Adobe's LucidaMath:

\blist
\item The names of the original {\PFB} and {\PFM} files are padded out to eight characters with underscores. This is for the benefit of Adobe font downloaders. You can omit these underscores on the command line --- the utilities will try to extend the name with underscores if they do not find the file right away. In fact, for use with {\TeX}, it is inconvenient to use font names with underscores. The {\TFM} file can use the name without the underscores, since {\DVIPSONE} and {\DVIWindo} will extend the name if needed.

\item The key to any reencoding project is consistency. Simply ensure that the {\PFB}, {\PFM} and {\TFM} files are all made using the same encoding, and make sure that both the {\PFB} and {\PFM} file have the duplicate LucidaMath encoding.

\item Be careful when replacing fonts to avoid confusing {\ATM} or Windows.
First `Remove' the old version if it has been installed. Also, make sure the
folder you install from contains {\it only\/} the new {\PFB} and {\PFM}
files, not the old ones. Otherwise confusion will reign since two different
{\PFB} or {\PFM} files will refer to the same Windows Face Name. 

\item Do not simply overwrite the {\PFB} and {\PFM} files, and never directly replace {\PFB} or {\PFM} files while Windows is running.
\endlist

\subsub{Sample macros for Adobe LucidaMath} Following are some basic macros
for replacing the {\CM} math fonts with Adobe LucidaMath fonts: 

\beginlines
€% Set up the basic set of fonts needed in plain TeX€
€% This uses Times-Roman, Times-Bold and Times-Italic for text.€
€\font\tenrm=tir \font\sevenrm=tir at 7pt \font\fiverm=tir at 5pt€
€\font\teni=lmi \font\seveni=lmi at 7pt \font\fivei=lmi at 5pt€
€\font\tensy=lms \font\sevensy=lms at 7pt \font\fivesy=lms at 5pt€
€\font\tenex=lme€
€\font\tenbf=tib \font\sevenbf=tib at 7pt \font\fivebf=tib at 5pt€
€\font\tentt=com \font\seventt=com at 7pt \font\fivett=com at 5pt€
€\font\tenit=tii \font\sevenit=tii at 7pt \font\fiveit=tii at 5pt€
€\skewchar\teni='177 \skewchar\seveni='177 \skewchar\fivei='177€
€\skewchar\tensy='60 \skewchar\sevensy='60 \skewchar\fivesy='60€
€%€
€\textfont0=\tenrm \scriptfont0=\sevenrm \scriptscriptfont0=\fiverm€
€\def\rm{\fam0 \tenrm}€
€\textfont1=\teni \scriptfont1=\seveni \scriptscriptfont1=\fivei€
€\def\mit{\fam1 }€
€\textfont2=\tensy \scriptfont2=\sevensy \scriptscriptfont2=\fivesy€
€\def\cal{\fam2 }€
€\textfont3=\tenex \scriptfont3=\tenex\scriptscriptfont3=\tenex€
€\textfont\itfam=\tenit€
€\textfont\slfam=\tensl€
€\textfont\bffam=\tenbf€
€\scriptfont\bffam=\sevenbf \scriptscriptfont\bffam=\fivebf€
€\textfont\ttfam=\tentt€
\endlines
%
%
%
\newpage

%%%%%%%%%%%%%%%%%%%%%%% TeX n ANSI %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Sometime will have to add the Euro ...

% \font\lbr=lbr at 20pt

% \font\lbr=lbr at 19pt

% ÆMDRVØModify font def for this section onlyÆMDNMØ
{
\font\lbr=lbr at 18pt

\section{TeX 'n ANSI encoding (character layout)}

\lbr

\vskip .1in
% \vskip .05in

\settabs 18 \columns

% was .11in for 19pt

\+&&0&1&2&3&4&5&6&7&8&9&A&B&C&D&E&F\cr

\vskip .25in

% \+0&&\char000&\char001&\char002&\char003&\char004&\char005&\char006&\char007&\char008&\char009&\char010&\char011&\char012&\char013&\char014&\char015\cr

% \+0&&.&.&.&.&.&\char005&\char006&\char007&.&\char009&.&\char011&\char012&\char013&\char014&\char015\cr

% \+0&&&&&&&\char005&\char006&\char007&&\char009&&\char011&\char012&\char013&\char014&\char015\cr

\+0&&&&&&\char004&\char005&\char006&\char007&\char008&&&\char011&\char12&&\char014&\char015\cr

% \+0&&&&&&\char009&\char005&\char006&\char007&\char013&&&\char011&\char012&&\char014&\char015\cr

\vskip .125in

\+1&&\char016&\char017&\char018&\char019&\char020&\char021&\char022&\char023&\char024&\char025&\char026&\char027&\char028&\char029&\char030&\char031\cr

\vskip .125in

\+2&&\char032&\char033&\char034&\char035&\char036&\char037&\char038&\char039&\char040&\char041&\char042&\char043&\char044&\char045&\char046&\char047\cr

\vskip .125in

\+3&&\char048&\char049&\char050&\char051&\char052&\char053&\char054&\char055&\char056&\char057&\char058&\char059&\char060&\char061&\char062&\char063\cr

\vskip .125in

\+4&&\char064&\char065&\char066&\char067&\char068&\char069&\char070&\char071&\char072&\char073&\char074&\char075&\char076&\char077&\char078&\char079\cr

\vskip .125in

\+5&&\char080&\char081&\char082&\char083&\char084&\char085&\char086&\char087&\char088&\char089&\char090&\char091&\char092&\char093&\char094&\char095\cr

\vskip .125in

\+6&&\char096&\char097&\char098&\char099&\char100&\char101&\char102&\char103&\char104&\char105&\char106&\char107&\char108&\char109&\char110&\char111\cr

\vskip .125in

\+7&&\char112&\char113&\char114&\char115&\char116&\char117&\char118&\char119&\char120&\char121&\char122&\char123&\char124&\char125&\char126&\char127\cr

\vskip .125in

% \bye

\+8&&\char128&\char129&\char130&\char131&\char132&\char133&\char134&\char135&\char136&\char137&\char138&\char139&\char140&\char141&\char142&\char143\cr

\vskip .125in

\+9&&\char144&\char145&\char146&\char147&\char148&\char149&\char150&\char151&\char152&\char153&\char154&\char155&\char156&\char157&\char158&\char159\cr

\vskip .125in

\+A&&\char160&\char161&\char162&\char163&\char164&\char165&\char166&\char167&\char168&\char169&\char170&\char171&\char172&\char173&\char174&\char175\cr

\vskip .125in

\+B&&\char176&\char177&\char178&\char179&\char180&\char181&\char182&\char183&\char184&\char185&\char186&\char187&\char188&\char189&\char190&\char191\cr

\vskip .125in

\+C&&\char192&\char193&\char194&\char195&\char196&\char197&\char198&\char199&\char200&\char201&\char202&\char203&\char204&\char205&\char206&\char207\cr

\vskip .125in

\+D&&\char208&\char209&\char210&\char211&\char212&\char213&\char214&\char215&\char216&\char217&\char218&\char219&\char220&\char221&\char222&\char223\cr

\vskip .125in

\+E&&\char224&\char225&\char226&\char227&\char228&\char229&\char230&\char231&\char232&\char233&\char234&\char235&\char236&\char237&\char238&\char239\cr

\vskip .125in

\+F&&\char240&\char241&\char242&\char243&\char244&\char245&\char246&\char247&\char248&\char249&\char250&\char251&\char252&\char253&\char254&\char255\cr
}

%%%%%%%%%%%%%%%%%%%%%%% TeX n ANSI %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% The following section is filler only . 
\newpage
\section{Font Manipulation Package (Advertisement)}

If you have to delve deeper into font structure than even the standard
{\yandy} font utilities can take you, consider the {\yandy} Font
Manipulation Package.  

Suppose your needs are not met by simply reencoding a font: you might have to make a new font by combining glyphs from two existing fonts, for example. The {\FMP}'s command line utilities for modifying Type~1 fonts allow you to do that and much more, {\it without\/} damaging the fonts' `hinting' (crucial to quality rendering).

The utilities include tools for inserting characters from one font into another, for adding new accented characters, for adjusting character side-bearings and advance widths, for applying arbitrary linear transformations to glyphs, and more\dots.

% Price: \$95 educational, \$145 noneducational, plus shipping. 
Contact {\yandy} for more information,
or check out €http://www.YandY.com€.
\vskip 3.5in

\hbox{\vrule\vbox{\hrule
% \hbox spread 8pt {\hfil\vbox spread 8pt{\vfil
\hbox spread 0pt {\hfil\vbox spread 8pt{\vfil
\hbox{\centerline{{\bigsize {Y\&Y}, Inc. 45 Walden Street, Concord MA 01742, USA}}}%
\hbox{\centerline{{\bigsize (978) 371--3286 (voice)  --- (978) 371--2004 (fax)}}}%
\hbox{\centerline{{\bigsize Email: {\tensl support@YandY.com}}}}%
\hbox{\centerline{{\bigsize World Wide Web: {\tensl http://www.YandY.com}}}}%
\vfil}\hfil}
\hrule}\vrule}%




%document ends here

\newpage
%take care of headers, footers, page numbering
%
\rm

\markbothsame{} % get rid of headers ???

% \blankpage

% \blankpage

% \newpage

% \ifodd\pageno\immediate\write16{Odd page \number\pageno}\blankpage
% \else\immediate\write16{Even page \number\pageno}\fi

\newcount\pagemod

\loop
\pagemod=\count0
\advance\pagemod by 2
\divide\pagemod by 4
\multiply\pagemod by 4
\advance\pagemod by -\count0
\advance\pagemod by -2
\ifnum\pagemod<0
\immediate\write16{Blank page \number\pageno}
\blankpage
\repeat

%
% Actual TOC starts here
%
\tocsect{1}{Introduction}{1}
\tocsect{2}{Font/Display Issues}{1}
\tocsub{2.1}{Font Encoding}{2}
\tocsub{2.2}{Font-File Formats}{3}
\tocsub{2.3}{The Encoding Morass}{5}
\tocsub{2.4}{Using On-The-Fly Reencoding}{8}
\tocsub{2.5}{Using `Hard' Reencoding}{10}
\tocsub{2.6}{Some Notes On ATM}{21}
\tocsub{2.7}{Hardwired Accents and the SAFESEAC Utility}{25}
\tocsub{2.8}{Character Positioning Options}{26}
\tocsect{3}{Printing Issues}{27}
\tocsub{3.1}{DVIWindo printing versus DVIPSONE printing}{27}
\tocsub{3.2}{DVIPSONE Setup}{29}
\tocsub{3.3}{Some Details of DVIPSONE Usage}{30}
\tocsub{3.4}{Troubleshooting Printing from DVIWindo}{32}
\tocsub{3.5}{Additional Troubleshooting for PostScript Printers}{34}
\tocsub{3.6}{Useful Printer Utilities}{35}
\tocsect{4}{{T\kern -.18em\lower .4ex\hbox {E}\kern -.1emX} Issues}{42}
\tocsub{4.1}{Working With Different Keyboards}{42}
\tocsub{4.2}{Some Details of {Y\hbox to.35\p@ {\hss \sixbf \&\hss }Y} TeX Usage}{44}
\tocsub{4.3}{Handling Graphics in the {Y\hbox to.35\p@ {\hss \sixbf \&\hss }Y} TeX System}{45}
\tocsect{5}{Operating System Issues}{63}
\tocsub{5.1}{DOS Considerations in Windows 95/98}{63}
\tocsub{5.2}{Windows NT Considerations}{64}
\tocsub{5.3}{Windows 95/98 Considerations}{67}
\tocsect{6}{Appendix}{68}
\tocsub{6.1}{Frequently Asked Questions}{68}
\tocsub{6.2}{{Y\hbox to.35\p@ {\hss \sixbf \&\hss }Y} TeX Flags and Arguments}{76}
\tocsub{6.3}{Flags and Arguments for DVIPSONE}{81}
\tocsub{6.4}{DVIWindo Command Line Arguments}{87}
\tocsub{6.5}{Maintaining DVIWindo's Preferences}{88}
\tocsub{6.6}{Fine Points of DVIWindo's `TeX' Menu}{92}
\tocsub{6.7}{Flags and arguments for AFMtoTFM}{94}
\tocsub{6.8}{Batch and PIF files}{96}
\tocsub{6.9}{TPIC Command List}{97}
\tocsub{6.10}{Modifying CM Text Fonts for TeX 'n ANSI Encoding}{99}
\tocsub{6.11}{Using the Old Adobe LucidaMath Fonts}{100}
\tocsect{7}{TeX 'n ANSI encoding (character layout)}{104}
%
% Discuss: hyperref, backref
% Discuss: Show WinExe, Pause Winexe
% Discuss: XYPic and XYPic fonts
% Discuss: TeX Pi fonts
% 
%
% Use -vzg on QMS printer, use -vzgr on HP LJ IV
%
% Adjustment to gutter 1996 March:
%
% twoup -vzgr -d=lpt1 -M=1 -y=-80 -x=-76 -x=87 techadd2
% twoup -vzh  -d=lpt1 -M=1 -y=-80 -x=-76 -x=87 techadd2
%
\bye


% remove initex.bat

\noindent Finally, here is €initex.bat€ (again, if your main {\yandy} program directory is something other than €c:\yandy€, various lines will be appropriately modified):

% ÆMDRVØManual indent adjustment in this sectionÆMDNMØ
\beginlines
{\parindent-6\p@
€@echo off€
€rem sample batch file for iniTeX€
€rem This is 'initex.bat' conveniently called from DVIWindo `TeX menu'€
€rem Two command line arguments: (1) TeX source file, (2) DVIWindo Menu Name€
€rem e.g. `initex plain Plain'   `initex lplain LaTeX'   `initex latex LaTeX2e'€
€rem Do *not* use an extension on the source file name (plain.tex say)€
€rem For this to work as intended, the `[Applications]' section in the file€
€rem DVIWINDO.INI in the Windows directory must be last.€
€rem And utilities in their default location.€
€rem Best to try and switch here to a temporary directory, ideally a RAM disk€
€if "%TEMP%" == "" goto notemp€
€rem See whether can find cdd utility supplied with DVIWindo€
€rem Note: cdd.com is a utility that switches both drive and directory€
€rem (but does not work for top-level directory in a drive)€
€if exist c:\yandy\util\cdd.com c:\yandy\util\cdd %TEMP%€
€if not exist c:\yandy\util\cdd.com cdd %TEMP%€
€rem If this fails, then please copy cdd.com to somewhere on your PATH€
€goto notmp€
€rem if TEMP is not defined, try TMP...€
€:notemp€
€if "%TMP%" == "" goto notmp€
€if exist c:\yandy\util\cdd.com c:\yandy\util\cdd %TMP%€
€if not exist c:\yandy\util\cdd.com cdd %TMP%€
€rem If this fails, then please copy cdd.com to somewhere on your PATH€
€:notmp€
€rem show current directory so we know for sure where we are€
€chdir€
€rem Some sanity checks first!  €
€rem This refers to DOS environment variable TEXFORMATS€
€if exist %TEXFORMATS%\nul goto fmtexist€
€echo Sorry, cannot find %TEXFORMATS% directory€
€set TEXFORMATS=c:\yandy\yandytex\fmt€
€rem goto endpause€
€:fmtexist€
€echo %1 | find "." > NUL€
€if errorlevel 1 goto noextens€
€echo Please do not use an extension (%1) when specifying file name€
€goto endpause€
€:noextens€
€rem Find out where the Windows directory is€
€if not "%windir%" == "" set WINDIR=%windir%€
€rem Note: decode.exe is a utility supplied with DVIWindo€
€if exist c:\yandy\util\decode.exe c:\yandy\util\decode -vx€
€    > c:\yandy\util\setwindo.bat€
€if not exist c:\yandy\util\decode.exe decode -vx€
€    > c:\yandy\util\setwindo.bat€
€rem If this fails, then please copy decode.exe to somewhere on your PATH€
€rem Now call the batch file setwindo.bat that was created by decode.exe€
€if exist c:\yandy\util\setwindo.bat call c:\yandy\util\setwindo€
€rem The above sets the environment variable WINDIR€
€if exist %WINDIR%\dviwindo.ini goto iniexist€
€echo Sorry, cannot find %WINDIR%\dviwindo.ini€
€goto endpause€
€:iniexist€
€rem deal with use of `amstex' instead of `amstex.ini'€
€if not "%1" == "amstex" goto notamstex€
€call c:\yandy\yandytex\tex -i amstex.ini€
€goto inidone€
€:notamstex€
€rem deal with the fact that LateX2e requires TWO iniTeX runs€
€if "%1" == "latex" goto latex€
€rem and for LaTeX2e beta release€
€if "%1" == "latex2e" goto latex2e€
€goto notlatex2e€
€:latex2e€
€call c:\yandy\yandytex\tex -i unpack2e.ins€
€goto latexcom€
€:latex€
€call c:\yandy\yandytex\tex -i unpack.ins€
€:latexcom€
€if errorlevel = 1 goto inidone€
€call c:\yandy\yandytex\tex -i %1.ltx€
€goto inidone€
€:notlatex2e€
€rem all other cases are simple, and are handled here€
€call c:\yandy\yandytex\tex -i %1€
€:inidone€
€rem DON'T mess with files if TeX had a cow ...€
€if not errorlevel = 1 goto seemsok€
€echo Sorry, TeX appears to be have become unhappy --- formats will not be saved€
€goto endpause€
€:seemsok€
€rem assumes that TEXFORMATS lists a single file directory€
€echo copying new format file to %TEXFORMATS%€
€copy %1.log %TEXFORMATS%€
€copy %1.fmt %TEXFORMATS%€
€echo deleting new format files from working directory€
€del %1.log€
€del %1.fmt€
€:skipdel€
€rem This assumes [Applications] section is last in dviwindo.ini€
€rem deal with 'amstex.ini' special case (want +amstex, not +amstex.ini)€
€if not "%1" == "amstex.ini" goto notams€
€rem No need to create TeX Menu entry for AMS TeX (already there)€
€goto end€
€:notams€
€rem deal with 'plain' special case (omit format, since plain is default)€
€if not "%1" == "plain" goto notplain€
€rem No need to create TeX Menu entry for plain TeX (already there)€
€goto end€
€:notplain€
€if not "%1" == "lplain" goto not209€
€rem No need to create TeX Menu entry for LaTeX 2.09€
€goto end€
€:not209€
€if not "%1" == "latex" goto not2e€
€rem No need to create TeX Menu entry for LaTeX 2e€
€goto end€
€:not2e€
€echo %2=c:\yandy\yandytex\tex.bat +%1 @.tex>> %WINDIR%\dviwindo.ini€
€goto end€
€:endpause€
€rem following trick requires DOS 5 or 6 €
€set | find "windir=" > NUL€
€if not errorlevel 1 pause€
€:end€
€rem This assumes a recent version of DVIWindo which can handle @.tex€
€rem This assumes a recent version of YandY TeX that can handle + instead of &€
}
\endlines

% Use -vzg on QMS printer, use -vzgr on HP LJ IV
%
% Adjustment to gutter 1996 March:
%
% twoup -vzgr -d=lpt1 -M=1 -y=-80 -x=-76 -x=87 techad21
% twoup -vzh  -d=lpt1 -M=1 -y=-80 -x=-76 -x=87 techad21
%
